function ab(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function am(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qx={exports:{}},Md={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob=Symbol.for("react.transitional.element"),lb=Symbol.for("react.fragment");function Kx(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:ob,type:t,key:i,ref:e!==void 0?e:null,props:n}}Md.Fragment=lb;Md.jsx=Kx;Md.jsxs=Kx;Qx.exports=Md;var O=Qx.exports,Zx={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om=Symbol.for("react.transitional.element"),cb=Symbol.for("react.portal"),ub=Symbol.for("react.fragment"),hb=Symbol.for("react.strict_mode"),fb=Symbol.for("react.profiler"),db=Symbol.for("react.consumer"),gb=Symbol.for("react.context"),mb=Symbol.for("react.forward_ref"),pb=Symbol.for("react.suspense"),yb=Symbol.for("react.memo"),Jx=Symbol.for("react.lazy"),Eb=Symbol.for("react.activity"),m2=Symbol.iterator;function xb(t){return t===null||typeof t!="object"?null:(t=m2&&t[m2]||t["@@iterator"],typeof t=="function"?t:null)}var $x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ew=Object.assign,tw={};function cc(t,e,n){this.props=t,this.context=e,this.refs=tw,this.updater=n||$x}cc.prototype.isReactComponent={};cc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nw(){}nw.prototype=cc.prototype;function lm(t,e,n){this.props=t,this.context=e,this.refs=tw,this.updater=n||$x}var cm=lm.prototype=new nw;cm.constructor=lm;ew(cm,cc.prototype);cm.isPureReactComponent=!0;var p2=Array.isArray;function N1(){}var jt={H:null,A:null,T:null,S:null},iw=Object.prototype.hasOwnProperty;function um(t,e,n){var i=n.ref;return{$$typeof:om,type:t,key:e,ref:i!==void 0?i:null,props:n}}function wb(t,e){return um(t.type,e,t.props)}function hm(t){return typeof t=="object"&&t!==null&&t.$$typeof===om}function _b(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var y2=/\/+/g;function S0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_b(""+t.key):e.toString(36)}function Ab(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(N1,N1):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function al(t,e,n,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case om:case cb:u=!0;break;case Jx:return u=t._init,al(u(t._payload),e,n,i,s)}}if(u)return s=s(t),u=i===""?"."+S0(t,0):i,p2(s)?(n="",u!=null&&(n=u.replace(y2,"$&/")+"/"),al(s,e,n,"",function(y){return y})):s!=null&&(hm(s)&&(s=wb(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(y2,"$&/")+"/")+u)),e.push(s)),1;u=0;var d=i===""?".":i+":";if(p2(t))for(var p=0;p<t.length;p++)i=t[p],a=d+S0(i,p),u+=al(i,e,n,a,s);else if(p=xb(t),typeof p=="function")for(t=p.call(t),p=0;!(i=t.next()).done;)i=i.value,a=d+S0(i,p++),u+=al(i,e,n,a,s);else if(a==="object"){if(typeof t.then=="function")return al(Ab(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return u}function Oh(t,e,n){if(t==null)return t;var i=[],s=0;return al(t,i,"","",function(a){return e.call(n,a,s++)}),i}function Tb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var E2=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Cb={map:Oh,forEach:function(t,e,n){Oh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oh(t,function(){e++}),e},toArray:function(t){return Oh(t,function(e){return e})||[]},only:function(t){if(!hm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Activity=Eb;Ue.Children=Cb;Ue.Component=cc;Ue.Fragment=ub;Ue.Profiler=fb;Ue.PureComponent=lm;Ue.StrictMode=hb;Ue.Suspense=pb;Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=jt;Ue.__COMPILER_RUNTIME={__proto__:null,c:function(t){return jt.H.useMemoCache(t)}};Ue.cache=function(t){return function(){return t.apply(null,arguments)}};Ue.cacheSignal=function(){return null};Ue.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=ew({},t.props),s=t.key;if(e!=null)for(a in e.key!==void 0&&(s=""+e.key),e)!iw.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];i.children=u}return um(t.type,s,i)};Ue.createContext=function(t){return t={$$typeof:gb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:db,_context:t},t};Ue.createElement=function(t,e,n){var i,s={},a=null;if(e!=null)for(i in e.key!==void 0&&(a=""+e.key),e)iw.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)s[i]===void 0&&(s[i]=u[i]);return um(t,a,s)};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:mb,render:t}};Ue.isValidElement=hm;Ue.lazy=function(t){return{$$typeof:Jx,_payload:{_status:-1,_result:t},_init:Tb}};Ue.memo=function(t,e){return{$$typeof:yb,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=jt.T,n={};jt.T=n;try{var i=t(),s=jt.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(N1,E2)}catch(a){E2(a)}finally{e!==null&&n.types!==null&&(e.types=n.types),jt.T=e}};Ue.unstable_useCacheRefresh=function(){return jt.H.useCacheRefresh()};Ue.use=function(t){return jt.H.use(t)};Ue.useActionState=function(t,e,n){return jt.H.useActionState(t,e,n)};Ue.useCallback=function(t,e){return jt.H.useCallback(t,e)};Ue.useContext=function(t){return jt.H.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t,e){return jt.H.useDeferredValue(t,e)};Ue.useEffect=function(t,e){return jt.H.useEffect(t,e)};Ue.useEffectEvent=function(t){return jt.H.useEffectEvent(t)};Ue.useId=function(){return jt.H.useId()};Ue.useImperativeHandle=function(t,e,n){return jt.H.useImperativeHandle(t,e,n)};Ue.useInsertionEffect=function(t,e){return jt.H.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return jt.H.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return jt.H.useMemo(t,e)};Ue.useOptimistic=function(t,e){return jt.H.useOptimistic(t,e)};Ue.useReducer=function(t,e,n){return jt.H.useReducer(t,e,n)};Ue.useRef=function(t){return jt.H.useRef(t)};Ue.useState=function(t){return jt.H.useState(t)};Ue.useSyncExternalStore=function(t,e,n){return jt.H.useSyncExternalStore(t,e,n)};Ue.useTransition=function(){return jt.H.useTransition()};Ue.version="19.2.0";Zx.exports=Ue;var ze=Zx.exports;const Sb=am(ze);var rw={exports:{}},Dd={},sw={exports:{}},aw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(de,me){var Ne=de.length;de.push(me);e:for(;0<Ne;){var Ye=Ne-1>>>1,nt=de[Ye];if(0<s(nt,me))de[Ye]=me,de[Ne]=nt,Ne=Ye;else break e}}function n(de){return de.length===0?null:de[0]}function i(de){if(de.length===0)return null;var me=de[0],Ne=de.pop();if(Ne!==me){de[0]=Ne;e:for(var Ye=0,nt=de.length,Yi=nt>>>1;Ye<Yi;){var xt=2*(Ye+1)-1,Gn=de[xt],ct=xt+1,ni=de[ct];if(0>s(Gn,Ne))ct<nt&&0>s(ni,Gn)?(de[Ye]=ni,de[ct]=Ne,Ye=ct):(de[Ye]=Gn,de[xt]=Ne,Ye=xt);else if(ct<nt&&0>s(ni,Ne))de[Ye]=ni,de[ct]=Ne,Ye=ct;else break e}}return me}function s(de,me){var Ne=de.sortIndex-me.sortIndex;return Ne!==0?Ne:de.id-me.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var p=[],y=[],w=1,T=null,S=3,I=!1,q=!1,X=!1,$=!1,V=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function H(de){for(var me=n(y);me!==null;){if(me.callback===null)i(y);else if(me.startTime<=de)i(y),me.sortIndex=me.expirationTime,e(p,me);else break;me=n(y)}}function oe(de){if(X=!1,H(de),!q)if(n(p)!==null)q=!0,re||(re=!0,j());else{var me=n(y);me!==null&&ie(oe,me.startTime-de)}}var re=!1,R=-1,D=5,M=-1;function z(){return $?!0:!(t.unstable_now()-M<D)}function G(){if($=!1,re){var de=t.unstable_now();M=de;var me=!0;try{e:{q=!1,X&&(X=!1,L(R),R=-1),I=!0;var Ne=S;try{t:{for(H(de),T=n(p);T!==null&&!(T.expirationTime>de&&z());){var Ye=T.callback;if(typeof Ye=="function"){T.callback=null,S=T.priorityLevel;var nt=Ye(T.expirationTime<=de);if(de=t.unstable_now(),typeof nt=="function"){T.callback=nt,H(de),me=!0;break t}T===n(p)&&i(p),H(de)}else i(p);T=n(p)}if(T!==null)me=!0;else{var Yi=n(y);Yi!==null&&ie(oe,Yi.startTime-de),me=!1}}break e}finally{T=null,S=Ne,I=!1}me=void 0}}finally{me?j():re=!1}}}var j;if(typeof k=="function")j=function(){k(G)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Ge=F.port2;F.port1.onmessage=G,j=function(){Ge.postMessage(null)}}else j=function(){V(G,0)};function ie(de,me){R=V(function(){de(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(de){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var Ne=S;S=me;try{return de()}finally{S=Ne}},t.unstable_requestPaint=function(){$=!0},t.unstable_runWithPriority=function(de,me){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Ne=S;S=de;try{return me()}finally{S=Ne}},t.unstable_scheduleCallback=function(de,me,Ne){var Ye=t.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Ye+Ne:Ye):Ne=Ye,de){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Ne+nt,de={id:w++,callback:me,priorityLevel:de,startTime:Ne,expirationTime:nt,sortIndex:-1},Ne>Ye?(de.sortIndex=Ne,e(y,de),n(p)===null&&de===n(y)&&(X?(L(R),R=-1):X=!0,ie(oe,Ne-Ye))):(de.sortIndex=nt,e(p,de),q||I||(q=!0,re||(re=!0,j()))),de},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(de){var me=S;return function(){var Ne=S;S=me;try{return de.apply(this,arguments)}finally{S=Ne}}}})(aw);sw.exports=aw;var bb=sw.exports,ow={exports:{}},ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=ze;function lw(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ws(){}var $n={d:{f:Ws,r:function(){throw Error(lw(522))},D:Ws,C:Ws,L:Ws,m:Ws,X:Ws,S:Ws,M:Ws},p:0,findDOMNode:null},Ib=Symbol.for("react.portal");function Nb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ib,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var au=vb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Od(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$n;ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(lw(299));return Nb(t,e,null,n)};ei.flushSync=function(t){var e=au.T,n=$n.p;try{if(au.T=null,$n.p=2,t)return t()}finally{au.T=e,$n.p=n,$n.d.f()}};ei.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,$n.d.C(t,e))};ei.prefetchDNS=function(t){typeof t=="string"&&$n.d.D(t)};ei.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Od(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?$n.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:a}):n==="script"&&$n.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};ei.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Od(e.as,e.crossOrigin);$n.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&$n.d.M(t)};ei.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Od(n,e.crossOrigin);$n.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};ei.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Od(e.as,e.crossOrigin);$n.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else $n.d.m(t)};ei.requestFormReset=function(t){$n.d.r(t)};ei.unstable_batchedUpdates=function(t,e){return t(e)};ei.useFormState=function(t,e,n){return au.H.useFormState(t,e,n)};ei.useFormStatus=function(){return au.H.useHostTransitionStatus()};ei.version="19.2.0";function cw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cw)}catch(t){console.error(t)}}cw(),ow.exports=ei;var Rb=ow.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tn=bb,uw=ze,Mb=Rb;function ae(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function hw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function eh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dw(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x2(t){if(eh(t)!==t)throw Error(ae(188))}function Db(t){var e=t.alternate;if(!e){if(e=eh(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return x2(s),t;if(a===i)return x2(s),e;a=a.sibling}throw Error(ae(188))}if(n.return!==i.return)n=s,i=a;else{for(var u=!1,d=s.child;d;){if(d===n){u=!0,n=s,i=a;break}if(d===i){u=!0,i=s,n=a;break}d=d.sibling}if(!u){for(d=a.child;d;){if(d===n){u=!0,n=a,i=s;break}if(d===i){u=!0,i=a,n=s;break}d=d.sibling}if(!u)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function gw(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=gw(t),e!==null)return e;t=t.sibling}return null}var zt=Object.assign,Ob=Symbol.for("react.element"),Lh=Symbol.for("react.transitional.element"),Wc=Symbol.for("react.portal"),gl=Symbol.for("react.fragment"),mw=Symbol.for("react.strict_mode"),R1=Symbol.for("react.profiler"),pw=Symbol.for("react.consumer"),Es=Symbol.for("react.context"),fm=Symbol.for("react.forward_ref"),M1=Symbol.for("react.suspense"),D1=Symbol.for("react.suspense_list"),dm=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),O1=Symbol.for("react.activity"),Lb=Symbol.for("react.memo_cache_sentinel"),w2=Symbol.iterator;function jc(t){return t===null||typeof t!="object"?null:(t=w2&&t[w2]||t["@@iterator"],typeof t=="function"?t:null)}var Pb=Symbol.for("react.client.reference");function L1(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Pb?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gl:return"Fragment";case R1:return"Profiler";case mw:return"StrictMode";case M1:return"Suspense";case D1:return"SuspenseList";case O1:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Wc:return"Portal";case Es:return t.displayName||"Context";case pw:return(t._context.displayName||"Context")+".Consumer";case fm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dm:return e=t.displayName||null,e!==null?e:L1(t.type)||"Memo";case Js:e=t._payload,t=t._init;try{return L1(t(e))}catch{}}return null}var Qc=Array.isArray,De=uw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt=Mb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,po={pending:!1,data:null,method:null,action:null},P1=[],ml=-1;function es(t){return{current:t}}function Dn(t){0>ml||(t.current=P1[ml],P1[ml]=null,ml--)}function Pt(t,e){ml++,P1[ml]=t.current,t.current=e}var Yr=es(null),Iu=es(null),ma=es(null),Mf=es(null);function Df(t,e){switch(Pt(ma,e),Pt(Iu,t),Pt(Yr,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?by(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=by(e),t=kA(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Dn(Yr),Pt(Yr,t)}function Fl(){Dn(Yr),Dn(Iu),Dn(ma)}function k1(t){t.memoizedState!==null&&Pt(Mf,t);var e=Yr.current,n=kA(e,t.type);e!==n&&(Pt(Iu,t),Pt(Yr,n))}function Of(t){Iu.current===t&&(Dn(Yr),Dn(Iu)),Mf.current===t&&(Dn(Mf),Uu._currentValue=po)}var b0,_2;function oo(t){if(b0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);b0=e&&e[1]||"",_2=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+b0+t+_2}var v0=!1;function I0(t,e){if(!t||v0)return"";v0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var T=function(){throw Error()};if(Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(T,[])}catch(I){var S=I}Reflect.construct(t,[],T)}else{try{T.call()}catch(I){S=I}t.call(T.prototype)}}else{try{throw Error()}catch(I){S=I}(T=t())&&typeof T.catch=="function"&&T.catch(function(){})}}catch(I){if(I&&S&&typeof I.stack=="string")return[I.stack,S.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),u=a[0],d=a[1];if(u&&d){var p=u.split(`
`),y=d.split(`
`);for(s=i=0;i<p.length&&!p[i].includes("DetermineComponentFrameRoot");)i++;for(;s<y.length&&!y[s].includes("DetermineComponentFrameRoot");)s++;if(i===p.length||s===y.length)for(i=p.length-1,s=y.length-1;1<=i&&0<=s&&p[i]!==y[s];)s--;for(;1<=i&&0<=s;i--,s--)if(p[i]!==y[s]){if(i!==1||s!==1)do if(i--,s--,0>s||p[i]!==y[s]){var w=`
`+p[i].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=i&&0<=s);break}}}finally{v0=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?oo(n):""}function kb(t,e){switch(t.tag){case 26:case 27:case 5:return oo(t.type);case 16:return oo("Lazy");case 13:return t.child!==e&&e!==null?oo("Suspense Fallback"):oo("Suspense");case 19:return oo("SuspenseList");case 0:case 15:return I0(t.type,!1);case 11:return I0(t.type.render,!1);case 1:return I0(t.type,!0);case 31:return oo("Activity");default:return""}}function A2(t){try{var e="",n=null;do e+=kb(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var B1=Object.prototype.hasOwnProperty,gm=Tn.unstable_scheduleCallback,N0=Tn.unstable_cancelCallback,Bb=Tn.unstable_shouldYield,Vb=Tn.unstable_requestPaint,Vi=Tn.unstable_now,Ub=Tn.unstable_getCurrentPriorityLevel,yw=Tn.unstable_ImmediatePriority,Ew=Tn.unstable_UserBlockingPriority,Lf=Tn.unstable_NormalPriority,Fb=Tn.unstable_LowPriority,xw=Tn.unstable_IdlePriority,jb=Tn.log,zb=Tn.unstable_setDisableYieldValue,th=null,Ui=null;function la(t){if(typeof jb=="function"&&zb(t),Ui&&typeof Ui.setStrictMode=="function")try{Ui.setStrictMode(th,t)}catch{}}var Fi=Math.clz32?Math.clz32:Yb,Hb=Math.log,Gb=Math.LN2;function Yb(t){return t>>>=0,t===0?32:31-(Hb(t)/Gb|0)|0}var Ph=256,kh=262144,Bh=4194304;function lo(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ld(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,a=t.suspendedLanes,u=t.pingedLanes;t=t.warmLanes;var d=i&134217727;return d!==0?(i=d&~a,i!==0?s=lo(i):(u&=d,u!==0?s=lo(u):n||(n=d&~t,n!==0&&(s=lo(n))))):(d=i&~a,d!==0?s=lo(d):u!==0?s=lo(u):n||(n=i&~t,n!==0&&(s=lo(n)))),s===0?0:e!==0&&e!==s&&!(e&a)&&(a=s&-s,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:s}function nh(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function qb(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ww(){var t=Bh;return Bh<<=1,!(Bh&62914560)&&(Bh=4194304),t}function R0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ih(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Xb(t,e,n,i,s,a){var u=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var d=t.entanglements,p=t.expirationTimes,y=t.hiddenUpdates;for(n=u&~n;0<n;){var w=31-Fi(n),T=1<<w;d[w]=0,p[w]=-1;var S=y[w];if(S!==null)for(y[w]=null,w=0;w<S.length;w++){var I=S[w];I!==null&&(I.lane&=-536870913)}n&=~T}i!==0&&_w(t,i,0),a!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=a&~(u&~e))}function _w(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Fi(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function Aw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Fi(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function Tw(t,e){var n=e&-e;return n=n&42?1:mm(n),n&(t.suspendedLanes|e)?0:n}function mm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function pm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Cw(){var t=pt.p;return t!==0?t:(t=window.event,t===void 0?32:XA(t.type))}function T2(t,e){var n=pt.p;try{return pt.p=t,e()}finally{pt.p=n}}var Ha=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Ha,Ei="__reactProps$"+Ha,uc="__reactContainer$"+Ha,V1="__reactEvents$"+Ha,Wb="__reactListeners$"+Ha,Qb="__reactHandles$"+Ha,C2="__reactResources$"+Ha,rh="__reactMarker$"+Ha;function ym(t){delete t[Vn],delete t[Ei],delete t[V1],delete t[Wb],delete t[Qb]}function pl(t){var e=t[Vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[uc]||n[Vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=My(t);t!==null;){if(n=t[Vn])return n;t=My(t)}return e}t=n,n=t.parentNode}return null}function hc(t){if(t=t[Vn]||t[uc]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Kc(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(ae(33))}function Il(t){var e=t[C2];return e||(e=t[C2]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Mn(t){t[rh]=!0}var Sw=new Set,bw={};function Lo(t,e){jl(t,e),jl(t+"Capture",e)}function jl(t,e){for(bw[t]=e,t=0;t<e.length;t++)Sw.add(e[t])}var Kb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),S2={},b2={};function Zb(t){return B1.call(b2,t)?!0:B1.call(S2,t)?!1:Kb.test(t)?b2[t]=!0:(S2[t]=!0,!1)}function sf(t,e,n){if(Zb(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Vh(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function hs(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function er(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jb(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,a=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(u){n=""+u,a.call(this,u)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function U1(t){if(!t._valueTracker){var e=vw(t)?"checked":"value";t._valueTracker=Jb(t,e,""+t[e])}}function Iw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=vw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Pf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $b=/[\n"\\]/g;function ir(t){return t.replace($b,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function F1(t,e,n,i,s,a,u,d){t.name="",u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?t.type=u:t.removeAttribute("type"),e!=null?u==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+er(e)):t.value!==""+er(e)&&(t.value=""+er(e)):u!=="submit"&&u!=="reset"||t.removeAttribute("value"),e!=null?j1(t,u,er(e)):n!=null?j1(t,u,er(n)):i!=null&&t.removeAttribute("value"),s==null&&a!=null&&(t.defaultChecked=!!a),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?t.name=""+er(d):t.removeAttribute("name")}function Nw(t,e,n,i,s,a,u,d){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null)){U1(t);return}n=n!=null?""+er(n):"",e=e!=null?""+er(e):n,d||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=d?t.checked:!!i,t.defaultChecked=!!i,u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(t.name=u),U1(t)}function j1(t,e,n){e==="number"&&Pf(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Nl(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+er(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Rw(t,e,n){if(e!=null&&(e=""+er(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+er(n):""}function Mw(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(ae(92));if(Qc(i)){if(1<i.length)throw Error(ae(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=er(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),U1(t)}function zl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var e3=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function v2(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||e3.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Dw(t,e,n){if(e!=null&&typeof e!="object")throw Error(ae(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&v2(t,s,i)}else for(var a in e)e.hasOwnProperty(a)&&v2(t,a,e[a])}function Em(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var t3=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),n3=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function af(t){return n3.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function xs(){}var z1=null;function xm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yl=null,Rl=null;function I2(t){var e=hc(t);if(e&&(t=e.stateNode)){var n=t[Ei]||null;e:switch(t=e.stateNode,e.type){case"input":if(F1(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ir(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[Ei]||null;if(!s)throw Error(ae(90));F1(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&Iw(i)}break e;case"textarea":Rw(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Nl(t,!!n.multiple,e,!1)}}}var M0=!1;function Ow(t,e,n){if(M0)return t(e,n);M0=!0;try{var i=t(e);return i}finally{if(M0=!1,(yl!==null||Rl!==null)&&(qd(),yl&&(e=yl,t=Rl,Rl=yl=null,I2(e),t)))for(e=0;e<t.length;e++)I2(t[e])}}function Nu(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Ei]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H1=!1;if(vs)try{var zc={};Object.defineProperty(zc,"passive",{get:function(){H1=!0}}),window.addEventListener("test",zc,zc),window.removeEventListener("test",zc,zc)}catch{H1=!1}var ca=null,wm=null,of=null;function Lw(){if(of)return of;var t,e=wm,n=e.length,i,s="value"in ca?ca.value:ca.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var u=n-t;for(i=1;i<=u&&e[n-i]===s[a-i];i++);return of=s.slice(t,1<i?1-i:void 0)}function lf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uh(){return!0}function N2(){return!1}function xi(t){function e(n,i,s,a,u){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Uh:N2,this.isPropagationStopped=N2,this}return zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uh)},persist:function(){},isPersistent:Uh}),e}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=xi(Po),sh=zt({},Po,{view:0,detail:0}),i3=xi(sh),D0,O0,Hc,kd=zt({},sh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_m,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hc&&(Hc&&t.type==="mousemove"?(D0=t.screenX-Hc.screenX,O0=t.screenY-Hc.screenY):O0=D0=0,Hc=t),D0)},movementY:function(t){return"movementY"in t?t.movementY:O0}}),R2=xi(kd),r3=zt({},kd,{dataTransfer:0}),s3=xi(r3),a3=zt({},sh,{relatedTarget:0}),L0=xi(a3),o3=zt({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),l3=xi(o3),c3=zt({},Po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),u3=xi(c3),h3=zt({},Po,{data:0}),M2=xi(h3),f3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=g3[t])?!!e[t]:!1}function _m(){return m3}var p3=zt({},sh,{key:function(t){if(t.key){var e=f3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_m,charCode:function(t){return t.type==="keypress"?lf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),y3=xi(p3),E3=zt({},kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D2=xi(E3),x3=zt({},sh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_m}),w3=xi(x3),_3=zt({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),A3=xi(_3),T3=zt({},kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),C3=xi(T3),S3=zt({},Po,{newState:0,oldState:0}),b3=xi(S3),v3=[9,13,27,32],Am=vs&&"CompositionEvent"in window,ou=null;vs&&"documentMode"in document&&(ou=document.documentMode);var I3=vs&&"TextEvent"in window&&!ou,Pw=vs&&(!Am||ou&&8<ou&&11>=ou),O2=" ",L2=!1;function kw(t,e){switch(t){case"keyup":return v3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var El=!1;function N3(t,e){switch(t){case"compositionend":return Bw(e);case"keypress":return e.which!==32?null:(L2=!0,O2);case"textInput":return t=e.data,t===O2&&L2?null:t;default:return null}}function R3(t,e){if(El)return t==="compositionend"||!Am&&kw(t,e)?(t=Lw(),of=wm=ca=null,El=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pw&&e.locale!=="ko"?null:e.data;default:return null}}var M3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M3[t.type]:e==="textarea"}function Vw(t,e,n,i){yl?Rl?Rl.push(i):Rl=[i]:yl=i,e=$f(e,"onChange"),0<e.length&&(n=new Pd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var lu=null,Ru=null;function D3(t){OA(t,0)}function Bd(t){var e=Kc(t);if(Iw(e))return t}function k2(t,e){if(t==="change")return e}var Uw=!1;if(vs){var P0;if(vs){var k0="oninput"in document;if(!k0){var B2=document.createElement("div");B2.setAttribute("oninput","return;"),k0=typeof B2.oninput=="function"}P0=k0}else P0=!1;Uw=P0&&(!document.documentMode||9<document.documentMode)}function V2(){lu&&(lu.detachEvent("onpropertychange",Fw),Ru=lu=null)}function Fw(t){if(t.propertyName==="value"&&Bd(Ru)){var e=[];Vw(e,Ru,t,xm(t)),Ow(D3,e)}}function O3(t,e,n){t==="focusin"?(V2(),lu=e,Ru=n,lu.attachEvent("onpropertychange",Fw)):t==="focusout"&&V2()}function L3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bd(Ru)}function P3(t,e){if(t==="click")return Bd(e)}function k3(t,e){if(t==="input"||t==="change")return Bd(e)}function B3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zi=typeof Object.is=="function"?Object.is:B3;function Mu(t,e){if(zi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!B1.call(e,s)||!zi(t[s],e[s]))return!1}return!0}function U2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F2(t,e){var n=U2(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U2(n)}}function jw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zw(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Pf(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pf(t.document)}return e}function Tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var V3=vs&&"documentMode"in document&&11>=document.documentMode,xl=null,G1=null,cu=null,Y1=!1;function j2(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Y1||xl==null||xl!==Pf(i)||(i=xl,"selectionStart"in i&&Tm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cu&&Mu(cu,i)||(cu=i,i=$f(G1,"onSelect"),0<i.length&&(e=new Pd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=xl)))}function ao(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wl={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},B0={},Hw={};vs&&(Hw=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function ko(t){if(B0[t])return B0[t];if(!wl[t])return t;var e=wl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hw)return B0[t]=e[n];return t}var Gw=ko("animationend"),Yw=ko("animationiteration"),qw=ko("animationstart"),U3=ko("transitionrun"),F3=ko("transitionstart"),j3=ko("transitioncancel"),Xw=ko("transitionend"),Ww=new Map,q1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");q1.push("scrollEnd");function Cr(t,e){Ww.set(t,e),Lo(e,[t])}var kf=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},$i=[],_l=0,Cm=0;function Vd(){for(var t=_l,e=Cm=_l=0;e<t;){var n=$i[e];$i[e++]=null;var i=$i[e];$i[e++]=null;var s=$i[e];$i[e++]=null;var a=$i[e];if($i[e++]=null,i!==null&&s!==null){var u=i.pending;u===null?s.next=s:(s.next=u.next,u.next=s),i.pending=s}a!==0&&Qw(n,s,a)}}function Ud(t,e,n,i){$i[_l++]=t,$i[_l++]=e,$i[_l++]=n,$i[_l++]=i,Cm|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Sm(t,e,n,i){return Ud(t,e,n,i),Bf(t)}function Bo(t,e){return Ud(t,null,null,e),Bf(t)}function Qw(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,a=t.return;a!==null;)a.childLanes|=n,i=a.alternate,i!==null&&(i.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(s=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,s&&e!==null&&(s=31-Fi(n),t=a.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),a):null}function Bf(t){if(50<Eu)throw Eu=0,dg=null,Error(ae(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Al={};function z3(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(t,e,n,i){return new z3(t,e,n,i)}function bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cs(t,e){var n=t.alternate;return n===null?(n=Li(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Kw(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function cf(t,e,n,i,s,a){var u=0;if(i=t,typeof t=="function")bm(t)&&(u=1);else if(typeof t=="string")u=Xv(t,n,Yr.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case O1:return t=Li(31,n,e,s),t.elementType=O1,t.lanes=a,t;case gl:return yo(n.children,s,a,e);case mw:u=8,s|=24;break;case R1:return t=Li(12,n,e,s|2),t.elementType=R1,t.lanes=a,t;case M1:return t=Li(13,n,e,s),t.elementType=M1,t.lanes=a,t;case D1:return t=Li(19,n,e,s),t.elementType=D1,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Es:u=10;break e;case pw:u=9;break e;case fm:u=11;break e;case dm:u=14;break e;case Js:u=16,i=null;break e}u=29,n=Error(ae(130,t===null?"null":typeof t,"")),i=null}return e=Li(u,n,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function yo(t,e,n,i){return t=Li(7,t,i,e),t.lanes=n,t}function V0(t,e,n){return t=Li(6,t,null,e),t.lanes=n,t}function Zw(t){var e=Li(18,null,null,0);return e.stateNode=t,e}function U0(t,e,n){return e=Li(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var z2=new WeakMap;function rr(t,e){if(typeof t=="object"&&t!==null){var n=z2.get(t);return n!==void 0?n:(e={value:t,source:e,stack:A2(e)},z2.set(t,e),e)}return{value:t,source:e,stack:A2(e)}}var Tl=[],Cl=0,Vf=null,Du=0,tr=[],nr=0,Ma=null,zr=1,Hr="";function ps(t,e){Tl[Cl++]=Du,Tl[Cl++]=Vf,Vf=t,Du=e}function Jw(t,e,n){tr[nr++]=zr,tr[nr++]=Hr,tr[nr++]=Ma,Ma=t;var i=zr;t=Hr;var s=32-Fi(i)-1;i&=~(1<<s),n+=1;var a=32-Fi(e)+s;if(30<a){var u=s-s%5;a=(i&(1<<u)-1).toString(32),i>>=u,s-=u,zr=1<<32-Fi(e)+s|n<<s|i,Hr=a+t}else zr=1<<a|n<<s|i,Hr=t}function vm(t){t.return!==null&&(ps(t,1),Jw(t,1,0))}function Im(t){for(;t===Vf;)Vf=Tl[--Cl],Tl[Cl]=null,Du=Tl[--Cl],Tl[Cl]=null;for(;t===Ma;)Ma=tr[--nr],tr[nr]=null,Hr=tr[--nr],tr[nr]=null,zr=tr[--nr],tr[nr]=null}function $w(t,e){tr[nr++]=zr,tr[nr++]=Hr,tr[nr++]=Ma,zr=e.id,Hr=e.overflow,Ma=t}var Un=null,Ft=null,it=!1,pa=null,sr=!1,X1=Error(ae(519));function Da(t){var e=Error(ae(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ou(rr(e,t)),X1}function H2(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Vn]=t,e[Ei]=i,n){case"dialog":We("cancel",e),We("close",e);break;case"iframe":case"object":case"embed":We("load",e);break;case"video":case"audio":for(n=0;n<Bu.length;n++)We(Bu[n],e);break;case"source":We("error",e);break;case"img":case"image":case"link":We("error",e),We("load",e);break;case"details":We("toggle",e);break;case"input":We("invalid",e),Nw(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":We("invalid",e);break;case"textarea":We("invalid",e),Mw(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||PA(e.textContent,n)?(i.popover!=null&&(We("beforetoggle",e),We("toggle",e)),i.onScroll!=null&&We("scroll",e),i.onScrollEnd!=null&&We("scrollend",e),i.onClick!=null&&(e.onclick=xs),e=!0):e=!1,e||Da(t,!0)}function G2(t){for(Un=t.return;Un;)switch(Un.tag){case 5:case 31:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:Un=Un.return}}function il(t){if(t!==Un)return!1;if(!it)return G2(t),it=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Eg(t.type,t.memoizedProps)),n=!n),n&&Ft&&Da(t),G2(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));Ft=Ry(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));Ft=Ry(t)}else e===27?(e=Ft,Ga(t.type)?(t=Ag,Ag=null,Ft=t):Ft=e):Ft=Un?lr(t.stateNode.nextSibling):null;return!0}function To(){Ft=Un=null,it=!1}function F0(){var t=pa;return t!==null&&(gi===null?gi=t:gi.push.apply(gi,t),pa=null),t}function Ou(t){pa===null?pa=[t]:pa.push(t)}var W1=es(null),Vo=null,ws=null;function ea(t,e,n){Pt(W1,e._currentValue),e._currentValue=n}function Ss(t){t._currentValue=W1.current,Dn(W1)}function Q1(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function K1(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){var u=s.child;a=a.firstContext;e:for(;a!==null;){var d=a;a=s;for(var p=0;p<e.length;p++)if(d.context===e[p]){a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),Q1(a.return,n,t),i||(u=null);break e}a=d.next}}else if(s.tag===18){if(u=s.return,u===null)throw Error(ae(341));u.lanes|=n,a=u.alternate,a!==null&&(a.lanes|=n),Q1(u,n,t),u=null}else u=s.child;if(u!==null)u.return=s;else for(u=s;u!==null;){if(u===t){u=null;break}if(s=u.sibling,s!==null){s.return=u.return,u=s;break}u=u.return}s=u}}function fc(t,e,n,i){t=null;for(var s=e,a=!1;s!==null;){if(!a){if(s.flags&524288)a=!0;else if(s.flags&262144)break}if(s.tag===10){var u=s.alternate;if(u===null)throw Error(ae(387));if(u=u.memoizedProps,u!==null){var d=s.type;zi(s.pendingProps.value,u.value)||(t!==null?t.push(d):t=[d])}}else if(s===Mf.current){if(u=s.alternate,u===null)throw Error(ae(387));u.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(Uu):t=[Uu])}s=s.return}t!==null&&K1(e,t,n,i),e.flags|=262144}function Uf(t){for(t=t.firstContext;t!==null;){if(!zi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Co(t){Vo=t,ws=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function jn(t){return e_(Vo,t)}function Fh(t,e){return Vo===null&&Co(t),e_(t,e)}function e_(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ws===null){if(t===null)throw Error(ae(308));ws=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ws=ws.next=e;return n}var H3=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},G3=Tn.unstable_scheduleCallback,Y3=Tn.unstable_NormalPriority,gn={$$typeof:Es,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nm(){return{controller:new H3,data:new Map,refCount:0}}function ah(t){t.refCount--,t.refCount===0&&G3(Y3,function(){t.controller.abort()})}var uu=null,Z1=0,Hl=0,Ml=null;function q3(t,e){if(uu===null){var n=uu=[];Z1=0,Hl=ep(),Ml={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Z1++,e.then(Y2,Y2),e}function Y2(){if(--Z1===0&&uu!==null){Ml!==null&&(Ml.status="fulfilled");var t=uu;uu=null,Hl=0,Ml=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function X3(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var q2=De.S;De.S=function(t,e){gA=Vi(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&q3(t,e),q2!==null&&q2(t,e)};var Eo=es(null);function Rm(){var t=Eo.current;return t!==null?t:Mt.pooledCache}function uf(t,e){e===null?Pt(Eo,Eo.current):Pt(Eo,e.pool)}function t_(){var t=Rm();return t===null?null:{parent:gn._currentValue,pool:t}}var dc=Error(ae(460)),Mm=Error(ae(474)),Fd=Error(ae(542)),Ff={then:function(){}};function X2(t){return t=t.status,t==="fulfilled"||t==="rejected"}function n_(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(xs,xs),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Q2(t),t;default:if(typeof e.status=="string")e.then(xs,xs);else{if(t=Mt,t!==null&&100<t.shellSuspendCounter)throw Error(ae(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Q2(t),t}throw xo=e,dc}}function co(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(xo=n,dc):n}}var xo=null;function W2(){if(xo===null)throw Error(ae(459));var t=xo;return xo=null,t}function Q2(t){if(t===dc||t===Fd)throw Error(ae(483))}var Dl=null,Lu=0;function jh(t){var e=Lu;return Lu+=1,Dl===null&&(Dl=[]),n_(Dl,t,e)}function Gc(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function zh(t,e){throw e.$$typeof===Ob?Error(ae(525)):(t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function i_(t){function e(V,L){if(t){var k=V.deletions;k===null?(V.deletions=[L],V.flags|=16):k.push(L)}}function n(V,L){if(!t)return null;for(;L!==null;)e(V,L),L=L.sibling;return null}function i(V){for(var L=new Map;V!==null;)V.key!==null?L.set(V.key,V):L.set(V.index,V),V=V.sibling;return L}function s(V,L){return V=Cs(V,L),V.index=0,V.sibling=null,V}function a(V,L,k){return V.index=k,t?(k=V.alternate,k!==null?(k=k.index,k<L?(V.flags|=67108866,L):k):(V.flags|=67108866,L)):(V.flags|=1048576,L)}function u(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function d(V,L,k,H){return L===null||L.tag!==6?(L=V0(k,V.mode,H),L.return=V,L):(L=s(L,k),L.return=V,L)}function p(V,L,k,H){var oe=k.type;return oe===gl?w(V,L,k.props.children,H,k.key):L!==null&&(L.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Js&&co(oe)===L.type)?(L=s(L,k.props),Gc(L,k),L.return=V,L):(L=cf(k.type,k.key,k.props,null,V.mode,H),Gc(L,k),L.return=V,L)}function y(V,L,k,H){return L===null||L.tag!==4||L.stateNode.containerInfo!==k.containerInfo||L.stateNode.implementation!==k.implementation?(L=U0(k,V.mode,H),L.return=V,L):(L=s(L,k.children||[]),L.return=V,L)}function w(V,L,k,H,oe){return L===null||L.tag!==7?(L=yo(k,V.mode,H,oe),L.return=V,L):(L=s(L,k),L.return=V,L)}function T(V,L,k){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=V0(""+L,V.mode,k),L.return=V,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Lh:return k=cf(L.type,L.key,L.props,null,V.mode,k),Gc(k,L),k.return=V,k;case Wc:return L=U0(L,V.mode,k),L.return=V,L;case Js:return L=co(L),T(V,L,k)}if(Qc(L)||jc(L))return L=yo(L,V.mode,k,null),L.return=V,L;if(typeof L.then=="function")return T(V,jh(L),k);if(L.$$typeof===Es)return T(V,Fh(V,L),k);zh(V,L)}return null}function S(V,L,k,H){var oe=L!==null?L.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return oe!==null?null:d(V,L,""+k,H);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Lh:return k.key===oe?p(V,L,k,H):null;case Wc:return k.key===oe?y(V,L,k,H):null;case Js:return k=co(k),S(V,L,k,H)}if(Qc(k)||jc(k))return oe!==null?null:w(V,L,k,H,null);if(typeof k.then=="function")return S(V,L,jh(k),H);if(k.$$typeof===Es)return S(V,L,Fh(V,k),H);zh(V,k)}return null}function I(V,L,k,H,oe){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return V=V.get(k)||null,d(L,V,""+H,oe);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Lh:return V=V.get(H.key===null?k:H.key)||null,p(L,V,H,oe);case Wc:return V=V.get(H.key===null?k:H.key)||null,y(L,V,H,oe);case Js:return H=co(H),I(V,L,k,H,oe)}if(Qc(H)||jc(H))return V=V.get(k)||null,w(L,V,H,oe,null);if(typeof H.then=="function")return I(V,L,k,jh(H),oe);if(H.$$typeof===Es)return I(V,L,k,Fh(L,H),oe);zh(L,H)}return null}function q(V,L,k,H){for(var oe=null,re=null,R=L,D=L=0,M=null;R!==null&&D<k.length;D++){R.index>D?(M=R,R=null):M=R.sibling;var z=S(V,R,k[D],H);if(z===null){R===null&&(R=M);break}t&&R&&z.alternate===null&&e(V,R),L=a(z,L,D),re===null?oe=z:re.sibling=z,re=z,R=M}if(D===k.length)return n(V,R),it&&ps(V,D),oe;if(R===null){for(;D<k.length;D++)R=T(V,k[D],H),R!==null&&(L=a(R,L,D),re===null?oe=R:re.sibling=R,re=R);return it&&ps(V,D),oe}for(R=i(R);D<k.length;D++)M=I(R,V,D,k[D],H),M!==null&&(t&&M.alternate!==null&&R.delete(M.key===null?D:M.key),L=a(M,L,D),re===null?oe=M:re.sibling=M,re=M);return t&&R.forEach(function(G){return e(V,G)}),it&&ps(V,D),oe}function X(V,L,k,H){if(k==null)throw Error(ae(151));for(var oe=null,re=null,R=L,D=L=0,M=null,z=k.next();R!==null&&!z.done;D++,z=k.next()){R.index>D?(M=R,R=null):M=R.sibling;var G=S(V,R,z.value,H);if(G===null){R===null&&(R=M);break}t&&R&&G.alternate===null&&e(V,R),L=a(G,L,D),re===null?oe=G:re.sibling=G,re=G,R=M}if(z.done)return n(V,R),it&&ps(V,D),oe;if(R===null){for(;!z.done;D++,z=k.next())z=T(V,z.value,H),z!==null&&(L=a(z,L,D),re===null?oe=z:re.sibling=z,re=z);return it&&ps(V,D),oe}for(R=i(R);!z.done;D++,z=k.next())z=I(R,V,D,z.value,H),z!==null&&(t&&z.alternate!==null&&R.delete(z.key===null?D:z.key),L=a(z,L,D),re===null?oe=z:re.sibling=z,re=z);return t&&R.forEach(function(j){return e(V,j)}),it&&ps(V,D),oe}function $(V,L,k,H){if(typeof k=="object"&&k!==null&&k.type===gl&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Lh:e:{for(var oe=k.key;L!==null;){if(L.key===oe){if(oe=k.type,oe===gl){if(L.tag===7){n(V,L.sibling),H=s(L,k.props.children),H.return=V,V=H;break e}}else if(L.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Js&&co(oe)===L.type){n(V,L.sibling),H=s(L,k.props),Gc(H,k),H.return=V,V=H;break e}n(V,L);break}else e(V,L);L=L.sibling}k.type===gl?(H=yo(k.props.children,V.mode,H,k.key),H.return=V,V=H):(H=cf(k.type,k.key,k.props,null,V.mode,H),Gc(H,k),H.return=V,V=H)}return u(V);case Wc:e:{for(oe=k.key;L!==null;){if(L.key===oe)if(L.tag===4&&L.stateNode.containerInfo===k.containerInfo&&L.stateNode.implementation===k.implementation){n(V,L.sibling),H=s(L,k.children||[]),H.return=V,V=H;break e}else{n(V,L);break}else e(V,L);L=L.sibling}H=U0(k,V.mode,H),H.return=V,V=H}return u(V);case Js:return k=co(k),$(V,L,k,H)}if(Qc(k))return q(V,L,k,H);if(jc(k)){if(oe=jc(k),typeof oe!="function")throw Error(ae(150));return k=oe.call(k),X(V,L,k,H)}if(typeof k.then=="function")return $(V,L,jh(k),H);if(k.$$typeof===Es)return $(V,L,Fh(V,k),H);zh(V,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,L!==null&&L.tag===6?(n(V,L.sibling),H=s(L,k),H.return=V,V=H):(n(V,L),H=V0(k,V.mode,H),H.return=V,V=H),u(V)):n(V,L)}return function(V,L,k,H){try{Lu=0;var oe=$(V,L,k,H);return Dl=null,oe}catch(R){if(R===dc||R===Fd)throw R;var re=Li(29,R,null,V.mode);return re.lanes=H,re.return=V,re}finally{}}}var So=i_(!0),r_=i_(!1),$s=!1;function Dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function J1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ya(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ea(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=Bf(t),Qw(t,null,n),e}return Ud(t,i,e,n),Bf(t)}function hu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Aw(t,n)}}function j0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?s=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var $1=!1;function fu(){if($1){var t=Ml;if(t!==null)throw t}}function du(t,e,n,i){$1=!1;var s=t.updateQueue;$s=!1;var a=s.firstBaseUpdate,u=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var p=d,y=p.next;p.next=null,u===null?a=y:u.next=y,u=p;var w=t.alternate;w!==null&&(w=w.updateQueue,d=w.lastBaseUpdate,d!==u&&(d===null?w.firstBaseUpdate=y:d.next=y,w.lastBaseUpdate=p))}if(a!==null){var T=s.baseState;u=0,w=y=p=null,d=a;do{var S=d.lane&-536870913,I=S!==d.lane;if(I?(tt&S)===S:(i&S)===S){S!==0&&S===Hl&&($1=!0),w!==null&&(w=w.next={lane:0,tag:d.tag,payload:d.payload,callback:null,next:null});e:{var q=t,X=d;S=e;var $=n;switch(X.tag){case 1:if(q=X.payload,typeof q=="function"){T=q.call($,T,S);break e}T=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=X.payload,S=typeof q=="function"?q.call($,T,S):q,S==null)break e;T=zt({},T,S);break e;case 2:$s=!0}}S=d.callback,S!==null&&(t.flags|=64,I&&(t.flags|=8192),I=s.callbacks,I===null?s.callbacks=[S]:I.push(S))}else I={lane:S,tag:d.tag,payload:d.payload,callback:d.callback,next:null},w===null?(y=w=I,p=T):w=w.next=I,u|=S;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;I=d,d=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);w===null&&(p=T),s.baseState=p,s.firstBaseUpdate=y,s.lastBaseUpdate=w,a===null&&(s.shared.lanes=0),La|=u,t.lanes=u,t.memoizedState=T}}function s_(t,e){if(typeof t!="function")throw Error(ae(191,t));t.call(e)}function a_(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)s_(n[t],e)}var Gl=es(null),jf=es(0);function K2(t,e){t=Ms,Pt(jf,t),Pt(Gl,e),Ms=t|e.baseLanes}function eg(){Pt(jf,Ms),Pt(Gl,Gl.current)}function Om(){Ms=jf.current,Dn(Gl),Dn(jf)}var Hi=es(null),or=null;function ta(t){var e=t.alternate;Pt(sn,sn.current&1),Pt(Hi,t),or===null&&(e===null||Gl.current!==null||e.memoizedState!==null)&&(or=t)}function tg(t){Pt(sn,sn.current),Pt(Hi,t),or===null&&(or=t)}function o_(t){t.tag===22?(Pt(sn,sn.current),Pt(Hi,t),or===null&&(or=t)):na()}function na(){Pt(sn,sn.current),Pt(Hi,Hi.current)}function Oi(t){Dn(Hi),or===t&&(or=null),Dn(sn)}var sn=es(0);function zf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||wg(n)||_g(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Is=0,He=null,It=null,fn=null,Hf=!1,Ol=!1,bo=!1,Gf=0,Pu=0,Ll=null,W3=0;function Jt(){throw Error(ae(321))}function Lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zi(t[n],e[n]))return!1;return!0}function Pm(t,e,n,i,s,a){return Is=a,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,De.H=t===null||t.memoizedState===null?V_:qm,bo=!1,a=n(i,s),bo=!1,Ol&&(a=c_(e,n,i,s)),l_(t),a}function l_(t){De.H=ku;var e=It!==null&&It.next!==null;if(Is=0,fn=It=He=null,Hf=!1,Pu=0,Ll=null,e)throw Error(ae(300));t===null||pn||(t=t.dependencies,t!==null&&Uf(t)&&(pn=!0))}function c_(t,e,n,i){He=t;var s=0;do{if(Ol&&(Ll=null),Pu=0,Ol=!1,25<=s)throw Error(ae(301));if(s+=1,fn=It=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}De.H=U_,a=e(n,i)}while(Ol);return a}function Q3(){var t=De.H,e=t.useState()[0];return e=typeof e.then=="function"?oh(e):e,t=t.useState()[0],(It!==null?It.memoizedState:null)!==t&&(He.flags|=1024),e}function km(){var t=Gf!==0;return Gf=0,t}function Bm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Vm(t){if(Hf){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Hf=!1}Is=0,fn=It=He=null,Ol=!1,Pu=Gf=0,Ll=null}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?He.memoizedState=fn=t:fn=fn.next=t,fn}function an(){if(It===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var e=fn===null?He.memoizedState:fn.next;if(e!==null)fn=e,It=t;else{if(t===null)throw He.alternate===null?Error(ae(467)):Error(ae(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},fn===null?He.memoizedState=fn=t:fn=fn.next=t}return fn}function jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oh(t){var e=Pu;return Pu+=1,Ll===null&&(Ll=[]),t=n_(Ll,t,e),e=He,(fn===null?e.memoizedState:fn.next)===null&&(e=e.alternate,De.H=e===null||e.memoizedState===null?V_:qm),t}function zd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return oh(t);if(t.$$typeof===Es)return jn(t)}throw Error(ae(438,String(t)))}function Um(t){var e=null,n=He.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=He.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=jd(),He.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=Lb;return e.index++,n}function Ns(t,e){return typeof e=="function"?e(t):e}function hf(t){var e=an();return Fm(e,It,t)}function Fm(t,e,n){var i=t.queue;if(i===null)throw Error(ae(311));i.lastRenderedReducer=n;var s=t.baseQueue,a=i.pending;if(a!==null){if(s!==null){var u=s.next;s.next=a.next,a.next=u}e.baseQueue=s=a,i.pending=null}if(a=t.baseState,s===null)t.memoizedState=a;else{e=s.next;var d=u=null,p=null,y=e,w=!1;do{var T=y.lane&-536870913;if(T!==y.lane?(tt&T)===T:(Is&T)===T){var S=y.revertLane;if(S===0)p!==null&&(p=p.next={lane:0,revertLane:0,gesture:null,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),T===Hl&&(w=!0);else if((Is&S)===S){y=y.next,S===Hl&&(w=!0);continue}else T={lane:0,revertLane:y.revertLane,gesture:null,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null},p===null?(d=p=T,u=a):p=p.next=T,He.lanes|=S,La|=S;T=y.action,bo&&n(a,T),a=y.hasEagerState?y.eagerState:n(a,T)}else S={lane:T,revertLane:y.revertLane,gesture:y.gesture,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null},p===null?(d=p=S,u=a):p=p.next=S,He.lanes|=T,La|=T;y=y.next}while(y!==null&&y!==e);if(p===null?u=a:p.next=d,!zi(a,t.memoizedState)&&(pn=!0,w&&(n=Ml,n!==null)))throw n;t.memoizedState=a,t.baseState=u,t.baseQueue=p,i.lastRenderedState=a}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function z0(t){var e=an(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do a=t(a,u.action),u=u.next;while(u!==s);zi(a,e.memoizedState)||(pn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function u_(t,e,n){var i=He,s=an(),a=it;if(a){if(n===void 0)throw Error(ae(407));n=n()}else n=e();var u=!zi((It||s).memoizedState,n);if(u&&(s.memoizedState=n,pn=!0),s=s.queue,jm(d_.bind(null,i,s,t),[t]),s.getSnapshot!==e||u||fn!==null&&fn.memoizedState.tag&1){if(i.flags|=2048,Yl(9,{destroy:void 0},f_.bind(null,i,s,n,e),null),Mt===null)throw Error(ae(349));a||Is&127||h_(i,e,n)}return n}function h_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e=jd(),He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f_(t,e,n,i){e.value=n,e.getSnapshot=i,g_(e)&&m_(t)}function d_(t,e,n){return n(function(){g_(e)&&m_(t)})}function g_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zi(t,n)}catch{return!0}}function m_(t){var e=Bo(t,2);e!==null&&yi(e,t,2)}function ng(t){var e=Jn();if(typeof t=="function"){var n=t;if(t=n(),bo){la(!0);try{n()}finally{la(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},e}function p_(t,e,n,i){return t.baseState=n,Fm(t,It,typeof i=="function"?i:Ns)}function K3(t,e,n,i,s){if(Gd(t))throw Error(ae(485));if(t=e.action,t!==null){var a={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(u){a.listeners.push(u)}};De.T!==null?n(!0):a.isTransition=!1,i(a),n=e.pending,n===null?(a.next=e.pending=a,y_(e,a)):(a.next=n.next,e.pending=n.next=a)}}function y_(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var a=De.T,u={};De.T=u;try{var d=n(s,i),p=De.S;p!==null&&p(u,d),Z2(t,e,d)}catch(y){ig(t,e,y)}finally{a!==null&&u.types!==null&&(a.types=u.types),De.T=a}}else try{a=n(s,i),Z2(t,e,a)}catch(y){ig(t,e,y)}}function Z2(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){J2(t,e,i)},function(i){return ig(t,e,i)}):J2(t,e,n)}function J2(t,e,n){e.status="fulfilled",e.value=n,E_(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,y_(t,n)))}function ig(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,E_(e),e=e.next;while(e!==i)}t.action=null}function E_(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function x_(t,e){return e}function $2(t,e){if(it){var n=Mt.formState;if(n!==null){e:{var i=He;if(it){if(Ft){t:{for(var s=Ft,a=sr;s.nodeType!==8;){if(!a){s=null;break t}if(s=lr(s.nextSibling),s===null){s=null;break t}}a=s.data,s=a==="F!"||a==="F"?s:null}if(s){Ft=lr(s.nextSibling),i=s.data==="F!";break e}}Da(i)}i=!1}i&&(e=n[0])}}return n=Jn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x_,lastRenderedState:e},n.queue=i,n=P_.bind(null,He,i),i.dispatch=n,i=ng(!1),a=Ym.bind(null,He,!1,i.queue),i=Jn(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=K3.bind(null,He,s,a,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function ey(t){var e=an();return w_(e,It,t)}function w_(t,e,n){if(e=Fm(t,e,x_)[0],t=hf(Ns)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=oh(e)}catch(u){throw u===dc?Fd:u}else i=e;e=an();var s=e.queue,a=s.dispatch;return n!==e.memoizedState&&(He.flags|=2048,Yl(9,{destroy:void 0},Z3.bind(null,s,n),null)),[i,a,t]}function Z3(t,e){t.action=e}function ty(t){var e=an(),n=It;if(n!==null)return w_(e,n,t);an(),e=e.memoizedState,n=an();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Yl(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=He.updateQueue,e===null&&(e=jd(),He.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function __(){return an().memoizedState}function ff(t,e,n,i){var s=Jn();He.flags|=t,s.memoizedState=Yl(1|e,{destroy:void 0},n,i===void 0?null:i)}function Hd(t,e,n,i){var s=an();i=i===void 0?null:i;var a=s.memoizedState.inst;It!==null&&i!==null&&Lm(i,It.memoizedState.deps)?s.memoizedState=Yl(e,a,n,i):(He.flags|=t,s.memoizedState=Yl(1|e,a,n,i))}function ny(t,e){ff(8390656,8,t,e)}function jm(t,e){Hd(2048,8,t,e)}function J3(t){He.flags|=4;var e=He.updateQueue;if(e===null)e=jd(),He.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function A_(t){var e=an().memoizedState;return J3({ref:e,nextImpl:t}),function(){if(mt&2)throw Error(ae(440));return e.impl.apply(void 0,arguments)}}function T_(t,e){return Hd(4,2,t,e)}function C_(t,e){return Hd(4,4,t,e)}function S_(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function b_(t,e,n){n=n!=null?n.concat([t]):null,Hd(4,4,S_.bind(null,e,t),n)}function zm(){}function v_(t,e){var n=an();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Lm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function I_(t,e){var n=an();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Lm(e,i[1]))return i[0];if(i=t(),bo){la(!0);try{t()}finally{la(!1)}}return n.memoizedState=[i,e],i}function Hm(t,e,n){return n===void 0||Is&1073741824&&!(tt&261930)?t.memoizedState=e:(t.memoizedState=n,t=pA(),He.lanes|=t,La|=t,n)}function N_(t,e,n,i){return zi(n,e)?n:Gl.current!==null?(t=Hm(t,n,i),zi(t,e)||(pn=!0),t):!(Is&42)||Is&1073741824&&!(tt&261930)?(pn=!0,t.memoizedState=n):(t=pA(),He.lanes|=t,La|=t,e)}function R_(t,e,n,i,s){var a=pt.p;pt.p=a!==0&&8>a?a:8;var u=De.T,d={};De.T=d,Ym(t,!1,e,n);try{var p=s(),y=De.S;if(y!==null&&y(d,p),p!==null&&typeof p=="object"&&typeof p.then=="function"){var w=X3(p,i);gu(t,e,w,ji(t))}else gu(t,e,i,ji(t))}catch(T){gu(t,e,{then:function(){},status:"rejected",reason:T},ji())}finally{pt.p=a,u!==null&&d.types!==null&&(u.types=d.types),De.T=u}}function $3(){}function rg(t,e,n,i){if(t.tag!==5)throw Error(ae(476));var s=M_(t).queue;R_(t,s,e,po,n===null?$3:function(){return D_(t),n(i)})}function M_(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:po,baseState:po,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:po},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function D_(t){var e=M_(t);e.next===null&&(e=t.alternate.memoizedState),gu(t,e.next.queue,{},ji())}function Gm(){return jn(Uu)}function O_(){return an().memoizedState}function L_(){return an().memoizedState}function ev(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ji();t=ya(n);var i=Ea(e,t,n);i!==null&&(yi(i,e,n),hu(i,e,n)),e={cache:Nm()},t.payload=e;return}e=e.return}}function tv(t,e,n){var i=ji();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Gd(t)?k_(e,n):(n=Sm(t,e,n,i),n!==null&&(yi(n,t,i),B_(n,e,i)))}function P_(t,e,n){var i=ji();gu(t,e,n,i)}function gu(t,e,n,i){var s={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gd(t))k_(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var u=e.lastRenderedState,d=a(u,n);if(s.hasEagerState=!0,s.eagerState=d,zi(d,u))return Ud(t,e,s,0),Mt===null&&Vd(),!1}catch{}finally{}if(n=Sm(t,e,s,i),n!==null)return yi(n,t,i),B_(n,e,i),!0}return!1}function Ym(t,e,n,i){if(i={lane:2,revertLane:ep(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Gd(t)){if(e)throw Error(ae(479))}else e=Sm(t,n,i,2),e!==null&&yi(e,t,2)}function Gd(t){var e=t.alternate;return t===He||e!==null&&e===He}function k_(t,e){Ol=Hf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B_(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Aw(t,n)}}var ku={readContext:jn,use:zd,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};ku.useEffectEvent=Jt;var V_={readContext:jn,use:zd,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:ny,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,ff(4194308,4,S_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ff(4194308,4,t,e)},useInsertionEffect:function(t,e){ff(4,2,t,e)},useMemo:function(t,e){var n=Jn();e=e===void 0?null:e;var i=t();if(bo){la(!0);try{t()}finally{la(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Jn();if(n!==void 0){var s=n(e);if(bo){la(!0);try{n(e)}finally{la(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=tv.bind(null,He,t),[i.memoizedState,t]},useRef:function(t){var e=Jn();return t={current:t},e.memoizedState=t},useState:function(t){t=ng(t);var e=t.queue,n=P_.bind(null,He,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:zm,useDeferredValue:function(t,e){var n=Jn();return Hm(n,t,e)},useTransition:function(){var t=ng(!1);return t=R_.bind(null,He,t.queue,!0,!1),Jn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=He,s=Jn();if(it){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Mt===null)throw Error(ae(349));tt&127||h_(i,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,ny(d_.bind(null,i,a,t),[t]),i.flags|=2048,Yl(9,{destroy:void 0},f_.bind(null,i,a,n,e),null),n},useId:function(){var t=Jn(),e=Mt.identifierPrefix;if(it){var n=Hr,i=zr;n=(i&~(1<<32-Fi(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Gf++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=W3++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Gm,useFormState:$2,useActionState:$2,useOptimistic:function(t){var e=Jn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Ym.bind(null,He,!0,n),n.dispatch=e,[t,e]},useMemoCache:Um,useCacheRefresh:function(){return Jn().memoizedState=ev.bind(null,He)},useEffectEvent:function(t){var e=Jn(),n={impl:t};return e.memoizedState=n,function(){if(mt&2)throw Error(ae(440));return n.impl.apply(void 0,arguments)}}},qm={readContext:jn,use:zd,useCallback:v_,useContext:jn,useEffect:jm,useImperativeHandle:b_,useInsertionEffect:T_,useLayoutEffect:C_,useMemo:I_,useReducer:hf,useRef:__,useState:function(){return hf(Ns)},useDebugValue:zm,useDeferredValue:function(t,e){var n=an();return N_(n,It.memoizedState,t,e)},useTransition:function(){var t=hf(Ns)[0],e=an().memoizedState;return[typeof t=="boolean"?t:oh(t),e]},useSyncExternalStore:u_,useId:O_,useHostTransitionStatus:Gm,useFormState:ey,useActionState:ey,useOptimistic:function(t,e){var n=an();return p_(n,It,t,e)},useMemoCache:Um,useCacheRefresh:L_};qm.useEffectEvent=A_;var U_={readContext:jn,use:zd,useCallback:v_,useContext:jn,useEffect:jm,useImperativeHandle:b_,useInsertionEffect:T_,useLayoutEffect:C_,useMemo:I_,useReducer:z0,useRef:__,useState:function(){return z0(Ns)},useDebugValue:zm,useDeferredValue:function(t,e){var n=an();return It===null?Hm(n,t,e):N_(n,It.memoizedState,t,e)},useTransition:function(){var t=z0(Ns)[0],e=an().memoizedState;return[typeof t=="boolean"?t:oh(t),e]},useSyncExternalStore:u_,useId:O_,useHostTransitionStatus:Gm,useFormState:ty,useActionState:ty,useOptimistic:function(t,e){var n=an();return It!==null?p_(n,It,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Um,useCacheRefresh:L_};U_.useEffectEvent=A_;function H0(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:zt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sg={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ji(),s=ya(i);s.payload=e,n!=null&&(s.callback=n),e=Ea(t,s,i),e!==null&&(yi(e,t,i),hu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ji(),s=ya(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ea(t,s,i),e!==null&&(yi(e,t,i),hu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ji(),i=ya(n);i.tag=2,e!=null&&(i.callback=e),e=Ea(t,i,n),e!==null&&(yi(e,t,n),hu(e,t,n))}};function iy(t,e,n,i,s,a,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,u):e.prototype&&e.prototype.isPureReactComponent?!Mu(n,i)||!Mu(s,a):!0}function ry(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&sg.enqueueReplaceState(e,e.state,null)}function vo(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=zt({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}function F_(t){kf(t)}function j_(t){console.error(t)}function z_(t){kf(t)}function Yf(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function sy(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function ag(t,e,n){return n=ya(n),n.tag=3,n.payload={element:null},n.callback=function(){Yf(t,e)},n}function H_(t){return t=ya(t),t.tag=3,t}function G_(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var a=i.value;t.payload=function(){return s(a)},t.callback=function(){sy(e,n,i)}}var u=n.stateNode;u!==null&&typeof u.componentDidCatch=="function"&&(t.callback=function(){sy(e,n,i),typeof s!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var d=i.stack;this.componentDidCatch(i.value,{componentStack:d!==null?d:""})})}function nv(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&fc(e,n,s,!0),n=Hi.current,n!==null){switch(n.tag){case 31:case 13:return or===null?Kf():n.alternate===null&&en===0&&(en=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Ff?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),e1(t,i,s)),!1;case 22:return n.flags|=65536,i===Ff?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),e1(t,i,s)),!1}throw Error(ae(435,n.tag))}return e1(t,i,s),Kf(),!1}if(it)return e=Hi.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==X1&&(t=Error(ae(422),{cause:i}),Ou(rr(t,n)))):(i!==X1&&(e=Error(ae(423),{cause:i}),Ou(rr(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=rr(i,n),s=ag(t.stateNode,i,s),j0(t,s),en!==4&&(en=2)),!1;var a=Error(ae(520),{cause:i});if(a=rr(a,n),yu===null?yu=[a]:yu.push(a),en!==4&&(en=2),e===null)return!0;i=rr(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=ag(n.stateNode,i,t),j0(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(xa===null||!xa.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,s=H_(s),G_(s,t,n,i),j0(n,s),!1}n=n.return}while(n!==null);return!1}var Xm=Error(ae(461)),pn=!1;function kn(t,e,n,i){e.child=t===null?r_(e,null,n,i):So(e,t.child,n,i)}function ay(t,e,n,i,s){n=n.render;var a=e.ref;if("ref"in i){var u={};for(var d in i)d!=="ref"&&(u[d]=i[d])}else u=i;return Co(e),i=Pm(t,e,n,u,a,s),d=km(),t!==null&&!pn?(Bm(t,e,s),Rs(t,e,s)):(it&&d&&vm(e),e.flags|=1,kn(t,e,i,s),e.child)}function oy(t,e,n,i,s){if(t===null){var a=n.type;return typeof a=="function"&&!bm(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,Y_(t,e,a,i,s)):(t=cf(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!Wm(t,s)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:Mu,n(u,i)&&t.ref===e.ref)return Rs(t,e,s)}return e.flags|=1,t=Cs(a,i),t.ref=e.ref,t.return=e,e.child=t}function Y_(t,e,n,i,s){if(t!==null){var a=t.memoizedProps;if(Mu(a,i)&&t.ref===e.ref)if(pn=!1,e.pendingProps=i=a,Wm(t,s))t.flags&131072&&(pn=!0);else return e.lanes=t.lanes,Rs(t,e,s)}return og(t,e,n,i,s)}function q_(t,e,n,i){var s=i.children,a=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(a=a!==null?a.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;i=s&~a}else i=0,e.child=null;return ly(t,e,a,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&uf(e,a!==null?a.cachePool:null),a!==null?K2(e,a):eg(),o_(e);else return i=e.lanes=536870912,ly(t,e,a!==null?a.baseLanes|n:n,n,i)}else a!==null?(uf(e,a.cachePool),K2(e,a),na(),e.memoizedState=null):(t!==null&&uf(e,null),eg(),na());return kn(t,e,s,n),e.child}function Zc(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function ly(t,e,n,i,s){var a=Rm();return a=a===null?null:{parent:gn._currentValue,pool:a},e.memoizedState={baseLanes:n,cachePool:a},t!==null&&uf(e,null),eg(),o_(e),t!==null&&fc(t,e,i,!0),e.childLanes=s,null}function df(t,e){return e=qf({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function cy(t,e,n){return So(e,t.child,null,n),t=df(e,e.pendingProps),t.flags|=2,Oi(e),e.memoizedState=null,t}function iv(t,e,n){var i=e.pendingProps,s=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(it){if(i.mode==="hidden")return t=df(e,i),e.lanes=536870912,Zc(null,t);if(tg(e),(t=Ft)?(t=VA(t,sr),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:zr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},n=Zw(t),n.return=e,e.child=n,Un=e,Ft=null)):t=null,t===null)throw Da(e);return e.lanes=536870912,null}return df(e,i)}var a=t.memoizedState;if(a!==null){var u=a.dehydrated;if(tg(e),s)if(e.flags&256)e.flags&=-257,e=cy(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(ae(558));else if(pn||fc(t,e,n,!1),s=(n&t.childLanes)!==0,pn||s){if(i=Mt,i!==null&&(u=Tw(i,n),u!==0&&u!==a.retryLane))throw a.retryLane=u,Bo(t,u),yi(i,t,u),Xm;Kf(),e=cy(t,e,n)}else t=a.treeContext,Ft=lr(u.nextSibling),Un=e,it=!0,pa=null,sr=!1,t!==null&&$w(e,t),e=df(e,i),e.flags|=4096;return e}return t=Cs(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function gf(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(ae(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function og(t,e,n,i,s){return Co(e),n=Pm(t,e,n,i,void 0,s),i=km(),t!==null&&!pn?(Bm(t,e,s),Rs(t,e,s)):(it&&i&&vm(e),e.flags|=1,kn(t,e,n,s),e.child)}function uy(t,e,n,i,s,a){return Co(e),e.updateQueue=null,n=c_(e,i,n,s),l_(t),i=km(),t!==null&&!pn?(Bm(t,e,a),Rs(t,e,a)):(it&&i&&vm(e),e.flags|=1,kn(t,e,n,a),e.child)}function hy(t,e,n,i,s){if(Co(e),e.stateNode===null){var a=Al,u=n.contextType;typeof u=="object"&&u!==null&&(a=jn(u)),a=new n(i,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=sg,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=i,a.state=e.memoizedState,a.refs={},Dm(e),u=n.contextType,a.context=typeof u=="object"&&u!==null?jn(u):Al,a.state=e.memoizedState,u=n.getDerivedStateFromProps,typeof u=="function"&&(H0(e,n,u,i),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(u=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),u!==a.state&&sg.enqueueReplaceState(a,a.state,null),du(e,i,a,s),fu(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){a=e.stateNode;var d=e.memoizedProps,p=vo(n,d);a.props=p;var y=a.context,w=n.contextType;u=Al,typeof w=="object"&&w!==null&&(u=jn(w));var T=n.getDerivedStateFromProps;w=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function",d=e.pendingProps!==d,w||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d||y!==u)&&ry(e,a,i,u),$s=!1;var S=e.memoizedState;a.state=S,du(e,i,a,s),fu(),y=e.memoizedState,d||S!==y||$s?(typeof T=="function"&&(H0(e,n,T,i),y=e.memoizedState),(p=$s||iy(e,n,p,i,S,y,u))?(w||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=y),a.props=i,a.state=y,a.context=u,i=p):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,J1(t,e),u=e.memoizedProps,w=vo(n,u),a.props=w,T=e.pendingProps,S=a.context,y=n.contextType,p=Al,typeof y=="object"&&y!==null&&(p=jn(y)),d=n.getDerivedStateFromProps,(y=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==T||S!==p)&&ry(e,a,i,p),$s=!1,S=e.memoizedState,a.state=S,du(e,i,a,s),fu();var I=e.memoizedState;u!==T||S!==I||$s||t!==null&&t.dependencies!==null&&Uf(t.dependencies)?(typeof d=="function"&&(H0(e,n,d,i),I=e.memoizedState),(w=$s||iy(e,n,w,i,S,I,p)||t!==null&&t.dependencies!==null&&Uf(t.dependencies))?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,I,p),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,I,p)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=I),a.props=i,a.state=I,a.context=p,i=w):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),i=!1)}return a=i,gf(t,e),i=(e.flags&128)!==0,a||i?(a=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&i?(e.child=So(e,t.child,null,s),e.child=So(e,null,n,s)):kn(t,e,n,s),e.memoizedState=a.state,t=e.child):t=Rs(t,e,s),t}function fy(t,e,n,i){return To(),e.flags|=256,kn(t,e,n,i),e.child}var G0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Y0(t){return{baseLanes:t,cachePool:t_()}}function q0(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=ki),t}function X_(t,e,n){var i=e.pendingProps,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(sn.current&2)!==0),u&&(s=!0,e.flags&=-129),u=(e.flags&32)!==0,e.flags&=-33,t===null){if(it){if(s?ta(e):na(),(t=Ft)?(t=VA(t,sr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ma!==null?{id:zr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},n=Zw(t),n.return=e,e.child=n,Un=e,Ft=null)):t=null,t===null)throw Da(e);return _g(t)?e.lanes=32:e.lanes=536870912,null}var d=i.children;return i=i.fallback,s?(na(),s=e.mode,d=qf({mode:"hidden",children:d},s),i=yo(i,s,n,null),d.return=e,i.return=e,d.sibling=i,e.child=d,i=e.child,i.memoizedState=Y0(n),i.childLanes=q0(t,u,n),e.memoizedState=G0,Zc(null,i)):(ta(e),lg(e,d))}var p=t.memoizedState;if(p!==null&&(d=p.dehydrated,d!==null)){if(a)e.flags&256?(ta(e),e.flags&=-257,e=X0(t,e,n)):e.memoizedState!==null?(na(),e.child=t.child,e.flags|=128,e=null):(na(),d=i.fallback,s=e.mode,i=qf({mode:"visible",children:i.children},s),d=yo(d,s,n,null),d.flags|=2,i.return=e,d.return=e,i.sibling=d,e.child=i,So(e,t.child,null,n),i=e.child,i.memoizedState=Y0(n),i.childLanes=q0(t,u,n),e.memoizedState=G0,e=Zc(null,i));else if(ta(e),_g(d)){if(u=d.nextSibling&&d.nextSibling.dataset,u)var y=u.dgst;u=y,i=Error(ae(419)),i.stack="",i.digest=u,Ou({value:i,source:null,stack:null}),e=X0(t,e,n)}else if(pn||fc(t,e,n,!1),u=(n&t.childLanes)!==0,pn||u){if(u=Mt,u!==null&&(i=Tw(u,n),i!==0&&i!==p.retryLane))throw p.retryLane=i,Bo(t,i),yi(u,t,i),Xm;wg(d)||Kf(),e=X0(t,e,n)}else wg(d)?(e.flags|=192,e.child=t.child,e=null):(t=p.treeContext,Ft=lr(d.nextSibling),Un=e,it=!0,pa=null,sr=!1,t!==null&&$w(e,t),e=lg(e,i.children),e.flags|=4096);return e}return s?(na(),d=i.fallback,s=e.mode,p=t.child,y=p.sibling,i=Cs(p,{mode:"hidden",children:i.children}),i.subtreeFlags=p.subtreeFlags&65011712,y!==null?d=Cs(y,d):(d=yo(d,s,n,null),d.flags|=2),d.return=e,i.return=e,i.sibling=d,e.child=i,Zc(null,i),i=e.child,d=t.child.memoizedState,d===null?d=Y0(n):(s=d.cachePool,s!==null?(p=gn._currentValue,s=s.parent!==p?{parent:p,pool:p}:s):s=t_(),d={baseLanes:d.baseLanes|n,cachePool:s}),i.memoizedState=d,i.childLanes=q0(t,u,n),e.memoizedState=G0,Zc(t.child,i)):(ta(e),n=t.child,t=n.sibling,n=Cs(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(u=e.deletions,u===null?(e.deletions=[t],e.flags|=16):u.push(t)),e.child=n,e.memoizedState=null,n)}function lg(t,e){return e=qf({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function qf(t,e){return t=Li(22,t,null,e),t.lanes=0,t}function X0(t,e,n){return So(e,t.child,null,n),t=lg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Q1(t.return,e,n)}function W0(t,e,n,i,s,a){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s,treeForkCount:a}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=s,u.treeForkCount=a)}function W_(t,e,n){var i=e.pendingProps,s=i.revealOrder,a=i.tail;i=i.children;var u=sn.current,d=(u&2)!==0;if(d?(u=u&1|2,e.flags|=128):u&=1,Pt(sn,u),kn(t,e,i,n),i=it?Du:0,!d&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dy(t,n,e);else if(t.tag===19)dy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),W0(e,!1,s,n,a,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}W0(e,!0,n,null,a,i);break;case"together":W0(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Rs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),La|=e.lanes,!(n&e.childLanes))if(t!==null){if(fc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Cs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Wm(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Uf(t)))}function rv(t,e,n){switch(e.tag){case 3:Df(e,e.stateNode.containerInfo),ea(e,gn,t.memoizedState.cache),To();break;case 27:case 5:k1(e);break;case 4:Df(e,e.stateNode.containerInfo);break;case 10:ea(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,tg(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(ta(e),e.flags|=128,null):n&e.child.childLanes?X_(t,e,n):(ta(e),t=Rs(t,e,n),t!==null?t.sibling:null);ta(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(fc(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return W_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pt(sn,sn.current),i)break;return null;case 22:return e.lanes=0,q_(t,e,n,e.pendingProps);case 24:ea(e,gn,t.memoizedState.cache)}return Rs(t,e,n)}function Q_(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)pn=!0;else{if(!Wm(t,n)&&!(e.flags&128))return pn=!1,rv(t,e,n);pn=!!(t.flags&131072)}else pn=!1,it&&e.flags&1048576&&Jw(e,Du,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=co(e.elementType),e.type=t,typeof t=="function")bm(t)?(i=vo(t,i),e.tag=1,e=hy(null,e,t,i,n)):(e.tag=0,e=og(null,e,t,i,n));else{if(t!=null){var s=t.$$typeof;if(s===fm){e.tag=11,e=ay(null,e,t,i,n);break e}else if(s===dm){e.tag=14,e=oy(null,e,t,i,n);break e}}throw e=L1(t)||t,Error(ae(306,e,""))}}return e;case 0:return og(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=vo(i,e.pendingProps),hy(t,e,i,s,n);case 3:e:{if(Df(e,e.stateNode.containerInfo),t===null)throw Error(ae(387));i=e.pendingProps;var a=e.memoizedState;s=a.element,J1(t,e),du(e,i,null,n);var u=e.memoizedState;if(i=u.cache,ea(e,gn,i),i!==a.cache&&K1(e,[gn],n,!0),fu(),i=u.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:u.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=fy(t,e,i,n);break e}else if(i!==s){s=rr(Error(ae(424)),e),Ou(s),e=fy(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ft=lr(t.firstChild),Un=e,it=!0,pa=null,sr=!0,n=r_(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(To(),i===s){e=Rs(t,e,n);break e}kn(t,e,i,n)}e=e.child}return e;case 26:return gf(t,e),t===null?(n=Oy(e.type,null,e.pendingProps,null))?e.memoizedState=n:it||(n=e.type,t=e.pendingProps,i=ed(ma.current).createElement(n),i[Vn]=e,i[Ei]=t,zn(i,n,t),Mn(i),e.stateNode=i):e.memoizedState=Oy(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return k1(e),t===null&&it&&(i=e.stateNode=UA(e.type,e.pendingProps,ma.current),Un=e,sr=!0,s=Ft,Ga(e.type)?(Ag=s,Ft=lr(i.firstChild)):Ft=s),kn(t,e,e.pendingProps.children,n),gf(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&it&&((s=i=Ft)&&(i=Lv(i,e.type,e.pendingProps,sr),i!==null?(e.stateNode=i,Un=e,Ft=lr(i.firstChild),sr=!1,s=!0):s=!1),s||Da(e)),k1(e),s=e.type,a=e.pendingProps,u=t!==null?t.memoizedProps:null,i=a.children,Eg(s,a)?i=null:u!==null&&Eg(s,u)&&(e.flags|=32),e.memoizedState!==null&&(s=Pm(t,e,Q3,null,null,n),Uu._currentValue=s),gf(t,e),kn(t,e,i,n),e.child;case 6:return t===null&&it&&((t=n=Ft)&&(n=Pv(n,e.pendingProps,sr),n!==null?(e.stateNode=n,Un=e,Ft=null,t=!0):t=!1),t||Da(e)),null;case 13:return X_(t,e,n);case 4:return Df(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=So(e,null,i,n):kn(t,e,i,n),e.child;case 11:return ay(t,e,e.type,e.pendingProps,n);case 7:return kn(t,e,e.pendingProps,n),e.child;case 8:return kn(t,e,e.pendingProps.children,n),e.child;case 12:return kn(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,ea(e,e.type,i.value),kn(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,Co(e),s=jn(s),i=i(s),e.flags|=1,kn(t,e,i,n),e.child;case 14:return oy(t,e,e.type,e.pendingProps,n);case 15:return Y_(t,e,e.type,e.pendingProps,n);case 19:return W_(t,e,n);case 31:return iv(t,e,n);case 22:return q_(t,e,n,e.pendingProps);case 24:return Co(e),i=jn(gn),t===null?(s=Rm(),s===null&&(s=Mt,a=Nm(),s.pooledCache=a,a.refCount++,a!==null&&(s.pooledCacheLanes|=n),s=a),e.memoizedState={parent:i,cache:s},Dm(e),ea(e,gn,s)):(t.lanes&n&&(J1(t,e),du(e,null,null,n),fu()),s=t.memoizedState,a=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),ea(e,gn,i)):(i=a.cache,ea(e,gn,i),i!==s.cache&&K1(e,[gn],n,!0))),kn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(ae(156,e.tag))}function fs(t){t.flags|=4}function Q0(t,e,n,i,s){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(xA())t.flags|=8192;else throw xo=Ff,Mm}else t.flags&=-16777217}function gy(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!zA(e))if(xA())t.flags|=8192;else throw xo=Ff,Mm}function Hh(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?ww():536870912,t.lanes|=e,ql|=e)}function Yc(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function sv(t,e,n){var i=e.pendingProps;switch(Im(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return Vt(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Ss(gn),Fl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(il(e)?fs(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,F0())),Vt(e),null;case 26:var s=e.type,a=e.memoizedState;return t===null?(fs(e),a!==null?(Vt(e),gy(e,a)):(Vt(e),Q0(e,s,null,i,n))):a?a!==t.memoizedState?(fs(e),Vt(e),gy(e,a)):(Vt(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&fs(e),Vt(e),Q0(e,s,t,i,n)),null;case 27:if(Of(e),n=ma.current,s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&fs(e);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return Vt(e),null}t=Yr.current,il(e)?H2(e):(t=UA(s,i,n),e.stateNode=t,fs(e))}return Vt(e),null;case 5:if(Of(e),s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&fs(e);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return Vt(e),null}if(a=Yr.current,il(e))H2(e);else{var u=ed(ma.current);switch(a){case 1:a=u.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=u.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=u.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=u.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":a=u.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof i.is=="string"?u.createElement("select",{is:i.is}):u.createElement("select"),i.multiple?a.multiple=!0:i.size&&(a.size=i.size);break;default:a=typeof i.is=="string"?u.createElement(s,{is:i.is}):u.createElement(s)}}a[Vn]=e,a[Ei]=i;e:for(u=e.child;u!==null;){if(u.tag===5||u.tag===6)a.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}e.stateNode=a;e:switch(zn(a,s,i),s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&fs(e)}}return Vt(e),Q0(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&fs(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(t=ma.current,il(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=Un,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[Vn]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||PA(t.nodeValue,n)),t||Da(e,!0)}else t=ed(t).createTextNode(i),t[Vn]=e,e.stateNode=t}return Vt(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=il(e),n!==null){if(t===null){if(!i)throw Error(ae(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(557));t[Vn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),t=!1}else n=F0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Oi(e),e):(Oi(e),null);if(e.flags&128)throw Error(ae(558))}return Vt(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=il(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Vn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),s=!1}else s=F0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(Oi(e),e):(Oi(e),null)}return Oi(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==s&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Hh(e,e.updateQueue),Vt(e),null);case 4:return Fl(),t===null&&tp(e.stateNode.containerInfo),Vt(e),null;case 10:return Ss(e.type),Vt(e),null;case 19:if(Dn(sn),i=e.memoizedState,i===null)return Vt(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)Yc(i,!1);else{if(en!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=zf(t),a!==null){for(e.flags|=128,Yc(i,!1),t=a.updateQueue,e.updateQueue=t,Hh(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Kw(n,t),n=n.sibling;return Pt(sn,sn.current&1|2),it&&ps(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Vi()>Wf&&(e.flags|=128,s=!0,Yc(i,!1),e.lanes=4194304)}else{if(!s)if(t=zf(a),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,Hh(e,t),Yc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!it)return Vt(e),null}else 2*Vi()-i.renderingStartTime>Wf&&n!==536870912&&(e.flags|=128,s=!0,Yc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Vi(),t.sibling=null,n=sn.current,Pt(sn,s?n&1|2:n&1),it&&ps(e,i.treeForkCount),t):(Vt(e),null);case 22:case 23:return Oi(e),Om(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),n=e.updateQueue,n!==null&&Hh(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Dn(Eo),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ss(gn),Vt(e),null;case 25:return null;case 30:return null}throw Error(ae(156,e.tag))}function av(t,e){switch(Im(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ss(gn),Fl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Of(e),null;case 31:if(e.memoizedState!==null){if(Oi(e),e.alternate===null)throw Error(ae(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Oi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dn(sn),null;case 4:return Fl(),null;case 10:return Ss(e.type),null;case 22:case 23:return Oi(e),Om(),t!==null&&Dn(Eo),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ss(gn),null;case 25:return null;default:return null}}function K_(t,e){switch(Im(e),e.tag){case 3:Ss(gn),Fl();break;case 26:case 27:case 5:Of(e);break;case 4:Fl();break;case 31:e.memoizedState!==null&&Oi(e);break;case 13:Oi(e);break;case 19:Dn(sn);break;case 10:Ss(e.type);break;case 22:case 23:Oi(e),Om(),t!==null&&Dn(Eo);break;case 24:Ss(gn)}}function lh(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var a=n.create,u=n.inst;i=a(),u.destroy=i}n=n.next}while(n!==s)}}catch(d){Ct(e,e.return,d)}}function Oa(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var a=s.next;i=a;do{if((i.tag&t)===t){var u=i.inst,d=u.destroy;if(d!==void 0){u.destroy=void 0,s=e;var p=n,y=d;try{y()}catch(w){Ct(s,p,w)}}}i=i.next}while(i!==a)}}catch(w){Ct(e,e.return,w)}}function Z_(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{a_(e,n)}catch(i){Ct(t,t.return,i)}}}function J_(t,e,n){n.props=vo(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ct(t,e,i)}}function mu(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){Ct(t,e,s)}}function Gr(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Ct(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Ct(t,e,s)}else n.current=null}function $_(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Ct(t,t.return,s)}}function K0(t,e,n){try{var i=t.stateNode;Iv(i,t.type,n,e),i[Ei]=e}catch(s){Ct(t,t.return,s)}}function eA(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ga(t.type)||t.tag===4}function Z0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ga(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xs));else if(i!==4&&(i===27&&Ga(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(cg(t,e,n),t=t.sibling;t!==null;)cg(t,e,n),t=t.sibling}function Xf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Ga(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Xf(t,e,n),t=t.sibling;t!==null;)Xf(t,e,n),t=t.sibling}function tA(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);zn(e,i,n),e[Vn]=t,e[Ei]=n}catch(a){Ct(t,t.return,a)}}var ys=!1,dn=!1,J0=!1,my=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function ov(t,e){if(t=t.containerInfo,pg=rd,t=zw(t),Tm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var u=0,d=-1,p=-1,y=0,w=0,T=t,S=null;t:for(;;){for(var I;T!==n||s!==0&&T.nodeType!==3||(d=u+s),T!==a||i!==0&&T.nodeType!==3||(p=u+i),T.nodeType===3&&(u+=T.nodeValue.length),(I=T.firstChild)!==null;)S=T,T=I;for(;;){if(T===t)break t;if(S===n&&++y===s&&(d=u),S===a&&++w===i&&(p=u),(I=T.nextSibling)!==null)break;T=S,S=T.parentNode}T=I}n=d===-1||p===-1?null:{start:d,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(yg={focusedElem:t,selectionRange:n},rd=!1,Rn=e;Rn!==null;)if(e=Rn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Rn=t;else for(;Rn!==null;){switch(e=Rn,a=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)s=t[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,s=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var q=vo(n.type,s);t=i.getSnapshotBeforeUpdate(q,a),i.__reactInternalSnapshotBeforeUpdate=t}catch(X){Ct(n,n.return,X)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)xg(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":xg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(ae(163))}if(t=e.sibling,t!==null){t.return=e.return,Rn=t;break}Rn=e.return}}function nA(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:gs(t,n),i&4&&lh(5,n);break;case 1:if(gs(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(u){Ct(n,n.return,u)}else{var s=vo(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(u){Ct(n,n.return,u)}}i&64&&Z_(n),i&512&&mu(n,n.return);break;case 3:if(gs(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{a_(t,e)}catch(u){Ct(n,n.return,u)}}break;case 27:e===null&&i&4&&tA(n);case 26:case 5:gs(t,n),e===null&&i&4&&$_(n),i&512&&mu(n,n.return);break;case 12:gs(t,n);break;case 31:gs(t,n),i&4&&sA(t,n);break;case 13:gs(t,n),i&4&&aA(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=pv.bind(null,n),kv(t,n))));break;case 22:if(i=n.memoizedState!==null||ys,!i){e=e!==null&&e.memoizedState!==null||dn,s=ys;var a=dn;ys=i,(dn=e)&&!a?ms(t,n,(n.subtreeFlags&8772)!==0):gs(t,n),ys=s,dn=a}break;case 30:break;default:gs(t,n)}}function iA(t){var e=t.alternate;e!==null&&(t.alternate=null,iA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ym(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Gt=null,di=!1;function ds(t,e,n){for(n=n.child;n!==null;)rA(t,e,n),n=n.sibling}function rA(t,e,n){if(Ui&&typeof Ui.onCommitFiberUnmount=="function")try{Ui.onCommitFiberUnmount(th,n)}catch{}switch(n.tag){case 26:dn||Gr(n,e),ds(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:dn||Gr(n,e);var i=Gt,s=di;Ga(n.type)&&(Gt=n.stateNode,di=!1),ds(t,e,n),xu(n.stateNode),Gt=i,di=s;break;case 5:dn||Gr(n,e);case 6:if(i=Gt,s=di,Gt=null,ds(t,e,n),Gt=i,di=s,Gt!==null)if(di)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(n.stateNode)}catch(a){Ct(n,e,a)}else try{Gt.removeChild(n.stateNode)}catch(a){Ct(n,e,a)}break;case 18:Gt!==null&&(di?(t=Gt,Iy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Kl(t)):Iy(Gt,n.stateNode));break;case 4:i=Gt,s=di,Gt=n.stateNode.containerInfo,di=!0,ds(t,e,n),Gt=i,di=s;break;case 0:case 11:case 14:case 15:Oa(2,n,e),dn||Oa(4,n,e),ds(t,e,n);break;case 1:dn||(Gr(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&J_(n,e,i)),ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:dn=(i=dn)||n.memoizedState!==null,ds(t,e,n),dn=i;break;default:ds(t,e,n)}}function sA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Kl(t)}catch(n){Ct(e,e.return,n)}}}function aA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kl(t)}catch(n){Ct(e,e.return,n)}}function lv(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new my),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new my),e;default:throw Error(ae(435,t.tag))}}function Gh(t,e){var n=lv(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var s=yv.bind(null,t,i);i.then(s,s)}})}function hi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],a=t,u=e,d=u;e:for(;d!==null;){switch(d.tag){case 27:if(Ga(d.type)){Gt=d.stateNode,di=!1;break e}break;case 5:Gt=d.stateNode,di=!1;break e;case 3:case 4:Gt=d.stateNode.containerInfo,di=!0;break e}d=d.return}if(Gt===null)throw Error(ae(160));rA(a,u,s),Gt=null,di=!1,a=s.alternate,a!==null&&(a.return=null),s.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)oA(e,t),e=e.sibling}var yr=null;function oA(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hi(e,t),fi(t),i&4&&(Oa(3,t,t.return),lh(3,t),Oa(5,t,t.return));break;case 1:hi(e,t),fi(t),i&512&&(dn||n===null||Gr(n,n.return)),i&64&&ys&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=yr;if(hi(e,t),fi(t),i&512&&(dn||n===null||Gr(n,n.return)),i&4){var a=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":a=s.getElementsByTagName("title")[0],(!a||a[rh]||a[Vn]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=s.createElement(i),s.head.insertBefore(a,s.querySelector("head > title"))),zn(a,i,n),a[Vn]=t,Mn(a),i=a;break e;case"link":var u=Py("link","href",s).get(i+(n.href||""));if(u){for(var d=0;d<u.length;d++)if(a=u[d],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){u.splice(d,1);break t}}a=s.createElement(i),zn(a,i,n),s.head.appendChild(a);break;case"meta":if(u=Py("meta","content",s).get(i+(n.content||""))){for(d=0;d<u.length;d++)if(a=u[d],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){u.splice(d,1);break t}}a=s.createElement(i),zn(a,i,n),s.head.appendChild(a);break;default:throw Error(ae(468,i))}a[Vn]=t,Mn(a),i=a}t.stateNode=i}else ky(s,t.type,t.stateNode);else t.stateNode=Ly(s,i,t.memoizedProps);else a!==i?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,i===null?ky(s,t.type,t.stateNode):Ly(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&K0(t,t.memoizedProps,n.memoizedProps)}break;case 27:hi(e,t),fi(t),i&512&&(dn||n===null||Gr(n,n.return)),n!==null&&i&4&&K0(t,t.memoizedProps,n.memoizedProps);break;case 5:if(hi(e,t),fi(t),i&512&&(dn||n===null||Gr(n,n.return)),t.flags&32){s=t.stateNode;try{zl(s,"")}catch(q){Ct(t,t.return,q)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,K0(t,s,n!==null?n.memoizedProps:s)),i&1024&&(J0=!0);break;case 6:if(hi(e,t),fi(t),i&4){if(t.stateNode===null)throw Error(ae(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(q){Ct(t,t.return,q)}}break;case 3:if(yf=null,s=yr,yr=td(e.containerInfo),hi(e,t),yr=s,fi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Kl(e.containerInfo)}catch(q){Ct(t,t.return,q)}J0&&(J0=!1,lA(t));break;case 4:i=yr,yr=td(t.stateNode.containerInfo),hi(e,t),fi(t),yr=i;break;case 12:hi(e,t),fi(t);break;case 31:hi(e,t),fi(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Gh(t,i)));break;case 13:hi(e,t),fi(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Yd=Vi()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Gh(t,i)));break;case 22:s=t.memoizedState!==null;var p=n!==null&&n.memoizedState!==null,y=ys,w=dn;if(ys=y||s,dn=w||p,hi(e,t),dn=w,ys=y,fi(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||p||ys||dn||uo(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){p=n=e;try{if(a=p.stateNode,s)u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{d=p.stateNode;var T=p.memoizedProps.style,S=T!=null&&T.hasOwnProperty("display")?T.display:null;d.style.display=S==null||typeof S=="boolean"?"":(""+S).trim()}}catch(q){Ct(p,p.return,q)}}}else if(e.tag===6){if(n===null){p=e;try{p.stateNode.nodeValue=s?"":p.memoizedProps}catch(q){Ct(p,p.return,q)}}}else if(e.tag===18){if(n===null){p=e;try{var I=p.stateNode;s?Ny(I,!0):Ny(p.stateNode,!1)}catch(q){Ct(p,p.return,q)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Gh(t,n))));break;case 19:hi(e,t),fi(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Gh(t,i)));break;case 30:break;case 21:break;default:hi(e,t),fi(t)}}function fi(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(eA(i)){n=i;break}i=i.return}if(n==null)throw Error(ae(160));switch(n.tag){case 27:var s=n.stateNode,a=Z0(t);Xf(t,a,s);break;case 5:var u=n.stateNode;n.flags&32&&(zl(u,""),n.flags&=-33);var d=Z0(t);Xf(t,d,u);break;case 3:case 4:var p=n.stateNode.containerInfo,y=Z0(t);cg(t,y,p);break;default:throw Error(ae(161))}}catch(w){Ct(t,t.return,w)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lA(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;lA(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function gs(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)nA(t,e.alternate,e),e=e.sibling}function uo(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Oa(4,e,e.return),uo(e);break;case 1:Gr(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&J_(e,e.return,n),uo(e);break;case 27:xu(e.stateNode);case 26:case 5:Gr(e,e.return),uo(e);break;case 22:e.memoizedState===null&&uo(e);break;case 30:uo(e);break;default:uo(e)}t=t.sibling}}function ms(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,a=e,u=a.flags;switch(a.tag){case 0:case 11:case 15:ms(s,a,n),lh(4,a);break;case 1:if(ms(s,a,n),i=a,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(y){Ct(i,i.return,y)}if(i=a,s=i.updateQueue,s!==null){var d=i.stateNode;try{var p=s.shared.hiddenCallbacks;if(p!==null)for(s.shared.hiddenCallbacks=null,s=0;s<p.length;s++)s_(p[s],d)}catch(y){Ct(i,i.return,y)}}n&&u&64&&Z_(a),mu(a,a.return);break;case 27:tA(a);case 26:case 5:ms(s,a,n),n&&i===null&&u&4&&$_(a),mu(a,a.return);break;case 12:ms(s,a,n);break;case 31:ms(s,a,n),n&&u&4&&sA(s,a);break;case 13:ms(s,a,n),n&&u&4&&aA(s,a);break;case 22:a.memoizedState===null&&ms(s,a,n),mu(a,a.return);break;case 30:break;default:ms(s,a,n)}e=e.sibling}}function Qm(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ah(n))}function Km(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ah(t))}function pr(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cA(t,e,n,i),e=e.sibling}function cA(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:pr(t,e,n,i),s&2048&&lh(9,e);break;case 1:pr(t,e,n,i);break;case 3:pr(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ah(t)));break;case 12:if(s&2048){pr(t,e,n,i),t=e.stateNode;try{var a=e.memoizedProps,u=a.id,d=a.onPostCommit;typeof d=="function"&&d(u,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(p){Ct(e,e.return,p)}}else pr(t,e,n,i);break;case 31:pr(t,e,n,i);break;case 13:pr(t,e,n,i);break;case 23:break;case 22:a=e.stateNode,u=e.alternate,e.memoizedState!==null?a._visibility&2?pr(t,e,n,i):pu(t,e):a._visibility&2?pr(t,e,n,i):(a._visibility|=2,ol(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),s&2048&&Qm(u,e);break;case 24:pr(t,e,n,i),s&2048&&Km(e.alternate,e);break;default:pr(t,e,n,i)}}function ol(t,e,n,i,s){for(s=s&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var a=t,u=e,d=n,p=i,y=u.flags;switch(u.tag){case 0:case 11:case 15:ol(a,u,d,p,s),lh(8,u);break;case 23:break;case 22:var w=u.stateNode;u.memoizedState!==null?w._visibility&2?ol(a,u,d,p,s):pu(a,u):(w._visibility|=2,ol(a,u,d,p,s)),s&&y&2048&&Qm(u.alternate,u);break;case 24:ol(a,u,d,p,s),s&&y&2048&&Km(u.alternate,u);break;default:ol(a,u,d,p,s)}e=e.sibling}}function pu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:pu(n,i),s&2048&&Qm(i.alternate,i);break;case 24:pu(n,i),s&2048&&Km(i.alternate,i);break;default:pu(n,i)}e=e.sibling}}var Jc=8192;function rl(t,e,n){if(t.subtreeFlags&Jc)for(t=t.child;t!==null;)uA(t,e,n),t=t.sibling}function uA(t,e,n){switch(t.tag){case 26:rl(t,e,n),t.flags&Jc&&t.memoizedState!==null&&Wv(n,yr,t.memoizedState,t.memoizedProps);break;case 5:rl(t,e,n);break;case 3:case 4:var i=yr;yr=td(t.stateNode.containerInfo),rl(t,e,n),yr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Jc,Jc=16777216,rl(t,e,n),Jc=i):rl(t,e,n));break;default:rl(t,e,n)}}function hA(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function qc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Rn=i,dA(i,t)}hA(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fA(t),t=t.sibling}function fA(t){switch(t.tag){case 0:case 11:case 15:qc(t),t.flags&2048&&Oa(9,t,t.return);break;case 3:qc(t);break;case 12:qc(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,mf(t)):qc(t);break;default:qc(t)}}function mf(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Rn=i,dA(i,t)}hA(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Oa(8,e,e.return),mf(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,mf(e));break;default:mf(e)}t=t.sibling}}function dA(t,e){for(;Rn!==null;){var n=Rn;switch(n.tag){case 0:case 11:case 15:Oa(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ah(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Rn=i;else e:for(n=t;Rn!==null;){i=Rn;var s=i.sibling,a=i.return;if(iA(i),i===n){Rn=null;break e}if(s!==null){s.return=a,Rn=s;break e}Rn=a}}}var cv={getCacheForType:function(t){var e=jn(gn),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return jn(gn).controller.signal}},uv=typeof WeakMap=="function"?WeakMap:Map,mt=0,Mt=null,Qe=null,tt=0,At=0,Di=null,ua=!1,gc=!1,Zm=!1,Ms=0,en=0,La=0,wo=0,Jm=0,ki=0,ql=0,yu=null,gi=null,ug=!1,Yd=0,gA=0,Wf=1/0,Qf=null,xa=null,_n=0,wa=null,Xl=null,bs=0,hg=0,fg=null,mA=null,Eu=0,dg=null;function ji(){return mt&2&&tt!==0?tt&-tt:De.T!==null?ep():Cw()}function pA(){if(ki===0)if(!(tt&536870912)||it){var t=kh;kh<<=1,!(kh&3932160)&&(kh=262144),ki=t}else ki=536870912;return t=Hi.current,t!==null&&(t.flags|=32),ki}function yi(t,e,n){(t===Mt&&(At===2||At===9)||t.cancelPendingCommit!==null)&&(Wl(t,0),ha(t,tt,ki,!1)),ih(t,n),(!(mt&2)||t!==Mt)&&(t===Mt&&(!(mt&2)&&(wo|=n),en===4&&ha(t,tt,ki,!1)),ts(t))}function yA(t,e,n){if(mt&6)throw Error(ae(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||nh(t,e),s=i?dv(t,e):$0(t,e,!0),a=i;do{if(s===0){gc&&!i&&ha(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!hv(n)){s=$0(t,e,!1),a=!1;continue}if(s===2){if(a=e,t.errorRecoveryDisabledLanes&a)var u=0;else u=t.pendingLanes&-536870913,u=u!==0?u:u&536870912?536870912:0;if(u!==0){e=u;e:{var d=t;s=yu;var p=d.current.memoizedState.isDehydrated;if(p&&(Wl(d,u).flags|=256),u=$0(d,u,!1),u!==2){if(Zm&&!p){d.errorRecoveryDisabledLanes|=a,wo|=a,s=4;break e}a=gi,gi=s,a!==null&&(gi===null?gi=a:gi.push.apply(gi,a))}s=u}if(a=!1,s!==2)continue}}if(s===1){Wl(t,0),ha(t,e,0,!0);break}e:{switch(i=t,a=s,a){case 0:case 1:throw Error(ae(345));case 4:if((e&4194048)!==e)break;case 6:ha(i,e,ki,!ua);break e;case 2:gi=null;break;case 3:case 5:break;default:throw Error(ae(329))}if((e&62914560)===e&&(s=Yd+300-Vi(),10<s)){if(ha(i,e,ki,!ua),Ld(i,0,!0)!==0)break e;bs=e,i.timeoutHandle=BA(py.bind(null,i,n,gi,Qf,ug,e,ki,wo,ql,ua,a,"Throttled",-0,0),s);break e}py(i,n,gi,Qf,ug,e,ki,wo,ql,ua,a,null,-0,0)}}break}while(!0);ts(t)}function py(t,e,n,i,s,a,u,d,p,y,w,T,S,I){if(t.timeoutHandle=-1,T=e.subtreeFlags,T&8192||(T&16785408)===16785408){T={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xs},uA(e,a,T);var q=(a&62914560)===a?Yd-Vi():(a&4194048)===a?gA-Vi():0;if(q=Qv(T,q),q!==null){bs=a,t.cancelPendingCommit=q(Ey.bind(null,t,e,a,n,i,s,u,d,p,w,T,null,S,I)),ha(t,a,u,!y);return}}Ey(t,e,a,n,i,s,u,d,p)}function hv(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!zi(a(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ha(t,e,n,i){e&=~Jm,e&=~wo,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var a=31-Fi(s),u=1<<a;i[a]=-1,s&=~u}n!==0&&_w(t,n,e)}function qd(){return mt&6?!0:(ch(0),!1)}function $m(){if(Qe!==null){if(At===0)var t=Qe.return;else t=Qe,ws=Vo=null,Vm(t),Dl=null,Lu=0,t=Qe;for(;t!==null;)K_(t.alternate,t),t=t.return;Qe=null}}function Wl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Mv(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),bs=0,$m(),Mt=t,Qe=n=Cs(t.current,null),tt=e,At=0,Di=null,ua=!1,gc=nh(t,e),Zm=!1,ql=ki=Jm=wo=La=en=0,gi=yu=null,ug=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-Fi(i),a=1<<s;e|=t[s],i&=~a}return Ms=e,Vd(),n}function EA(t,e){He=null,De.H=ku,e===dc||e===Fd?(e=W2(),At=3):e===Mm?(e=W2(),At=4):At=e===Xm?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Di=e,Qe===null&&(en=1,Yf(t,rr(e,t.current)))}function xA(){var t=Hi.current;return t===null?!0:(tt&4194048)===tt?or===null:(tt&62914560)===tt||tt&536870912?t===or:!1}function wA(){var t=De.H;return De.H=ku,t===null?ku:t}function _A(){var t=De.A;return De.A=cv,t}function Kf(){en=4,ua||(tt&4194048)!==tt&&Hi.current!==null||(gc=!0),!(La&134217727)&&!(wo&134217727)||Mt===null||ha(Mt,tt,ki,!1)}function $0(t,e,n){var i=mt;mt|=2;var s=wA(),a=_A();(Mt!==t||tt!==e)&&(Qf=null,Wl(t,e)),e=!1;var u=en;e:do try{if(At!==0&&Qe!==null){var d=Qe,p=Di;switch(At){case 8:$m(),u=6;break e;case 3:case 2:case 9:case 6:Hi.current===null&&(e=!0);var y=At;if(At=0,Di=null,Sl(t,d,p,y),n&&gc){u=0;break e}break;default:y=At,At=0,Di=null,Sl(t,d,p,y)}}fv(),u=en;break}catch(w){EA(t,w)}while(!0);return e&&t.shellSuspendCounter++,ws=Vo=null,mt=i,De.H=s,De.A=a,Qe===null&&(Mt=null,tt=0,Vd()),u}function fv(){for(;Qe!==null;)AA(Qe)}function dv(t,e){var n=mt;mt|=2;var i=wA(),s=_A();Mt!==t||tt!==e?(Qf=null,Wf=Vi()+500,Wl(t,e)):gc=nh(t,e);e:do try{if(At!==0&&Qe!==null){e=Qe;var a=Di;t:switch(At){case 1:At=0,Di=null,Sl(t,e,a,1);break;case 2:case 9:if(X2(a)){At=0,Di=null,yy(e);break}e=function(){At!==2&&At!==9||Mt!==t||(At=7),ts(t)},a.then(e,e);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:X2(a)?(At=0,Di=null,yy(e)):(At=0,Di=null,Sl(t,e,a,7));break;case 5:var u=null;switch(Qe.tag){case 26:u=Qe.memoizedState;case 5:case 27:var d=Qe;if(u?zA(u):d.stateNode.complete){At=0,Di=null;var p=d.sibling;if(p!==null)Qe=p;else{var y=d.return;y!==null?(Qe=y,Xd(y)):Qe=null}break t}}At=0,Di=null,Sl(t,e,a,5);break;case 6:At=0,Di=null,Sl(t,e,a,6);break;case 8:$m(),en=6;break e;default:throw Error(ae(462))}}gv();break}catch(w){EA(t,w)}while(!0);return ws=Vo=null,De.H=i,De.A=s,mt=n,Qe!==null?0:(Mt=null,tt=0,Vd(),en)}function gv(){for(;Qe!==null&&!Bb();)AA(Qe)}function AA(t){var e=Q_(t.alternate,t,Ms);t.memoizedProps=t.pendingProps,e===null?Xd(t):Qe=e}function yy(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=uy(n,e,e.pendingProps,e.type,void 0,tt);break;case 11:e=uy(n,e,e.pendingProps,e.type.render,e.ref,tt);break;case 5:Vm(e);default:K_(n,e),e=Qe=Kw(e,Ms),e=Q_(n,e,Ms)}t.memoizedProps=t.pendingProps,e===null?Xd(t):Qe=e}function Sl(t,e,n,i){ws=Vo=null,Vm(e),Dl=null,Lu=0;var s=e.return;try{if(nv(t,s,e,n,tt)){en=1,Yf(t,rr(n,t.current)),Qe=null;return}}catch(a){if(s!==null)throw Qe=s,a;en=1,Yf(t,rr(n,t.current)),Qe=null;return}e.flags&32768?(it||i===1?t=!0:gc||tt&536870912?t=!1:(ua=t=!0,(i===2||i===9||i===3||i===6)&&(i=Hi.current,i!==null&&i.tag===13&&(i.flags|=16384))),TA(e,t)):Xd(e)}function Xd(t){var e=t;do{if(e.flags&32768){TA(e,ua);return}t=e.return;var n=sv(e.alternate,e,Ms);if(n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);en===0&&(en=5)}function TA(t,e){do{var n=av(t.alternate,t);if(n!==null){n.flags&=32767,Qe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Qe=t;return}Qe=t=n}while(t!==null);en=6,Qe=null}function Ey(t,e,n,i,s,a,u,d,p){t.cancelPendingCommit=null;do Wd();while(_n!==0);if(mt&6)throw Error(ae(327));if(e!==null){if(e===t.current)throw Error(ae(177));if(a=e.lanes|e.childLanes,a|=Cm,Xb(t,n,a,u,d,p),t===Mt&&(Qe=Mt=null,tt=0),Xl=e,wa=t,bs=n,hg=a,fg=s,mA=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Ev(Lf,function(){return IA(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=De.T,De.T=null,s=pt.p,pt.p=2,u=mt,mt|=4;try{ov(t,e,n)}finally{mt=u,pt.p=s,De.T=i}}_n=1,CA(),SA(),bA()}}function CA(){if(_n===1){_n=0;var t=wa,e=Xl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=De.T,De.T=null;var i=pt.p;pt.p=2;var s=mt;mt|=4;try{oA(e,t);var a=yg,u=zw(t.containerInfo),d=a.focusedElem,p=a.selectionRange;if(u!==d&&d&&d.ownerDocument&&jw(d.ownerDocument.documentElement,d)){if(p!==null&&Tm(d)){var y=p.start,w=p.end;if(w===void 0&&(w=y),"selectionStart"in d)d.selectionStart=y,d.selectionEnd=Math.min(w,d.value.length);else{var T=d.ownerDocument||document,S=T&&T.defaultView||window;if(S.getSelection){var I=S.getSelection(),q=d.textContent.length,X=Math.min(p.start,q),$=p.end===void 0?X:Math.min(p.end,q);!I.extend&&X>$&&(u=$,$=X,X=u);var V=F2(d,X),L=F2(d,$);if(V&&L&&(I.rangeCount!==1||I.anchorNode!==V.node||I.anchorOffset!==V.offset||I.focusNode!==L.node||I.focusOffset!==L.offset)){var k=T.createRange();k.setStart(V.node,V.offset),I.removeAllRanges(),X>$?(I.addRange(k),I.extend(L.node,L.offset)):(k.setEnd(L.node,L.offset),I.addRange(k))}}}}for(T=[],I=d;I=I.parentNode;)I.nodeType===1&&T.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<T.length;d++){var H=T[d];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}rd=!!pg,yg=pg=null}finally{mt=s,pt.p=i,De.T=n}}t.current=e,_n=2}}function SA(){if(_n===2){_n=0;var t=wa,e=Xl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=De.T,De.T=null;var i=pt.p;pt.p=2;var s=mt;mt|=4;try{nA(t,e.alternate,e)}finally{mt=s,pt.p=i,De.T=n}}_n=3}}function bA(){if(_n===4||_n===3){_n=0,Vb();var t=wa,e=Xl,n=bs,i=mA;e.subtreeFlags&10256||e.flags&10256?_n=5:(_n=0,Xl=wa=null,vA(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(xa=null),pm(n),e=e.stateNode,Ui&&typeof Ui.onCommitFiberRoot=="function")try{Ui.onCommitFiberRoot(th,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=De.T,s=pt.p,pt.p=2,De.T=null;try{for(var a=t.onRecoverableError,u=0;u<i.length;u++){var d=i[u];a(d.value,{componentStack:d.stack})}}finally{De.T=e,pt.p=s}}bs&3&&Wd(),ts(t),s=t.pendingLanes,n&261930&&s&42?t===dg?Eu++:(Eu=0,dg=t):Eu=0,ch(0)}}function vA(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ah(e)))}function Wd(){return CA(),SA(),bA(),IA()}function IA(){if(_n!==5)return!1;var t=wa,e=hg;hg=0;var n=pm(bs),i=De.T,s=pt.p;try{pt.p=32>n?32:n,De.T=null,n=fg,fg=null;var a=wa,u=bs;if(_n=0,Xl=wa=null,bs=0,mt&6)throw Error(ae(331));var d=mt;if(mt|=4,fA(a.current),cA(a,a.current,u,n),mt=d,ch(0,!1),Ui&&typeof Ui.onPostCommitFiberRoot=="function")try{Ui.onPostCommitFiberRoot(th,a)}catch{}return!0}finally{pt.p=s,De.T=i,vA(t,e)}}function xy(t,e,n){e=rr(n,e),e=ag(t.stateNode,e,2),t=Ea(t,e,2),t!==null&&(ih(t,2),ts(t))}function Ct(t,e,n){if(t.tag===3)xy(t,t,n);else for(;e!==null;){if(e.tag===3){xy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(xa===null||!xa.has(i))){t=rr(n,t),n=H_(2),i=Ea(e,n,2),i!==null&&(G_(n,i,e,t),ih(i,2),ts(i));break}}e=e.return}}function e1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new uv;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(Zm=!0,s.add(n),t=mv.bind(null,t,e,n),e.then(t,t))}function mv(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Mt===t&&(tt&n)===n&&(en===4||en===3&&(tt&62914560)===tt&&300>Vi()-Yd?!(mt&2)&&Wl(t,0):Jm|=n,ql===tt&&(ql=0)),ts(t)}function NA(t,e){e===0&&(e=ww()),t=Bo(t,e),t!==null&&(ih(t,e),ts(t))}function pv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),NA(t,n)}function yv(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(ae(314))}i!==null&&i.delete(e),NA(t,n)}function Ev(t,e){return gm(t,e)}var Zf=null,ll=null,gg=!1,Jf=!1,t1=!1,fa=0;function ts(t){t!==ll&&t.next===null&&(ll===null?Zf=ll=t:ll=ll.next=t),Jf=!0,gg||(gg=!0,wv())}function ch(t,e){if(!t1&&Jf){t1=!0;do for(var n=!1,i=Zf;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var a=0;else{var u=i.suspendedLanes,d=i.pingedLanes;a=(1<<31-Fi(42|t)+1)-1,a&=s&~(u&~d),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,wy(i,a))}else a=tt,a=Ld(i,i===Mt?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||nh(i,a)||(n=!0,wy(i,a));i=i.next}while(n);t1=!1}}function xv(){RA()}function RA(){Jf=gg=!1;var t=0;fa!==0&&Rv()&&(t=fa);for(var e=Vi(),n=null,i=Zf;i!==null;){var s=i.next,a=MA(i,e);a===0?(i.next=null,n===null?Zf=s:n.next=s,s===null&&(ll=n)):(n=i,(t!==0||a&3)&&(Jf=!0)),i=s}_n!==0&&_n!==5||ch(t),fa!==0&&(fa=0)}function MA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var u=31-Fi(a),d=1<<u,p=s[u];p===-1?(!(d&n)||d&i)&&(s[u]=qb(d,e)):p<=e&&(t.expiredLanes|=d),a&=~d}if(e=Mt,n=tt,n=Ld(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(At===2||At===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&N0(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||nh(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&N0(i),pm(n)){case 2:case 8:n=Ew;break;case 32:n=Lf;break;case 268435456:n=xw;break;default:n=Lf}return i=DA.bind(null,t),n=gm(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&N0(i),t.callbackPriority=2,t.callbackNode=null,2}function DA(t,e){if(_n!==0&&_n!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Wd()&&t.callbackNode!==n)return null;var i=tt;return i=Ld(t,t===Mt?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(yA(t,i,e),MA(t,Vi()),t.callbackNode!=null&&t.callbackNode===n?DA.bind(null,t):null)}function wy(t,e){if(Wd())return null;yA(t,e,!0)}function wv(){Dv(function(){mt&6?gm(yw,xv):RA()})}function ep(){if(fa===0){var t=Hl;t===0&&(t=Ph,Ph<<=1,!(Ph&261888)&&(Ph=256)),fa=t}return fa}function _y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:af(""+t)}function Ay(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function _v(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var a=_y((s[Ei]||null).action),u=i.submitter;u&&(e=(e=u[Ei]||null)?_y(e.formAction):u.getAttribute("formAction"),e!==null&&(a=e,u=null));var d=new Pd("action","action",null,i,s);t.push({event:d,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(fa!==0){var p=u?Ay(s,u):new FormData(s);rg(n,{pending:!0,data:p,method:s.method,action:a},null,p)}}else typeof a=="function"&&(d.preventDefault(),p=u?Ay(s,u):new FormData(s),rg(n,{pending:!0,data:p,method:s.method,action:a},a,p))},currentTarget:s}]})}}for(var n1=0;n1<q1.length;n1++){var i1=q1[n1],Av=i1.toLowerCase(),Tv=i1[0].toUpperCase()+i1.slice(1);Cr(Av,"on"+Tv)}Cr(Gw,"onAnimationEnd");Cr(Yw,"onAnimationIteration");Cr(qw,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(U3,"onTransitionRun");Cr(F3,"onTransitionStart");Cr(j3,"onTransitionCancel");Cr(Xw,"onTransitionEnd");jl("onMouseEnter",["mouseout","mouseover"]);jl("onMouseLeave",["mouseout","mouseover"]);jl("onPointerEnter",["pointerout","pointerover"]);jl("onPointerLeave",["pointerout","pointerover"]);Lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bu));function OA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var u=i.length-1;0<=u;u--){var d=i[u],p=d.instance,y=d.currentTarget;if(d=d.listener,p!==a&&s.isPropagationStopped())break e;a=d,s.currentTarget=y;try{a(s)}catch(w){kf(w)}s.currentTarget=null,a=p}else for(u=0;u<i.length;u++){if(d=i[u],p=d.instance,y=d.currentTarget,d=d.listener,p!==a&&s.isPropagationStopped())break e;a=d,s.currentTarget=y;try{a(s)}catch(w){kf(w)}s.currentTarget=null,a=p}}}}function We(t,e){var n=e[V1];n===void 0&&(n=e[V1]=new Set);var i=t+"__bubble";n.has(i)||(LA(e,t,2,!1),n.add(i))}function r1(t,e,n){var i=0;e&&(i|=4),LA(n,t,i,e)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function tp(t){if(!t[Yh]){t[Yh]=!0,Sw.forEach(function(n){n!=="selectionchange"&&(Cv.has(n)||r1(n,!1,t),r1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yh]||(e[Yh]=!0,r1("selectionchange",!1,e))}}function LA(t,e,n,i){switch(XA(e)){case 2:var s=Jv;break;case 8:s=$v;break;default:s=sp}n=s.bind(null,e,n,t),s=void 0,!H1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function s1(t,e,n,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var d=i.stateNode.containerInfo;if(d===s)break;if(u===4)for(u=i.return;u!==null;){var p=u.tag;if((p===3||p===4)&&u.stateNode.containerInfo===s)return;u=u.return}for(;d!==null;){if(u=pl(d),u===null)return;if(p=u.tag,p===5||p===6||p===26||p===27){i=a=u;continue e}d=d.parentNode}}i=i.return}Ow(function(){var y=a,w=xm(n),T=[];e:{var S=Ww.get(t);if(S!==void 0){var I=Pd,q=t;switch(t){case"keypress":if(lf(n)===0)break e;case"keydown":case"keyup":I=y3;break;case"focusin":q="focus",I=L0;break;case"focusout":q="blur",I=L0;break;case"beforeblur":case"afterblur":I=L0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=R2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=s3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=w3;break;case Gw:case Yw:case qw:I=l3;break;case Xw:I=A3;break;case"scroll":case"scrollend":I=i3;break;case"wheel":I=C3;break;case"copy":case"cut":case"paste":I=u3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=D2;break;case"toggle":case"beforetoggle":I=b3}var X=(e&4)!==0,$=!X&&(t==="scroll"||t==="scrollend"),V=X?S!==null?S+"Capture":null:S;X=[];for(var L=y,k;L!==null;){var H=L;if(k=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||k===null||V===null||(H=Nu(L,V),H!=null&&X.push(Vu(L,H,k))),$)break;L=L.return}0<X.length&&(S=new I(S,q,null,n,w),T.push({event:S,listeners:X}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",S&&n!==z1&&(q=n.relatedTarget||n.fromElement)&&(pl(q)||q[uc]))break e;if((I||S)&&(S=w.window===w?w:(S=w.ownerDocument)?S.defaultView||S.parentWindow:window,I?(q=n.relatedTarget||n.toElement,I=y,q=q?pl(q):null,q!==null&&($=eh(q),X=q.tag,q!==$||X!==5&&X!==27&&X!==6)&&(q=null)):(I=null,q=y),I!==q)){if(X=R2,H="onMouseLeave",V="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(X=D2,H="onPointerLeave",V="onPointerEnter",L="pointer"),$=I==null?S:Kc(I),k=q==null?S:Kc(q),S=new X(H,L+"leave",I,n,w),S.target=$,S.relatedTarget=k,H=null,pl(w)===y&&(X=new X(V,L+"enter",q,n,w),X.target=k,X.relatedTarget=$,H=X),$=H,I&&q)t:{for(X=Sv,V=I,L=q,k=0,H=V;H;H=X(H))k++;H=0;for(var oe=L;oe;oe=X(oe))H++;for(;0<k-H;)V=X(V),k--;for(;0<H-k;)L=X(L),H--;for(;k--;){if(V===L||L!==null&&V===L.alternate){X=V;break t}V=X(V),L=X(L)}X=null}else X=null;I!==null&&Ty(T,S,I,X,!1),q!==null&&$!==null&&Ty(T,$,q,X,!0)}}e:{if(S=y?Kc(y):window,I=S.nodeName&&S.nodeName.toLowerCase(),I==="select"||I==="input"&&S.type==="file")var re=k2;else if(P2(S))if(Uw)re=k3;else{re=L3;var R=O3}else I=S.nodeName,!I||I.toLowerCase()!=="input"||S.type!=="checkbox"&&S.type!=="radio"?y&&Em(y.elementType)&&(re=k2):re=P3;if(re&&(re=re(t,y))){Vw(T,re,n,w);break e}R&&R(t,S,y),t==="focusout"&&y&&S.type==="number"&&y.memoizedProps.value!=null&&j1(S,"number",S.value)}switch(R=y?Kc(y):window,t){case"focusin":(P2(R)||R.contentEditable==="true")&&(xl=R,G1=y,cu=null);break;case"focusout":cu=G1=xl=null;break;case"mousedown":Y1=!0;break;case"contextmenu":case"mouseup":case"dragend":Y1=!1,j2(T,n,w);break;case"selectionchange":if(V3)break;case"keydown":case"keyup":j2(T,n,w)}var D;if(Am)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else El?kw(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Pw&&n.locale!=="ko"&&(El||M!=="onCompositionStart"?M==="onCompositionEnd"&&El&&(D=Lw()):(ca=w,wm="value"in ca?ca.value:ca.textContent,El=!0)),R=$f(y,M),0<R.length&&(M=new M2(M,t,null,n,w),T.push({event:M,listeners:R}),D?M.data=D:(D=Bw(n),D!==null&&(M.data=D)))),(D=I3?N3(t,n):R3(t,n))&&(M=$f(y,"onBeforeInput"),0<M.length&&(R=new M2("onBeforeInput","beforeinput",null,n,w),T.push({event:R,listeners:M}),R.data=D)),_v(T,t,y,n,w)}OA(T,e)})}function Vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $f(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||a===null||(s=Nu(t,n),s!=null&&i.unshift(Vu(t,s,a)),s=Nu(t,e),s!=null&&i.push(Vu(t,s,a))),t.tag===3)return i;t=t.return}return[]}function Sv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ty(t,e,n,i,s){for(var a=e._reactName,u=[];n!==null&&n!==i;){var d=n,p=d.alternate,y=d.stateNode;if(d=d.tag,p!==null&&p===i)break;d!==5&&d!==26&&d!==27||y===null||(p=y,s?(y=Nu(n,a),y!=null&&u.unshift(Vu(n,y,p))):s||(y=Nu(n,a),y!=null&&u.push(Vu(n,y,p)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var bv=/\r\n?/g,vv=/\u0000|\uFFFD/g;function Cy(t){return(typeof t=="string"?t:""+t).replace(bv,`
`).replace(vv,"")}function PA(t,e){return e=Cy(e),Cy(t)===e}function vt(t,e,n,i,s,a){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||zl(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&zl(t,""+i);break;case"className":Vh(t,"class",i);break;case"tabIndex":Vh(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Vh(t,n,i);break;case"style":Dw(t,i,a);break;case"data":if(e!=="object"){Vh(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=af(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&vt(t,e,"name",s.name,s,null),vt(t,e,"formEncType",s.formEncType,s,null),vt(t,e,"formMethod",s.formMethod,s,null),vt(t,e,"formTarget",s.formTarget,s,null)):(vt(t,e,"encType",s.encType,s,null),vt(t,e,"method",s.method,s,null),vt(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=af(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=xs);break;case"onScroll":i!=null&&We("scroll",t);break;case"onScrollEnd":i!=null&&We("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(ae(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(ae(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=af(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":We("beforetoggle",t),We("toggle",t),sf(t,"popover",i);break;case"xlinkActuate":hs(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":hs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":hs(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":hs(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":hs(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":hs(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":hs(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":hs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":hs(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":sf(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=t3.get(n)||n,sf(t,n,i))}}function mg(t,e,n,i,s,a){switch(n){case"style":Dw(t,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(ae(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(ae(60));t.innerHTML=n}}break;case"children":typeof i=="string"?zl(t,i):(typeof i=="number"||typeof i=="bigint")&&zl(t,""+i);break;case"onScroll":i!=null&&We("scroll",t);break;case"onScrollEnd":i!=null&&We("scrollend",t);break;case"onClick":i!=null&&(t.onclick=xs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bw.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),a=t[Ei]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,s),typeof i=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):sf(t,n,i)}}}function zn(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",t),We("load",t);var i=!1,s=!1,a;for(a in n)if(n.hasOwnProperty(a)){var u=n[a];if(u!=null)switch(a){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ae(137,e));default:vt(t,e,a,u,n,null)}}s&&vt(t,e,"srcSet",n.srcSet,n,null),i&&vt(t,e,"src",n.src,n,null);return;case"input":We("invalid",t);var d=a=u=s=null,p=null,y=null;for(i in n)if(n.hasOwnProperty(i)){var w=n[i];if(w!=null)switch(i){case"name":s=w;break;case"type":u=w;break;case"checked":p=w;break;case"defaultChecked":y=w;break;case"value":a=w;break;case"defaultValue":d=w;break;case"children":case"dangerouslySetInnerHTML":if(w!=null)throw Error(ae(137,e));break;default:vt(t,e,i,w,n,null)}}Nw(t,a,d,p,y,u,s,!1);return;case"select":We("invalid",t),i=u=a=null;for(s in n)if(n.hasOwnProperty(s)&&(d=n[s],d!=null))switch(s){case"value":a=d;break;case"defaultValue":u=d;break;case"multiple":i=d;default:vt(t,e,s,d,n,null)}e=a,n=u,t.multiple=!!i,e!=null?Nl(t,!!i,e,!1):n!=null&&Nl(t,!!i,n,!0);return;case"textarea":We("invalid",t),a=s=i=null;for(u in n)if(n.hasOwnProperty(u)&&(d=n[u],d!=null))switch(u){case"value":i=d;break;case"defaultValue":s=d;break;case"children":a=d;break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(ae(91));break;default:vt(t,e,u,d,n,null)}Mw(t,i,s,a);return;case"option":for(p in n)if(n.hasOwnProperty(p)&&(i=n[p],i!=null))switch(p){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:vt(t,e,p,i,n,null)}return;case"dialog":We("beforetoggle",t),We("toggle",t),We("cancel",t),We("close",t);break;case"iframe":case"object":We("load",t);break;case"video":case"audio":for(i=0;i<Bu.length;i++)We(Bu[i],t);break;case"image":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"embed":case"source":case"link":We("error",t),We("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(y in n)if(n.hasOwnProperty(y)&&(i=n[y],i!=null))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(ae(137,e));default:vt(t,e,y,i,n,null)}return;default:if(Em(e)){for(w in n)n.hasOwnProperty(w)&&(i=n[w],i!==void 0&&mg(t,e,w,i,n,void 0));return}}for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!=null&&vt(t,e,d,i,n,null))}function Iv(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,u=null,d=null,p=null,y=null,w=null;for(I in n){var T=n[I];if(n.hasOwnProperty(I)&&T!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":p=T;default:i.hasOwnProperty(I)||vt(t,e,I,null,i,T)}}for(var S in i){var I=i[S];if(T=n[S],i.hasOwnProperty(S)&&(I!=null||T!=null))switch(S){case"type":a=I;break;case"name":s=I;break;case"checked":y=I;break;case"defaultChecked":w=I;break;case"value":u=I;break;case"defaultValue":d=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(ae(137,e));break;default:I!==T&&vt(t,e,S,I,i,T)}}F1(t,u,d,p,y,w,a,s);return;case"select":I=u=d=S=null;for(a in n)if(p=n[a],n.hasOwnProperty(a)&&p!=null)switch(a){case"value":break;case"multiple":I=p;default:i.hasOwnProperty(a)||vt(t,e,a,null,i,p)}for(s in i)if(a=i[s],p=n[s],i.hasOwnProperty(s)&&(a!=null||p!=null))switch(s){case"value":S=a;break;case"defaultValue":d=a;break;case"multiple":u=a;default:a!==p&&vt(t,e,s,a,i,p)}e=d,n=u,i=I,S!=null?Nl(t,!!n,S,!1):!!i!=!!n&&(e!=null?Nl(t,!!n,e,!0):Nl(t,!!n,n?[]:"",!1));return;case"textarea":I=S=null;for(d in n)if(s=n[d],n.hasOwnProperty(d)&&s!=null&&!i.hasOwnProperty(d))switch(d){case"value":break;case"children":break;default:vt(t,e,d,null,i,s)}for(u in i)if(s=i[u],a=n[u],i.hasOwnProperty(u)&&(s!=null||a!=null))switch(u){case"value":S=s;break;case"defaultValue":I=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(ae(91));break;default:s!==a&&vt(t,e,u,s,i,a)}Rw(t,S,I);return;case"option":for(var q in n)if(S=n[q],n.hasOwnProperty(q)&&S!=null&&!i.hasOwnProperty(q))switch(q){case"selected":t.selected=!1;break;default:vt(t,e,q,null,i,S)}for(p in i)if(S=i[p],I=n[p],i.hasOwnProperty(p)&&S!==I&&(S!=null||I!=null))switch(p){case"selected":t.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:vt(t,e,p,S,i,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var X in n)S=n[X],n.hasOwnProperty(X)&&S!=null&&!i.hasOwnProperty(X)&&vt(t,e,X,null,i,S);for(y in i)if(S=i[y],I=n[y],i.hasOwnProperty(y)&&S!==I&&(S!=null||I!=null))switch(y){case"children":case"dangerouslySetInnerHTML":if(S!=null)throw Error(ae(137,e));break;default:vt(t,e,y,S,i,I)}return;default:if(Em(e)){for(var $ in n)S=n[$],n.hasOwnProperty($)&&S!==void 0&&!i.hasOwnProperty($)&&mg(t,e,$,void 0,i,S);for(w in i)S=i[w],I=n[w],!i.hasOwnProperty(w)||S===I||S===void 0&&I===void 0||mg(t,e,w,S,i,I);return}}for(var V in n)S=n[V],n.hasOwnProperty(V)&&S!=null&&!i.hasOwnProperty(V)&&vt(t,e,V,null,i,S);for(T in i)S=i[T],I=n[T],!i.hasOwnProperty(T)||S===I||S==null&&I==null||vt(t,e,T,S,i,I)}function Sy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Nv(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var s=n[i],a=s.transferSize,u=s.initiatorType,d=s.duration;if(a&&d&&Sy(u)){for(u=0,d=s.responseEnd,i+=1;i<n.length;i++){var p=n[i],y=p.startTime;if(y>d)break;var w=p.transferSize,T=p.initiatorType;w&&Sy(T)&&(p=p.responseEnd,u+=w*(p<d?1:(d-y)/(p-y)))}if(--i,e+=8*(a+u)/(s.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var pg=null,yg=null;function ed(t){return t.nodeType===9?t:t.ownerDocument}function by(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kA(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Eg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var a1=null;function Rv(){var t=window.event;return t&&t.type==="popstate"?t===a1?!1:(a1=t,!0):(a1=null,!1)}var BA=typeof setTimeout=="function"?setTimeout:void 0,Mv=typeof clearTimeout=="function"?clearTimeout:void 0,vy=typeof Promise=="function"?Promise:void 0,Dv=typeof queueMicrotask=="function"?queueMicrotask:typeof vy<"u"?function(t){return vy.resolve(null).then(t).catch(Ov)}:BA;function Ov(t){setTimeout(function(){throw t})}function Ga(t){return t==="head"}function Iy(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(s),Kl(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")xu(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,xu(n);for(var a=n.firstChild;a;){var u=a.nextSibling,d=a.nodeName;a[rh]||d==="SCRIPT"||d==="STYLE"||d==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=u}}else n==="body"&&xu(t.ownerDocument.body);n=s}while(n);Kl(e)}function Ny(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function xg(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":xg(n),ym(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Lv(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[rh])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=lr(t.nextSibling),t===null)break}return null}function Pv(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=lr(t.nextSibling),t===null))return null;return t}function VA(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=lr(t.nextSibling),t===null))return null;return t}function wg(t){return t.data==="$?"||t.data==="$~"}function _g(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function kv(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Ag=null;function Ry(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return lr(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function My(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function UA(t,e,n){switch(e=ed(n),t){case"html":if(t=e.documentElement,!t)throw Error(ae(452));return t;case"head":if(t=e.head,!t)throw Error(ae(453));return t;case"body":if(t=e.body,!t)throw Error(ae(454));return t;default:throw Error(ae(451))}}function xu(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ym(t)}var cr=new Map,Dy=new Set;function td(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ks=pt.d;pt.d={f:Bv,r:Vv,D:Uv,C:Fv,L:jv,m:zv,X:Gv,S:Hv,M:Yv};function Bv(){var t=ks.f(),e=qd();return t||e}function Vv(t){var e=hc(t);e!==null&&e.tag===5&&e.type==="form"?D_(e):ks.r(t)}var mc=typeof document>"u"?null:document;function FA(t,e,n){var i=mc;if(i&&typeof e=="string"&&e){var s=ir(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Dy.has(s)||(Dy.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),zn(e,"link",t),Mn(e),i.head.appendChild(e)))}}function Uv(t){ks.D(t),FA("dns-prefetch",t,null)}function Fv(t,e){ks.C(t,e),FA("preconnect",t,e)}function jv(t,e,n){ks.L(t,e,n);var i=mc;if(i&&t&&e){var s='link[rel="preload"][as="'+ir(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+ir(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+ir(n.imageSizes)+'"]')):s+='[href="'+ir(t)+'"]';var a=s;switch(e){case"style":a=Ql(t);break;case"script":a=pc(t)}cr.has(a)||(t=zt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),cr.set(a,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(uh(a))||e==="script"&&i.querySelector(hh(a))||(e=i.createElement("link"),zn(e,"link",t),Mn(e),i.head.appendChild(e)))}}function zv(t,e){ks.m(t,e);var n=mc;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+ir(i)+'"][href="'+ir(t)+'"]',a=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=pc(t)}if(!cr.has(a)&&(t=zt({rel:"modulepreload",href:t},e),cr.set(a,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(hh(a)))return}i=n.createElement("link"),zn(i,"link",t),Mn(i),n.head.appendChild(i)}}}function Hv(t,e,n){ks.S(t,e,n);var i=mc;if(i&&t){var s=Il(i).hoistableStyles,a=Ql(t);e=e||"default";var u=s.get(a);if(!u){var d={loading:0,preload:null};if(u=i.querySelector(uh(a)))d.loading=5;else{t=zt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=cr.get(a))&&np(t,n);var p=u=i.createElement("link");Mn(p),zn(p,"link",t),p._p=new Promise(function(y,w){p.onload=y,p.onerror=w}),p.addEventListener("load",function(){d.loading|=1}),p.addEventListener("error",function(){d.loading|=2}),d.loading|=4,pf(u,e,i)}u={type:"stylesheet",instance:u,count:1,state:d},s.set(a,u)}}}function Gv(t,e){ks.X(t,e);var n=mc;if(n&&t){var i=Il(n).hoistableScripts,s=pc(t),a=i.get(s);a||(a=n.querySelector(hh(s)),a||(t=zt({src:t,async:!0},e),(e=cr.get(s))&&ip(t,e),a=n.createElement("script"),Mn(a),zn(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(s,a))}}function Yv(t,e){ks.M(t,e);var n=mc;if(n&&t){var i=Il(n).hoistableScripts,s=pc(t),a=i.get(s);a||(a=n.querySelector(hh(s)),a||(t=zt({src:t,async:!0,type:"module"},e),(e=cr.get(s))&&ip(t,e),a=n.createElement("script"),Mn(a),zn(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(s,a))}}function Oy(t,e,n,i){var s=(s=ma.current)?td(s):null;if(!s)throw Error(ae(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ql(n.href),n=Il(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ql(n.href);var a=Il(s).hoistableStyles,u=a.get(t);if(u||(s=s.ownerDocument||s,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,u),(a=s.querySelector(uh(t)))&&!a._p&&(u.instance=a,u.state.loading=5),cr.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},cr.set(t,n),a||qv(s,t,n,u.state))),e&&i===null)throw Error(ae(528,""));return u}if(e&&i!==null)throw Error(ae(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=pc(n),n=Il(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(ae(444,t))}}function Ql(t){return'href="'+ir(t)+'"'}function uh(t){return'link[rel="stylesheet"]['+t+"]"}function jA(t){return zt({},t,{"data-precedence":t.precedence,precedence:null})}function qv(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),zn(e,"link",n),Mn(e),t.head.appendChild(e))}function pc(t){return'[src="'+ir(t)+'"]'}function hh(t){return"script[async]"+t}function Ly(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+ir(n.href)+'"]');if(i)return e.instance=i,Mn(i),i;var s=zt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Mn(i),zn(i,"style",s),pf(i,n.precedence,t),e.instance=i;case"stylesheet":s=Ql(n.href);var a=t.querySelector(uh(s));if(a)return e.state.loading|=4,e.instance=a,Mn(a),a;i=jA(n),(s=cr.get(s))&&np(i,s),a=(t.ownerDocument||t).createElement("link"),Mn(a);var u=a;return u._p=new Promise(function(d,p){u.onload=d,u.onerror=p}),zn(a,"link",i),e.state.loading|=4,pf(a,n.precedence,t),e.instance=a;case"script":return a=pc(n.src),(s=t.querySelector(hh(a)))?(e.instance=s,Mn(s),s):(i=n,(s=cr.get(a))&&(i=zt({},n),ip(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),Mn(s),zn(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(ae(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,pf(i,n.precedence,t));return e.instance}function pf(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,a=s,u=0;u<i.length;u++){var d=i[u];if(d.dataset.precedence===e)a=d;else if(a!==s)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function np(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ip(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var yf=null;function Py(t,e,n){if(yf===null){var i=new Map,s=yf=new Map;s.set(n,i)}else s=yf,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var a=n[s];if(!(a[rh]||a[Vn]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var u=a.getAttribute(e)||"";u=t+u;var d=i.get(u);d?d.push(a):i.set(u,[a])}}return i}function ky(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Xv(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function zA(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function Wv(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=Ql(i.href),a=e.querySelector(uh(s));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=nd.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=a,Mn(a);return}a=e.ownerDocument||e,i=jA(i),(s=cr.get(s))&&np(i,s),a=a.createElement("link"),Mn(a);var u=a;u._p=new Promise(function(d,p){u.onload=d,u.onerror=p}),zn(a,"link",i),n.instance=a}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=nd.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var o1=0;function Qv(t,e){return t.stylesheets&&t.count===0&&Ef(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Ef(t,t.stylesheets),t.unsuspend){var a=t.unsuspend;t.unsuspend=null,a()}},6e4+e);0<t.imgBytes&&o1===0&&(o1=62500*Nv());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ef(t,t.stylesheets),t.unsuspend)){var a=t.unsuspend;t.unsuspend=null,a()}},(t.imgBytes>o1?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(s)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ef(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var id=null;function Ef(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,id=new Map,e.forEach(Kv,t),id=null,nd.call(t))}function Kv(t,e){if(!(e.state.loading&4)){var n=id.get(t);if(n)var i=n.get(null);else{n=new Map,id.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var u=s[a];(u.nodeName==="LINK"||u.getAttribute("media")!=="not all")&&(n.set(u.dataset.precedence,u),i=u)}i&&n.set(null,i)}s=e.instance,u=s.getAttribute("data-precedence"),a=n.get(u)||i,a===i&&n.set(null,s),n.set(u,s),this.count++,i=nd.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),a?a.parentNode.insertBefore(s,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var Uu={$$typeof:Es,Provider:null,Consumer:null,_currentValue:po,_currentValue2:po,_threadCount:0};function Zv(t,e,n,i,s,a,u,d,p){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=R0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R0(0),this.hiddenUpdates=R0(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=u,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=p,this.incompleteTransitions=new Map}function HA(t,e,n,i,s,a,u,d,p,y,w,T){return t=new Zv(t,e,n,u,p,y,w,T,d),e=1,a===!0&&(e|=24),a=Li(3,null,null,e),t.current=a,a.stateNode=t,e=Nm(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:e},Dm(a),t}function GA(t){return t?(t=Al,t):Al}function YA(t,e,n,i,s,a){s=GA(s),i.context===null?i.context=s:i.pendingContext=s,i=ya(e),i.payload={element:n},a=a===void 0?null:a,a!==null&&(i.callback=a),n=Ea(t,i,e),n!==null&&(yi(n,t,e),hu(n,t,e))}function By(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rp(t,e){By(t,e),(t=t.alternate)&&By(t,e)}function qA(t){if(t.tag===13||t.tag===31){var e=Bo(t,67108864);e!==null&&yi(e,t,67108864),rp(t,67108864)}}function Vy(t){if(t.tag===13||t.tag===31){var e=ji();e=mm(e);var n=Bo(t,e);n!==null&&yi(n,t,e),rp(t,e)}}var rd=!0;function Jv(t,e,n,i){var s=De.T;De.T=null;var a=pt.p;try{pt.p=2,sp(t,e,n,i)}finally{pt.p=a,De.T=s}}function $v(t,e,n,i){var s=De.T;De.T=null;var a=pt.p;try{pt.p=8,sp(t,e,n,i)}finally{pt.p=a,De.T=s}}function sp(t,e,n,i){if(rd){var s=Tg(i);if(s===null)s1(t,e,i,sd,n),Uy(t,i);else if(tI(s,t,e,n,i))i.stopPropagation();else if(Uy(t,i),e&4&&-1<eI.indexOf(t)){for(;s!==null;){var a=hc(s);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var u=lo(a.pendingLanes);if(u!==0){var d=a;for(d.pendingLanes|=2,d.entangledLanes|=2;u;){var p=1<<31-Fi(u);d.entanglements[1]|=p,u&=~p}ts(a),!(mt&6)&&(Wf=Vi()+500,ch(0))}}break;case 31:case 13:d=Bo(a,2),d!==null&&yi(d,a,2),qd(),rp(a,2)}if(a=Tg(i),a===null&&s1(t,e,i,sd,n),a===s)break;s=a}s!==null&&i.stopPropagation()}else s1(t,e,i,null,n)}}function Tg(t){return t=xm(t),ap(t)}var sd=null;function ap(t){if(sd=null,t=pl(t),t!==null){var e=eh(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=fw(e),t!==null)return t;t=null}else if(n===31){if(t=dw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return sd=t,null}function XA(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ub()){case yw:return 2;case Ew:return 8;case Lf:case Fb:return 32;case xw:return 268435456;default:return 32}default:return 32}}var Cg=!1,_a=null,Aa=null,Ta=null,Fu=new Map,ju=new Map,ia=[],eI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Uy(t,e){switch(t){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(e.pointerId)}}function Xc(t,e,n,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=hc(e),e!==null&&qA(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function tI(t,e,n,i,s){switch(e){case"focusin":return _a=Xc(_a,t,e,n,i,s),!0;case"dragenter":return Aa=Xc(Aa,t,e,n,i,s),!0;case"mouseover":return Ta=Xc(Ta,t,e,n,i,s),!0;case"pointerover":var a=s.pointerId;return Fu.set(a,Xc(Fu.get(a)||null,t,e,n,i,s)),!0;case"gotpointercapture":return a=s.pointerId,ju.set(a,Xc(ju.get(a)||null,t,e,n,i,s)),!0}return!1}function WA(t){var e=pl(t.target);if(e!==null){var n=eh(e);if(n!==null){if(e=n.tag,e===13){if(e=fw(n),e!==null){t.blockedOn=e,T2(t.priority,function(){Vy(n)});return}}else if(e===31){if(e=dw(n),e!==null){t.blockedOn=e,T2(t.priority,function(){Vy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tg(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);z1=i,n.target.dispatchEvent(i),z1=null}else return e=hc(n),e!==null&&qA(e),t.blockedOn=n,!1;e.shift()}return!0}function Fy(t,e,n){xf(t)&&n.delete(e)}function nI(){Cg=!1,_a!==null&&xf(_a)&&(_a=null),Aa!==null&&xf(Aa)&&(Aa=null),Ta!==null&&xf(Ta)&&(Ta=null),Fu.forEach(Fy),ju.forEach(Fy)}function qh(t,e){t.blockedOn===e&&(t.blockedOn=null,Cg||(Cg=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,nI)))}var Xh=null;function jy(t){Xh!==t&&(Xh=t,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,function(){Xh===t&&(Xh=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(ap(i||n)===null)continue;break}var a=hc(n);a!==null&&(t.splice(e,3),e-=3,rg(a,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Kl(t){function e(p){return qh(p,t)}_a!==null&&qh(_a,t),Aa!==null&&qh(Aa,t),Ta!==null&&qh(Ta,t),Fu.forEach(e),ju.forEach(e);for(var n=0;n<ia.length;n++){var i=ia[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ia.length&&(n=ia[0],n.blockedOn===null);)WA(n),n.blockedOn===null&&ia.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],a=n[i+1],u=s[Ei]||null;if(typeof a=="function")u||jy(n);else if(u){var d=null;if(a&&a.hasAttribute("formAction")){if(s=a,u=a[Ei]||null)d=u.formAction;else if(ap(s)!==null)continue}else d=u.action;typeof d=="function"?n[i+1]=d:(n.splice(i,3),i-=3),jy(n)}}}function QA(){function t(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(u){return s=u})},focusReset:"manual",scroll:"manual"})}function e(){s!==null&&(s(),s=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),s!==null&&(s(),s=null)}}}function op(t){this._internalRoot=t}Qd.prototype.render=op.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));var n=e.current,i=ji();YA(n,i,t,e,null,null)};Qd.prototype.unmount=op.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;YA(t.current,2,null,t,null,null),qd(),e[uc]=null}};function Qd(t){this._internalRoot=t}Qd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ia.length&&e!==0&&e<ia[n].priority;n++);ia.splice(n,0,t),n===0&&WA(t)}};var zy=uw.version;if(zy!=="19.2.0")throw Error(ae(527,zy,"19.2.0"));pt.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=Db(e),t=t!==null?gw(t):null,t=t===null?null:t.stateNode,t};var iI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:De,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wh.isDisabled&&Wh.supportsFiber)try{th=Wh.inject(iI),Ui=Wh}catch{}}Dd.createRoot=function(t,e){if(!hw(t))throw Error(ae(299));var n=!1,i="",s=F_,a=j_,u=z_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(u=e.onRecoverableError)),e=HA(t,1,!1,null,null,n,i,null,s,a,u,QA),t[uc]=e.current,tp(t),new op(e)};Dd.hydrateRoot=function(t,e,n){if(!hw(t))throw Error(ae(299));var i=!1,s="",a=F_,u=j_,d=z_,p=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(u=n.onCaughtError),n.onRecoverableError!==void 0&&(d=n.onRecoverableError),n.formState!==void 0&&(p=n.formState)),e=HA(t,1,!0,e,n??null,i,s,p,a,u,d,QA),e.context=GA(null),n=e.current,i=ji(),i=mm(i),s=ya(i),s.callback=null,Ea(n,s,i),n=i,e.current.lanes=n,ih(e,n),ts(e),t[uc]=e.current,tp(t),new Qd(e)};Dd.version="19.2.0";function KA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KA)}catch(t){console.error(t)}}KA(),rw.exports=Dd;var rI=rw.exports;const sI=am(rI),aI=()=>{};var Hy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},oI=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],u=t[n++],d=t[n++],p=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},JA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],u=s+1<t.length,d=u?t[s+1]:0,p=s+2<t.length,y=p?t[s+2]:0,w=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|y>>6,I=y&63;p||(I=64,u||(S=64)),i.push(n[w],n[T],n[S],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const y=s<t.length?n[t.charAt(s)]:64;++s;const T=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||d==null||y==null||T==null)throw new lI;const S=a<<2|d>>4;if(i.push(S),y!==64){const I=d<<4&240|y>>2;if(i.push(I),T!==64){const q=y<<6&192|T;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cI=function(t){const e=ZA(t);return JA.encodeByteArray(e,!0)},ad=function(t){return cI(t).replace(/\./g,"")},$A=function(t){try{return JA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=()=>uI().__FIREBASE_DEFAULTS__,fI=()=>{if(typeof process>"u"||typeof Hy>"u")return;const t=Hy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$A(t[1]);return e&&JSON.parse(e)},Kd=()=>{try{return aI()||hI()||fI()||dI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eT=t=>{var e,n;return(n=(e=Kd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},gI=t=>{const e=eT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},tT=()=>{var t;return(t=Kd())==null?void 0:t.config},nT=t=>{var e;return(e=Kd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ad(JSON.stringify(n)),ad(JSON.stringify(u)),""].join(".")}const wu={};function yI(){const t={prod:[],emulator:[]};for(const e of Object.keys(wu))wu[e]?t.emulator.push(e):t.prod.push(e);return t}function EI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gy=!1;function rT(t,e){if(typeof window>"u"||typeof document>"u"||!yc(window.location.host)||wu[t]===e||wu[t]||Gy)return;wu[t]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=yI().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Gy=!0,u()},S}function w(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=EI(i),I=n("text"),q=document.getElementById(I)||document.createElement("span"),X=n("learnmore"),$=document.getElementById(X)||document.createElement("a"),V=n("preprendIcon"),L=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const k=S.element;d(k),w($,X);const H=y();p(L,V),k.append(L,q,$,H),document.body.appendChild(k)}a?(q.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function wI(){var e;const t=(e=Kd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _I(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CI(){const t=Qn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SI(){return!wI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bI(){try{return typeof indexedDB=="object"}catch{return!1}}function vI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="FirebaseError";class Bs extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=II,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fh.prototype.create)}}class fh{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?NI(a,i):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Bs(s,d,i)}}function NI(t,e){return t.replace(RI,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const RI=/\{\$([^}]+)}/g;function MI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Io(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],u=e[s];if(Yy(a)&&Yy(u)){if(!Io(a,u))return!1}else if(a!==u)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Yy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $c(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function eu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DI(t,e){const n=new OI(t,e);return n.subscribe.bind(n)}class OI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");LI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=l1),s.error===void 0&&(s.error=l1),s.complete===void 0&&(s.complete=l1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function l1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){return t&&t._delegate?t._delegate:t}class No{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new mI;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BI(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kI(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kI(t){return t===ho?void 0:t}function BI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Je||(Je={}));const UI={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},FI=Je.INFO,jI={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},zI=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=jI[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lp{constructor(e){this.name=e,this._logLevel=FI,this._logHandler=zI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const HI=(t,e)=>e.some(n=>t instanceof n);let qy,Xy;function GI(){return qy||(qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YI(){return Xy||(Xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sT=new WeakMap,Sg=new WeakMap,aT=new WeakMap,c1=new WeakMap,cp=new WeakMap;function qI(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(Ca(t.result)),s()},u=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&sT.set(n,t)}).catch(()=>{}),cp.set(e,t),e}function XI(t){if(Sg.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),s()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Sg.set(t,e)}let bg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ca(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WI(t){bg=t(bg)}function QI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(u1(this),e,...n);return aT.set(i,e.sort?e.sort():[e]),Ca(i)}:YI().includes(t)?function(...e){return t.apply(u1(this),e),Ca(sT.get(this))}:function(...e){return Ca(t.apply(u1(this),e))}}function KI(t){return typeof t=="function"?QI(t):(t instanceof IDBTransaction&&XI(t),HI(t,GI())?new Proxy(t,bg):t)}function Ca(t){if(t instanceof IDBRequest)return qI(t);if(c1.has(t))return c1.get(t);const e=KI(t);return e!==t&&(c1.set(t,e),cp.set(e,t)),e}const u1=t=>cp.get(t);function ZI(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const u=indexedDB.open(t,e),d=Ca(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Ca(u.result),p.oldVersion,p.newVersion,Ca(u.transaction),p)}),n&&u.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),s&&p.addEventListener("versionchange",y=>s(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const JI=["get","getKey","getAll","getAllKeys","count"],$I=["put","add","delete","clear"],h1=new Map;function Wy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(h1.get(e))return h1.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=$I.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||JI.includes(n)))return;const a=async function(u,...d){const p=this.transaction(u,s?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[n](...d),s&&p.done]))[0]};return h1.set(e,a),a}WI(t=>({...t,get:(e,n,i)=>Wy(e,n)||t.get(e,n,i),has:(e,n)=>!!Wy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(t4(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function t4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vg="@firebase/app",Qy="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new lp("@firebase/app"),n4="@firebase/app-compat",i4="@firebase/analytics-compat",r4="@firebase/analytics",s4="@firebase/app-check-compat",a4="@firebase/app-check",o4="@firebase/auth",l4="@firebase/auth-compat",c4="@firebase/database",u4="@firebase/data-connect",h4="@firebase/database-compat",f4="@firebase/functions",d4="@firebase/functions-compat",g4="@firebase/installations",m4="@firebase/installations-compat",p4="@firebase/messaging",y4="@firebase/messaging-compat",E4="@firebase/performance",x4="@firebase/performance-compat",w4="@firebase/remote-config",_4="@firebase/remote-config-compat",A4="@firebase/storage",T4="@firebase/storage-compat",C4="@firebase/firestore",S4="@firebase/ai",b4="@firebase/firestore-compat",v4="firebase",I4="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="[DEFAULT]",N4={[vg]:"fire-core",[n4]:"fire-core-compat",[r4]:"fire-analytics",[i4]:"fire-analytics-compat",[a4]:"fire-app-check",[s4]:"fire-app-check-compat",[o4]:"fire-auth",[l4]:"fire-auth-compat",[c4]:"fire-rtdb",[u4]:"fire-data-connect",[h4]:"fire-rtdb-compat",[f4]:"fire-fn",[d4]:"fire-fn-compat",[g4]:"fire-iid",[m4]:"fire-iid-compat",[p4]:"fire-fcm",[y4]:"fire-fcm-compat",[E4]:"fire-perf",[x4]:"fire-perf-compat",[w4]:"fire-rc",[_4]:"fire-rc-compat",[A4]:"fire-gcs",[T4]:"fire-gcs-compat",[C4]:"fire-fst",[b4]:"fire-fst-compat",[S4]:"fire-vertex","fire-js":"fire-js",[v4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new Map,R4=new Map,Ng=new Map;function Ky(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zl(t){const e=t.name;if(Ng.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Ng.set(e,t);for(const n of od.values())Ky(n,t);for(const n of R4.values())Ky(n,t);return!0}function up(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sa=new fh("app","Firebase",M4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new No("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=I4;function oT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Ig,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Sa.create("bad-app-name",{appName:String(s)});if(n||(n=tT()),!n)throw Sa.create("no-options");const a=od.get(s);if(a){if(Io(n,a.options)&&Io(i,a.config))return a;throw Sa.create("duplicate-app",{appName:s})}const u=new VI(s);for(const p of Ng.values())u.addComponent(p);const d=new D4(n,i,u);return od.set(s,d),d}function lT(t=Ig){const e=od.get(t);if(!e&&t===Ig&&tT())return oT();if(!e)throw Sa.create("no-app",{appName:t});return e}function ba(t,e,n){let i=N4[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(u.join(" "));return}Zl(new No(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="firebase-heartbeat-database",L4=1,zu="firebase-heartbeat-store";let f1=null;function cT(){return f1||(f1=ZI(O4,L4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sa.create("idb-open",{originalErrorMessage:t.message})})),f1}async function P4(t){try{const n=(await cT()).transaction(zu),i=await n.objectStore(zu).get(uT(t));return await n.done,i}catch(e){if(e instanceof Bs)Ds.warn(e.message);else{const n=Sa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function Zy(t,e){try{const i=(await cT()).transaction(zu,"readwrite");await i.objectStore(zu).put(e,uT(t)),await i.done}catch(n){if(n instanceof Bs)Ds.warn(n.message);else{const i=Sa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(i.message)}}}function uT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=1024,B4=30;class V4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new F4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Jy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>B4){const u=j4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ds.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jy(),{heartbeatsToSend:i,unsentEntries:s}=U4(this._heartbeatsCache.heartbeats),a=ad(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ds.warn(n),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function U4(t,e=k4){const n=[];let i=t.slice();for(const s of t){const a=n.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),$y(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$y(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class F4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bI()?vI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await P4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $y(t){return ad(JSON.stringify({version:2,heartbeats:t})).length}function j4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t){Zl(new No("platform-logger",e=>new e4(e),"PRIVATE")),Zl(new No("heartbeat",e=>new V4(e),"PRIVATE")),ba(vg,Qy,t),ba(vg,Qy,"esm2020"),ba("fire-js","")}z4("");function hT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H4=hT,fT=new fh("auth","Firebase",hT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new lp("@firebase/auth");function G4(t,...e){ld.logLevel<=Je.WARN&&ld.warn(`Auth (${Ec}): ${t}`,...e)}function wf(t,...e){ld.logLevel<=Je.ERROR&&ld.error(`Auth (${Ec}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw hp(t,...e)}function qr(t,...e){return hp(t,...e)}function dT(t,e,n){const i={...H4(),[e]:n};return new fh("auth","Firebase",i).create(e,{appName:t.name})}function va(t){return dT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return fT.create(t,...e)}function Re(t,e,...n){if(!t)throw hp(e,...n)}function _s(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wf(e),new Error(e)}function Os(t,e){t||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Y4(){return eE()==="http:"||eE()==="https:"}function eE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y4()||AI()||"connection"in navigator)?navigator.onLine:!0}function X4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Os(n>e,"Short delay should be less than long delay!"),this.isMobile=xI()||TI()}get(){return q4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t,e){Os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K4=new gh(3e4,6e4);function Uo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ya(t,e,n,i,s={}){return mT(t,s,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=dh({key:t.config.apiKey,...u}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const y={method:e,headers:p,...a};return _I()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&yc(t.emulatorConfig.host)&&(y.credentials="include"),gT.fetch()(await pT(t,t.config.apiHost,n,d),y)})}async function mT(t,e,n){t._canInitEmulator=!1;const i={...W4,...e};try{const s=new J4(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Qh(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(t,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Qh(t,"email-already-in-use",u);if(p==="USER_DISABLED")throw Qh(t,"user-disabled",u);const w=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw dT(t,w,y);Ar(t,w)}}catch(s){if(s instanceof Bs)throw s;Ar(t,"network-request-failed",{message:String(s)})}}async function Zd(t,e,n,i,s={}){const a=await Ya(t,e,n,i,s);return"mfaPendingCredential"in a&&Ar(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function pT(t,e,n,i){const s=`${e}${n}?${i}`,a=t,u=a.config.emulator?fp(t.config,s):`${t.config.apiScheme}://${s}`;return Q4.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function Z4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class J4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(qr(this.auth,"network-request-failed")),K4.get())})}}function Qh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=qr(t,e,i);return s.customData._tokenResponse=n,s}function tE(t){return t!==void 0&&t.enterprise!==void 0}class $4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Z4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eN(t,e){return Ya(t,"GET","/v2/recaptchaConfig",Uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e){return Ya(t,"POST","/v1/accounts:delete",e)}async function cd(t,e){return Ya(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nN(t,e=!1){const n=On(t),i=await n.getIdToken(e),s=dp(i);Re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:_u(d1(s.auth_time)),issuedAtTime:_u(d1(s.iat)),expirationTime:_u(d1(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function d1(t){return Number(t)*1e3}function dp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return wf("JWT malformed, contained fewer than 3 sections"),null;try{const s=$A(n);return s?JSON.parse(s):(wf("Failed to decode base64 JWT payload"),null)}catch(s){return wf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function nE(t){const e=dp(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Bs&&iN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function iN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(t){var T;const e=t.auth,n=await t.getIdToken(),i=await Hu(t,cd(e,{idToken:n}));Re(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=(T=s.providerUserInfo)!=null&&T.length?yT(s.providerUserInfo):[],u=aN(t.providerData,a),d=t.isAnonymous,p=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),y=d?p:!1,w={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Mg(s.createdAt,s.lastLoginAt),isAnonymous:y};Object.assign(t,w)}async function sN(t){const e=On(t);await ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aN(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function yT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(t,e){const n=await mT(t,{},async()=>{const i=dh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,u=await pT(t,s,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return t.emulatorConfig&&yc(t.emulatorConfig.host)&&(p.credentials="include"),gT.fetch()(u,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lN(t,e){return Ya(t,"POST","/v2/accounts:revokeToken",Uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=nE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await oN(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,u=new Pl;return i&&(Re(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),s&&(Re(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Re(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pl,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wr{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new rN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nN(this,e)}reload(){return sN(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ud(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(va(this.auth));const e=await this.getIdToken();return await Hu(this,tN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,u=n.photoURL??void 0,d=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:I,providerData:q,stsTokenManager:X}=n;Re(T&&X,e,"internal-error");const $=Pl.fromJSON(this.name,X);Re(typeof T=="string",e,"internal-error"),Qs(i,e.name),Qs(s,e.name),Re(typeof S=="boolean",e,"internal-error"),Re(typeof I=="boolean",e,"internal-error"),Qs(a,e.name),Qs(u,e.name),Qs(d,e.name),Qs(p,e.name),Qs(y,e.name),Qs(w,e.name);const V=new wr({uid:T,auth:e,email:s,emailVerified:S,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:$,createdAt:y,lastLoginAt:w});return q&&Array.isArray(q)&&(V.providerData=q.map(L=>({...L}))),p&&(V._redirectEventId=p),V}static async _fromIdTokenResponse(e,n,i=!1){const s=new Pl;s.updateFromServerResponse(n);const a=new wr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ud(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Re(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?yT(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new Pl;d.updateFromIdToken(i);const p=new wr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Mg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function As(t){Os(t instanceof Function,"Expected a class definition");let e=iE.get(t);return e?(Os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ET.type="NONE";const rE=ET;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t,e,n){return`firebase:${t}:${e}:${n}`}class kl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=_f(this.userKey,s.apiKey,a),this.fullPersistenceKey=_f("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cd(this.auth,{idToken:e}).catch(()=>{});return n?wr._fromGetAccountInfoResponse(this.auth,n,e):null}return wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new kl(As(rE),e,i);const s=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=s[0]||As(rE);const u=_f(i,e.config.apiKey,e.name);let d=null;for(const y of n)try{const w=await y._get(u);if(w){let T;if(typeof w=="string"){const S=await cd(e,{idToken:w}).catch(()=>{});if(!S)break;T=await wr._fromGetAccountInfoResponse(e,S,w)}else T=wr._fromJSON(e,w);y!==a&&(d=T),a=y;break}}catch{}const p=s.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new kl(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(n.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new kl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CT(e))return"Blackberry";if(ST(e))return"Webos";if(wT(e))return"Safari";if((e.includes("chrome/")||_T(e))&&!e.includes("edge/"))return"Chrome";if(TT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function xT(t=Qn()){return/firefox\//i.test(t)}function wT(t=Qn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _T(t=Qn()){return/crios\//i.test(t)}function AT(t=Qn()){return/iemobile/i.test(t)}function TT(t=Qn()){return/android/i.test(t)}function CT(t=Qn()){return/blackberry/i.test(t)}function ST(t=Qn()){return/webos/i.test(t)}function gp(t=Qn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cN(t=Qn()){var e;return gp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function uN(){return CI()&&document.documentMode===10}function bT(t=Qn()){return gp(t)||TT(t)||ST(t)||CT(t)||/windows phone/i.test(t)||AT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t,e=[]){let n;switch(t){case"Browser":n=sE(Qn());break;case"Worker":n=`${sE(Qn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ec}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(t,e={}){return Ya(t,"GET","/v2/passwordPolicy",Uo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=6;class gN{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??dN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aE(this),this.idTokenSubscription=new aE(this),this.beforeStateQueue=new hN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=As(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await kl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cd(this,{idToken:e}),i=await wr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(xr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(i=p.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ud(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(va(this));const n=e?On(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fN(this),n=new gN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fh("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await lN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&As(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await kl.create(this,[As(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,s);return()=>{u=!0,p()}}else{const p=e.addObserver(n);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&G4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xc(t){return On(t)}class aE{constructor(e){this.auth=e,this.observer=null,this.addObserver=DI(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pN(t){Jd=t}function IT(t){return Jd.loadJS(t)}function yN(){return Jd.recaptchaEnterpriseScript}function EN(){return Jd.gapiScript}function xN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class wN{constructor(){this.enterprise=new _N}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class _N{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AN="recaptcha-enterprise",NT="NO_RECAPTCHA";class TN{constructor(e){this.type=AN,this.auth=xc(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{eN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new $4(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,u(y.siteKey)}}).catch(p=>{d(p)})})}function s(a,u,d){const p=window.grecaptcha;tE(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{u(y)}).catch(()=>{u(NT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wN().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!n&&tE(window.grecaptcha))s(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=yN();p.length!==0&&(p+=d),IT(p).then(()=>{s(d,a,u)}).catch(y=>{u(y)})}}).catch(d=>{u(d)})})}}async function oE(t,e,n,i=!1,s=!1){const a=new TN(t);let u;if(s)u=NT;else try{u=await a.verify(n)}catch{u=await a.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function lE(t,e,n,i,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await oE(t,e,n,n==="getOobCode");return i(t,u)}else return i(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await oE(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e){const n=up(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Io(a,e??{}))return s;Ar(s,"already-initialized")}return n.initialize({options:e})}function SN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(As);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function bN(t,e,n){const i=xc(t);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=RT(e),{host:u,port:d}=vN(e),p=d===null?"":`:${d}`,y={url:`${a}//${u}${p}/`},w=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(Io(y,i.config.emulator)&&Io(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,yc(u)?(iT(`${a}//${u}${p}`),rT("Auth",!0)):IN()}function RT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vN(t){const e=RT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:cE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:cE(u)}}}function cE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,n){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function NN(t,e){return Ya(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e){return Zd(t,"POST","/v1/accounts:signInWithPassword",Uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",Uo(t,e))}async function DN(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",Uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends mp{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Gu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Gu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lE(e,n,"signInWithPassword",RN);case"emailLink":return MN(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lE(e,i,"signUpPassword",NN);case"emailLink":return DN(e,{idToken:n,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t,e){return Zd(t,"POST","/v1/accounts:signInWithIdp",Uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="http://localhost";class Ro extends mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...a}=n;if(!i||!s)return null;const u=new Ro(i,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Bl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Bl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bl(e,n)}buildRequest(){const e={requestUri:ON,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PN(t){const e=$c(eu(t)).link,n=e?$c(eu(e)).deep_link_id:null,i=$c(eu(t)).deep_link_id;return(i?$c(eu(i)).link:null)||i||n||e||t}class pp{constructor(e){const n=$c(eu(e)),i=n.apiKey??null,s=n.oobCode??null,a=LN(n.mode??null);Re(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PN(e);try{return new pp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.providerId=wc.PROVIDER_ID}static credential(e,n){return Gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=pp.parseLink(n);return Re(i,"argument-error"),Gu._fromEmailAndCode(e,i.code,i.tenantId)}}wc.PROVIDER_ID="password";wc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends MT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends mh{constructor(){super("facebook.com")}static credential(e){return Ro._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ra.credential(e.oauthAccessToken)}catch{return null}}}ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";ra.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends mh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ro._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return sa.credential(n,i)}catch{return null}}}sa.GOOGLE_SIGN_IN_METHOD="google.com";sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends mh{constructor(){super("github.com")}static credential(e){return Ro._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return aa.credential(e.oauthAccessToken)}catch{return null}}}aa.GITHUB_SIGN_IN_METHOD="github.com";aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends mh{constructor(){super("twitter.com")}static credential(e,n){return Ro._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return oa.credential(n,i)}catch{return null}}}oa.TWITTER_SIGN_IN_METHOD="twitter.com";oa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await wr._fromIdTokenResponse(e,i,s),u=uE(i);return new Jl({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=uE(i);return new Jl({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function uE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends Bs{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new hd(e,n,i,s)}}function DT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?hd._fromErrorAndOperation(t,a,e,i):a})}async function kN(t,e,n=!1){const i=await Hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jl._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(t,e,n=!1){const{auth:i}=t;if(xr(i.app))return Promise.reject(va(i));const s="reauthenticate";try{const a=await Hu(t,DT(i,s,e,t),n);Re(a.idToken,i,"internal-error");const u=dp(a.idToken);Re(u,i,"internal-error");const{sub:d}=u;return Re(t.uid===d,i,"user-mismatch"),Jl._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ar(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(t,e,n=!1){if(xr(t.app))return Promise.reject(va(t));const i="signIn",s=await DT(t,i,e),a=await Jl._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function VN(t,e){return OT(xc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t){const e=xc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function FN(t,e,n){return xr(t.app)?Promise.reject(va(t)):VN(On(t),wc.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&UN(t),i})}function jN(t,e,n,i){return On(t).onIdTokenChanged(e,n,i)}function zN(t,e,n){return On(t).beforeAuthStateChanged(e,n)}function HN(t,e,n,i){return On(t).onAuthStateChanged(e,n,i)}const fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fd,"1"),this.storage.removeItem(fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=1e3,YN=10;class PT extends LT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);uN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YN):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},GN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PT.type="LOCAL";const qN=PT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends LT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kT.type="SESSION";const BT=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new $d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(u).map(async y=>y(n.origin,a)),p=await XN(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const y=yp("",20);s.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(w),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(w),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function QN(t){Xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function KN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function JN(){return VT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firebaseLocalStorageDb",$N=1,dd="firebaseLocalStorage",FT="fbase_key";class ph{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function e0(t,e){return t.transaction([dd],e?"readwrite":"readonly").objectStore(dd)}function e6(){const t=indexedDB.deleteDatabase(UT);return new ph(t).toPromise()}function Dg(){const t=indexedDB.open(UT,$N);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(dd,{keyPath:FT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(dd)?e(i):(i.close(),await e6(),e(await Dg()))})})}async function hE(t,e,n){const i=e0(t,!0).put({[FT]:e,value:n});return new ph(i).toPromise()}async function t6(t,e){const n=e0(t,!1).get(e),i=await new ph(n).toPromise();return i===void 0?null:i.value}function fE(t,e){const n=e0(t,!0).delete(e);return new ph(n).toPromise()}const n6=800,i6=3;class jT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>i6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(JN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await KN(),!this.activeServiceWorker)return;this.sender=new WN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dg();return await hE(e,fd,"1"),await fE(e,fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>hE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>t6(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=e0(s,!1).getAll();return new ph(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jT.type="LOCAL";const r6=jT;new gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t,e){return e?As(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function a6(t){return OT(t.auth,new Ep(t),t.bypassAuthState)}function o6(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),BN(n,new Ep(t),t.bypassAuthState)}async function l6(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),kN(n,new Ep(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a6;case"linkViaPopup":case"linkViaRedirect":return l6;case"reauthViaPopup":case"reauthViaRedirect":return o6;default:Ar(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new gh(2e3,1e4);class bl extends zT{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,bl.currentPopupAction&&bl.currentPopupAction.cancel(),bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c6.get())};e()}}bl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="pendingRedirect",Af=new Map;class h6 extends zT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{const i=await f6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f6(t,e){const n=m6(e),i=g6(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function d6(t,e){Af.set(t._key(),e)}function g6(t){return As(t._redirectPersistence)}function m6(t){return _f(u6,t.config.apiKey,t.name)}async function p6(t,e,n=!1){if(xr(t.app))return Promise.reject(va(t));const i=xc(t),s=s6(i,e),u=await new h6(i,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=10*60*1e3;class E6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!HT(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(qr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y6&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function x6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w6(t,e={}){return Ya(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A6=/^https?/;async function T6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await w6(t);for(const n of e)try{if(C6(n))return}catch{}Ar(t,"unauthorized-domain")}function C6(t){const e=Rg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!A6.test(n))return!1;if(_6.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=new gh(3e4,6e4);function gE(){const t=Xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function b6(t){return new Promise((e,n)=>{var s,a,u;function i(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),n(qr(t,"network-request-failed"))},timeout:S6.get()})}if((a=(s=Xr().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Xr().gapi)!=null&&u.load)i();else{const d=xN("iframefcb");return Xr()[d]=()=>{gapi.load?i():n(qr(t,"network-request-failed"))},IT(`${EN()}?onload=${d}`).catch(p=>n(p))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function v6(t){return Tf=Tf||b6(t),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new gh(5e3,15e3),N6="__/auth/iframe",R6="emulator/auth/iframe",M6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O6(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fp(e,R6):`https://${t.config.authDomain}/${N6}`,i={apiKey:e.apiKey,appName:t.name,v:Ec},s=D6.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${dh(i).slice(1)}`}async function L6(t){const e=await v6(t),n=Xr().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:O6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M6,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const u=qr(t,"network-request-failed"),d=Xr().setTimeout(()=>{a(u)},I6.get());function p(){Xr().clearTimeout(d),s(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k6=500,B6=600,V6="_blank",U6="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F6(t,e,n,i=k6,s=B6){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...P6,width:i.toString(),height:s.toString(),top:a,left:u},y=Qn().toLowerCase();n&&(d=_T(y)?V6:n),xT(y)&&(e=e||U6,p.scrollbars="yes");const w=Object.entries(p).reduce((S,[I,q])=>`${S}${I}=${q},`,"");if(cN(y)&&d!=="_self")return j6(e||"",d),new mE(null);const T=window.open(e||"",d,w);Re(T,t,"popup-blocked");try{T.focus()}catch{}return new mE(T)}function j6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="__/auth/handler",H6="emulator/auth/handler",G6=encodeURIComponent("fac");async function pE(t,e,n,i,s,a){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ec,eventId:s};if(e instanceof MT){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",MI(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))u[w]=T}if(e instanceof mh){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(u.scopes=w.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const w of Object.keys(d))d[w]===void 0&&delete d[w];const p=await t._getAppCheckToken(),y=p?`#${G6}=${encodeURIComponent(p)}`:"";return`${Y6(t)}?${dh(d).slice(1)}${y}`}function Y6({config:t}){return t.emulator?fp(t,H6):`https://${t.authDomain}/${z6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="webStorageSupport";class q6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=p6,this._overrideRedirectResult=d6}async _openPopup(e,n,i,s){var u;Os((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await pE(e,n,i,Rg(),s);return F6(e,a,yp())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await pE(e,n,i,Rg(),s);return QN(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Os(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await L6(e),i=new E6(e);return n.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(g1,{type:g1},s=>{var u;const a=(u=s==null?void 0:s[0])==null?void 0:u[g1];a!==void 0&&n(!!a),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=T6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bT()||wT()||gp()}}const X6=q6;var yE="@firebase/auth",EE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K6(t){Zl(new No("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vT(t)},y=new mN(i,s,a,p);return SN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Zl(new No("auth-internal",e=>{const n=xc(e.getProvider("auth").getImmediate());return(i=>new W6(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ba(yE,EE,Q6(t)),ba(yE,EE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=5*60,J6=nT("authIdTokenMaxAge")||Z6;let xE=null;const $6=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>J6)return;const s=n==null?void 0:n.token;xE!==s&&(xE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GT(t=lT()){const e=up(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CN(t,{popupRedirectResolver:X6,persistence:[r6,qN,BT]}),i=nT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=$6(a.toString());zN(n,u,()=>u(n.currentUser)),jN(n,d=>u(d))}}const s=eT("auth");return s&&bN(n,`http://${s}`),n}function e8(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}pN({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=qr("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",e8().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K6("Browser");function t8(){const t=GT(),[e,n]=ze.useState(""),[i,s]=ze.useState(""),[a,u]=ze.useState(!1),d=async p=>{p.preventDefault(),u(!0);try{await FN(t,e,i)}catch(y){alert("Login gagal: "+y.message)}finally{u(!1)}};return O.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:O.jsxs("form",{onSubmit:d,className:"bg-white p-8 rounded-xl shadow-md w-80",children:[O.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Login Admin"}),O.jsx("input",{type:"email",placeholder:"Email",className:"w-full mb-3 p-2 border rounded",value:e,onChange:p=>n(p.target.value),required:!0}),O.jsx("input",{type:"password",placeholder:"Password",className:"w-full mb-4 p-2 border rounded",value:i,onChange:p=>s(p.target.value),required:!0}),O.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white p-2 rounded",children:a?"Loading...":"Login"})]})})}var n8="firebase",i8="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ba(n8,i8,"app");var wE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ia,YT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,D){function M(){}M.prototype=D.prototype,R.F=D.prototype,R.prototype=new M,R.prototype.constructor=R,R.D=function(z,G,j){for(var F=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)F[Ge-2]=arguments[Ge];return D.prototype[G].apply(z,F)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,D,M){M||(M=0);const z=Array(16);if(typeof D=="string")for(var G=0;G<16;++G)z[G]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(G=0;G<16;++G)z[G]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=R.g[0],M=R.g[1],G=R.g[2];let j=R.g[3],F;F=D+(j^M&(G^j))+z[0]+3614090360&4294967295,D=M+(F<<7&4294967295|F>>>25),F=j+(G^D&(M^G))+z[1]+3905402710&4294967295,j=D+(F<<12&4294967295|F>>>20),F=G+(M^j&(D^M))+z[2]+606105819&4294967295,G=j+(F<<17&4294967295|F>>>15),F=M+(D^G&(j^D))+z[3]+3250441966&4294967295,M=G+(F<<22&4294967295|F>>>10),F=D+(j^M&(G^j))+z[4]+4118548399&4294967295,D=M+(F<<7&4294967295|F>>>25),F=j+(G^D&(M^G))+z[5]+1200080426&4294967295,j=D+(F<<12&4294967295|F>>>20),F=G+(M^j&(D^M))+z[6]+2821735955&4294967295,G=j+(F<<17&4294967295|F>>>15),F=M+(D^G&(j^D))+z[7]+4249261313&4294967295,M=G+(F<<22&4294967295|F>>>10),F=D+(j^M&(G^j))+z[8]+1770035416&4294967295,D=M+(F<<7&4294967295|F>>>25),F=j+(G^D&(M^G))+z[9]+2336552879&4294967295,j=D+(F<<12&4294967295|F>>>20),F=G+(M^j&(D^M))+z[10]+4294925233&4294967295,G=j+(F<<17&4294967295|F>>>15),F=M+(D^G&(j^D))+z[11]+2304563134&4294967295,M=G+(F<<22&4294967295|F>>>10),F=D+(j^M&(G^j))+z[12]+1804603682&4294967295,D=M+(F<<7&4294967295|F>>>25),F=j+(G^D&(M^G))+z[13]+4254626195&4294967295,j=D+(F<<12&4294967295|F>>>20),F=G+(M^j&(D^M))+z[14]+2792965006&4294967295,G=j+(F<<17&4294967295|F>>>15),F=M+(D^G&(j^D))+z[15]+1236535329&4294967295,M=G+(F<<22&4294967295|F>>>10),F=D+(G^j&(M^G))+z[1]+4129170786&4294967295,D=M+(F<<5&4294967295|F>>>27),F=j+(M^G&(D^M))+z[6]+3225465664&4294967295,j=D+(F<<9&4294967295|F>>>23),F=G+(D^M&(j^D))+z[11]+643717713&4294967295,G=j+(F<<14&4294967295|F>>>18),F=M+(j^D&(G^j))+z[0]+3921069994&4294967295,M=G+(F<<20&4294967295|F>>>12),F=D+(G^j&(M^G))+z[5]+3593408605&4294967295,D=M+(F<<5&4294967295|F>>>27),F=j+(M^G&(D^M))+z[10]+38016083&4294967295,j=D+(F<<9&4294967295|F>>>23),F=G+(D^M&(j^D))+z[15]+3634488961&4294967295,G=j+(F<<14&4294967295|F>>>18),F=M+(j^D&(G^j))+z[4]+3889429448&4294967295,M=G+(F<<20&4294967295|F>>>12),F=D+(G^j&(M^G))+z[9]+568446438&4294967295,D=M+(F<<5&4294967295|F>>>27),F=j+(M^G&(D^M))+z[14]+3275163606&4294967295,j=D+(F<<9&4294967295|F>>>23),F=G+(D^M&(j^D))+z[3]+4107603335&4294967295,G=j+(F<<14&4294967295|F>>>18),F=M+(j^D&(G^j))+z[8]+1163531501&4294967295,M=G+(F<<20&4294967295|F>>>12),F=D+(G^j&(M^G))+z[13]+2850285829&4294967295,D=M+(F<<5&4294967295|F>>>27),F=j+(M^G&(D^M))+z[2]+4243563512&4294967295,j=D+(F<<9&4294967295|F>>>23),F=G+(D^M&(j^D))+z[7]+1735328473&4294967295,G=j+(F<<14&4294967295|F>>>18),F=M+(j^D&(G^j))+z[12]+2368359562&4294967295,M=G+(F<<20&4294967295|F>>>12),F=D+(M^G^j)+z[5]+4294588738&4294967295,D=M+(F<<4&4294967295|F>>>28),F=j+(D^M^G)+z[8]+2272392833&4294967295,j=D+(F<<11&4294967295|F>>>21),F=G+(j^D^M)+z[11]+1839030562&4294967295,G=j+(F<<16&4294967295|F>>>16),F=M+(G^j^D)+z[14]+4259657740&4294967295,M=G+(F<<23&4294967295|F>>>9),F=D+(M^G^j)+z[1]+2763975236&4294967295,D=M+(F<<4&4294967295|F>>>28),F=j+(D^M^G)+z[4]+1272893353&4294967295,j=D+(F<<11&4294967295|F>>>21),F=G+(j^D^M)+z[7]+4139469664&4294967295,G=j+(F<<16&4294967295|F>>>16),F=M+(G^j^D)+z[10]+3200236656&4294967295,M=G+(F<<23&4294967295|F>>>9),F=D+(M^G^j)+z[13]+681279174&4294967295,D=M+(F<<4&4294967295|F>>>28),F=j+(D^M^G)+z[0]+3936430074&4294967295,j=D+(F<<11&4294967295|F>>>21),F=G+(j^D^M)+z[3]+3572445317&4294967295,G=j+(F<<16&4294967295|F>>>16),F=M+(G^j^D)+z[6]+76029189&4294967295,M=G+(F<<23&4294967295|F>>>9),F=D+(M^G^j)+z[9]+3654602809&4294967295,D=M+(F<<4&4294967295|F>>>28),F=j+(D^M^G)+z[12]+3873151461&4294967295,j=D+(F<<11&4294967295|F>>>21),F=G+(j^D^M)+z[15]+530742520&4294967295,G=j+(F<<16&4294967295|F>>>16),F=M+(G^j^D)+z[2]+3299628645&4294967295,M=G+(F<<23&4294967295|F>>>9),F=D+(G^(M|~j))+z[0]+4096336452&4294967295,D=M+(F<<6&4294967295|F>>>26),F=j+(M^(D|~G))+z[7]+1126891415&4294967295,j=D+(F<<10&4294967295|F>>>22),F=G+(D^(j|~M))+z[14]+2878612391&4294967295,G=j+(F<<15&4294967295|F>>>17),F=M+(j^(G|~D))+z[5]+4237533241&4294967295,M=G+(F<<21&4294967295|F>>>11),F=D+(G^(M|~j))+z[12]+1700485571&4294967295,D=M+(F<<6&4294967295|F>>>26),F=j+(M^(D|~G))+z[3]+2399980690&4294967295,j=D+(F<<10&4294967295|F>>>22),F=G+(D^(j|~M))+z[10]+4293915773&4294967295,G=j+(F<<15&4294967295|F>>>17),F=M+(j^(G|~D))+z[1]+2240044497&4294967295,M=G+(F<<21&4294967295|F>>>11),F=D+(G^(M|~j))+z[8]+1873313359&4294967295,D=M+(F<<6&4294967295|F>>>26),F=j+(M^(D|~G))+z[15]+4264355552&4294967295,j=D+(F<<10&4294967295|F>>>22),F=G+(D^(j|~M))+z[6]+2734768916&4294967295,G=j+(F<<15&4294967295|F>>>17),F=M+(j^(G|~D))+z[13]+1309151649&4294967295,M=G+(F<<21&4294967295|F>>>11),F=D+(G^(M|~j))+z[4]+4149444226&4294967295,D=M+(F<<6&4294967295|F>>>26),F=j+(M^(D|~G))+z[11]+3174756917&4294967295,j=D+(F<<10&4294967295|F>>>22),F=G+(D^(j|~M))+z[2]+718787259&4294967295,G=j+(F<<15&4294967295|F>>>17),F=M+(j^(G|~D))+z[9]+3951481745&4294967295,R.g[0]=R.g[0]+D&4294967295,R.g[1]=R.g[1]+(G+(F<<21&4294967295|F>>>11))&4294967295,R.g[2]=R.g[2]+G&4294967295,R.g[3]=R.g[3]+j&4294967295}i.prototype.v=function(R,D){D===void 0&&(D=R.length);const M=D-this.blockSize,z=this.C;let G=this.h,j=0;for(;j<D;){if(G==0)for(;j<=M;)s(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<D;)if(z[G++]=R.charCodeAt(j++),G==this.blockSize){s(this,z),G=0;break}}else for(;j<D;)if(z[G++]=R[j++],G==this.blockSize){s(this,z),G=0;break}}this.h=G,this.o+=D},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var D=1;D<R.length-8;++D)R[D]=0;D=this.o*8;for(var M=R.length-8;M<R.length;++M)R[M]=D&255,D/=256;for(this.v(R),R=Array(16),D=0,M=0;M<4;++M)for(let z=0;z<32;z+=8)R[D++]=this.g[M]>>>z&255;return R};function a(R,D){var M=d;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=D(R)}function u(R,D){this.h=D;const M=[];let z=!0;for(let G=R.length-1;G>=0;G--){const j=R[G]|0;z&&j==D||(M[G]=j,z=!1)}this.g=M}var d={};function p(R){return-128<=R&&R<128?a(R,function(D){return new u([D|0],D<0?-1:0)}):new u([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return $(y(-R));const D=[];let M=1;for(let z=0;R>=M;z++)D[z]=R/M|0,M*=4294967296;return new u(D,0)}function w(R,D){if(R.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(R.charAt(0)=="-")return $(w(R.substring(1),D));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=y(Math.pow(D,8));let z=T;for(let j=0;j<R.length;j+=8){var G=Math.min(8,R.length-j);const F=parseInt(R.substring(j,j+G),D);G<8?(G=y(Math.pow(D,G)),z=z.j(G).add(y(F))):(z=z.j(M),z=z.add(y(F)))}return z}var T=p(0),S=p(1),I=p(16777216);t=u.prototype,t.m=function(){if(X(this))return-$(this).m();let R=0,D=1;for(let M=0;M<this.g.length;M++){const z=this.i(M);R+=(z>=0?z:4294967296+z)*D,D*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(q(this))return"0";if(X(this))return"-"+$(this).toString(R);const D=y(Math.pow(R,6));var M=this;let z="";for(;;){const G=H(M,D).g;M=V(M,G.j(D));let j=((M.g.length>0?M.g[0]:M.h)>>>0).toString(R);if(M=G,q(M))return j+z;for(;j.length<6;)j="0"+j;z=j+z}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function q(R){if(R.h!=0)return!1;for(let D=0;D<R.g.length;D++)if(R.g[D]!=0)return!1;return!0}function X(R){return R.h==-1}t.l=function(R){return R=V(this,R),X(R)?-1:q(R)?0:1};function $(R){const D=R.g.length,M=[];for(let z=0;z<D;z++)M[z]=~R.g[z];return new u(M,~R.h).add(S)}t.abs=function(){return X(this)?$(this):this},t.add=function(R){const D=Math.max(this.g.length,R.g.length),M=[];let z=0;for(let G=0;G<=D;G++){let j=z+(this.i(G)&65535)+(R.i(G)&65535),F=(j>>>16)+(this.i(G)>>>16)+(R.i(G)>>>16);z=F>>>16,j&=65535,F&=65535,M[G]=F<<16|j}return new u(M,M[M.length-1]&-2147483648?-1:0)};function V(R,D){return R.add($(D))}t.j=function(R){if(q(this)||q(R))return T;if(X(this))return X(R)?$(this).j($(R)):$($(this).j(R));if(X(R))return $(this.j($(R)));if(this.l(I)<0&&R.l(I)<0)return y(this.m()*R.m());const D=this.g.length+R.g.length,M=[];for(var z=0;z<2*D;z++)M[z]=0;for(z=0;z<this.g.length;z++)for(let G=0;G<R.g.length;G++){const j=this.i(z)>>>16,F=this.i(z)&65535,Ge=R.i(G)>>>16,ie=R.i(G)&65535;M[2*z+2*G]+=F*ie,L(M,2*z+2*G),M[2*z+2*G+1]+=j*ie,L(M,2*z+2*G+1),M[2*z+2*G+1]+=F*Ge,L(M,2*z+2*G+1),M[2*z+2*G+2]+=j*Ge,L(M,2*z+2*G+2)}for(R=0;R<D;R++)M[R]=M[2*R+1]<<16|M[2*R];for(R=D;R<2*D;R++)M[R]=0;return new u(M,0)};function L(R,D){for(;(R[D]&65535)!=R[D];)R[D+1]+=R[D]>>>16,R[D]&=65535,D++}function k(R,D){this.g=R,this.h=D}function H(R,D){if(q(D))throw Error("division by zero");if(q(R))return new k(T,T);if(X(R))return D=H($(R),D),new k($(D.g),$(D.h));if(X(D))return D=H(R,$(D)),new k($(D.g),D.h);if(R.g.length>30){if(X(R)||X(D))throw Error("slowDivide_ only works with positive integers.");for(var M=S,z=D;z.l(R)<=0;)M=oe(M),z=oe(z);var G=re(M,1),j=re(z,1);for(z=re(z,2),M=re(M,2);!q(z);){var F=j.add(z);F.l(R)<=0&&(G=G.add(M),j=F),z=re(z,1),M=re(M,1)}return D=V(R,G.j(D)),new k(G,D)}for(G=T;R.l(D)>=0;){for(M=Math.max(1,Math.floor(R.m()/D.m())),z=Math.ceil(Math.log(M)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),j=y(M),F=j.j(D);X(F)||F.l(R)>0;)M-=z,j=y(M),F=j.j(D);q(j)&&(j=S),G=G.add(j),R=V(R,F)}return new k(G,R)}t.B=function(R){return H(this,R).h},t.and=function(R){const D=Math.max(this.g.length,R.g.length),M=[];for(let z=0;z<D;z++)M[z]=this.i(z)&R.i(z);return new u(M,this.h&R.h)},t.or=function(R){const D=Math.max(this.g.length,R.g.length),M=[];for(let z=0;z<D;z++)M[z]=this.i(z)|R.i(z);return new u(M,this.h|R.h)},t.xor=function(R){const D=Math.max(this.g.length,R.g.length),M=[];for(let z=0;z<D;z++)M[z]=this.i(z)^R.i(z);return new u(M,this.h^R.h)};function oe(R){const D=R.g.length+1,M=[];for(let z=0;z<D;z++)M[z]=R.i(z)<<1|R.i(z-1)>>>31;return new u(M,R.h)}function re(R,D){const M=D>>5;D%=32;const z=R.g.length-M,G=[];for(let j=0;j<z;j++)G[j]=D>0?R.i(j+M)>>>D|R.i(j+M+1)<<32-D:R.i(j+M);return new u(G,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,YT=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=w,Ia=u}).apply(typeof wE<"u"?wE:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qT,tu,XT,Cf,Og,WT,QT,KT;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var _=0;_<g.length;++_){var C=g[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function s(g,_){if(_)e:{var C=i;g=g.split(".");for(var P=0;P<g.length-1;P++){var K=g[P];if(!(K in C))break e;C=C[K]}g=g[g.length-1],P=C[g],_=_(P),_!=P&&_!=null&&e(C,g,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(_){var C=[],P;for(P in _)Object.prototype.hasOwnProperty.call(_,P)&&C.push([P,_[P]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var _=typeof g;return _=="object"&&g!=null||_=="function"}function p(g,_,C){return g.call.apply(g.bind,arguments)}function y(g,_,C){return y=p,y.apply(null,arguments)}function w(g,_){var C=Array.prototype.slice.call(arguments,1);return function(){var P=C.slice();return P.push.apply(P,arguments),g.apply(this,P)}}function T(g,_){function C(){}C.prototype=_.prototype,g.Z=_.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(P,K,te){for(var he=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)he[Be-2]=arguments[Be];return _.prototype[K].apply(P,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const _=g.length;if(_>0){const C=Array(_);for(let P=0;P<_;P++)C[P]=g[P];return C}return[]}function q(g,_){for(let P=1;P<arguments.length;P++){const K=arguments[P];var C=typeof K;if(C=C!="object"?C:K?Array.isArray(K)?"array":C:"null",C=="array"||C=="object"&&typeof K.length=="number"){C=g.length||0;const te=K.length||0;g.length=C+te;for(let he=0;he<te;he++)g[C+he]=K[he]}else g.push(K)}}class X{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function $(g){u.setTimeout(()=>{throw g},0)}function V(){var g=R;let _=null;return g.g&&(_=g.g,g.g=g.g.next,g.g||(g.h=null),_.next=null),_}class L{constructor(){this.h=this.g=null}add(_,C){const P=k.get();P.set(_,C),this.h?this.h.next=P:this.g=P,this.h=P}}var k=new X(()=>new H,g=>g.reset());class H{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,re=!1,R=new L,D=()=>{const g=Promise.resolve(void 0);oe=()=>{g.then(M)}};function M(){for(var g;g=V();){try{g.h.call(g.g)}catch(C){$(C)}var _=k;_.j(g),_.h<100&&(_.h++,g.next=_.g,_.g=g)}re=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(g,_){this.type=g,this.g=this.target=_,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,_=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,_),u.removeEventListener("test",C,_)}catch{}return g}();function F(g){return/^[\s\xa0]*$/.test(g)}function Ge(g,_){G.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,_)}T(Ge,G),Ge.prototype.init=function(g,_){const C=this.type=g.type,P=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=_,_=g.relatedTarget,_||(C=="mouseover"?_=g.fromElement:C=="mouseout"&&(_=g.toElement)),this.relatedTarget=_,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),de=0;function me(g,_,C,P,K){this.listener=g,this.proxy=null,this.src=_,this.type=C,this.capture=!!P,this.ha=K,this.key=++de,this.da=this.fa=!1}function Ne(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ye(g,_,C){for(const P in g)_.call(C,g[P],P,g)}function nt(g,_){for(const C in g)_.call(void 0,g[C],C,g)}function Yi(g){const _={};for(const C in g)_[C]=g[C];return _}const xt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gn(g,_){let C,P;for(let K=1;K<arguments.length;K++){P=arguments[K];for(C in P)g[C]=P[C];for(let te=0;te<xt.length;te++)C=xt[te],Object.prototype.hasOwnProperty.call(P,C)&&(g[C]=P[C])}}function ct(g){this.src=g,this.g={},this.h=0}ct.prototype.add=function(g,_,C,P,K){const te=g.toString();g=this.g[te],g||(g=this.g[te]=[],this.h++);const he=Ce(g,_,P,K);return he>-1?(_=g[he],C||(_.fa=!1)):(_=new me(_,this.src,te,!!P,K),_.fa=C,g.push(_)),_};function ni(g,_){const C=_.type;if(C in g.g){var P=g.g[C],K=Array.prototype.indexOf.call(P,_,void 0),te;(te=K>=0)&&Array.prototype.splice.call(P,K,1),te&&(Ne(_),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Ce(g,_,C,P){for(let K=0;K<g.length;++K){const te=g[K];if(!te.da&&te.listener==_&&te.capture==!!C&&te.ha==P)return K}return-1}var br="closure_lm_"+(Math.random()*1e6|0),Ht={};function qi(g,_,C,P,K){if(Array.isArray(_)){for(let te=0;te<_.length;te++)qi(g,_[te],C,P,K);return null}return C=ft(C),g&&g[ie]?g.J(_,C,d(P)?!!P.capture:!1,K):wi(g,_,C,!1,P,K)}function wi(g,_,C,P,K,te){if(!_)throw Error("Invalid event type");const he=d(K)?!!K.capture:!!K;let Be=hr(g);if(Be||(g[br]=Be=new ct(g)),C=Be.add(_,C,P,he,te),C.proxy)return C;if(P=Cn(),C.proxy=P,P.src=g,P.listener=C,g.addEventListener)j||(K=he),K===void 0&&(K=!1),g.addEventListener(_.toString(),P,K);else if(g.attachEvent)g.attachEvent(ur(_.toString()),P);else if(g.addListener&&g.removeListener)g.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Cn(){function g(C){return _.call(g.src,g.listener,C)}const _=ii;return g}function _i(g,_,C,P,K){if(Array.isArray(_))for(var te=0;te<_.length;te++)_i(g,_[te],C,P,K);else P=d(P)?!!P.capture:!!P,C=ft(C),g&&g[ie]?(g=g.i,te=String(_).toString(),te in g.g&&(_=g.g[te],C=Ce(_,C,P,K),C>-1&&(Ne(_[C]),Array.prototype.splice.call(_,C,1),_.length==0&&(delete g.g[te],g.h--)))):g&&(g=hr(g))&&(_=g.g[_.toString()],g=-1,_&&(g=Ce(_,C,P,K)),(C=g>-1?_[g]:null)&&Xe(C))}function Xe(g){if(typeof g!="number"&&g&&!g.da){var _=g.src;if(_&&_[ie])ni(_.i,g);else{var C=g.type,P=g.proxy;_.removeEventListener?_.removeEventListener(C,P,g.capture):_.detachEvent?_.detachEvent(ur(C),P):_.addListener&&_.removeListener&&_.removeListener(P),(C=hr(_))?(ni(C,g),C.h==0&&(C.src=null,_[br]=null)):Ne(g)}}}function ur(g){return g in Ht?Ht[g]:Ht[g]="on"+g}function ii(g,_){if(g.da)g=!0;else{_=new Ge(_,this);const C=g.listener,P=g.ha||g.src;g.fa&&Xe(g),g=C.call(P,_)}return g}function hr(g){return g=g[br],g instanceof ct?g:null}var Yt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ft(g){return typeof g=="function"?g:(g[Yt]||(g[Yt]=function(_){return g.handleEvent(_)}),g[Yt])}function ve(){z.call(this),this.i=new ct(this),this.M=this,this.G=null}T(ve,z),ve.prototype[ie]=!0,ve.prototype.removeEventListener=function(g,_,C,P){_i(this,g,_,C,P)};function Wt(g,_){var C,P=g.G;if(P)for(C=[];P;P=P.G)C.push(P);if(g=g.M,P=_.type||_,typeof _=="string")_=new G(_,g);else if(_ instanceof G)_.target=_.target||g;else{var K=_;_=new G(P,g),Gn(_,K)}K=!0;let te,he;if(C)for(he=C.length-1;he>=0;he--)te=_.g=C[he],K=xe(te,P,!0,_)&&K;if(te=_.g=g,K=xe(te,P,!0,_)&&K,K=xe(te,P,!1,_)&&K,C)for(he=0;he<C.length;he++)te=_.g=C[he],K=xe(te,P,!1,_)&&K}ve.prototype.N=function(){if(ve.Z.N.call(this),this.i){var g=this.i;for(const _ in g.g){const C=g.g[_];for(let P=0;P<C.length;P++)Ne(C[P]);delete g.g[_],g.h--}}this.G=null},ve.prototype.J=function(g,_,C,P){return this.i.add(String(g),_,!1,C,P)},ve.prototype.K=function(g,_,C,P){return this.i.add(String(g),_,!0,C,P)};function xe(g,_,C,P){if(_=g.i.g[String(_)],!_)return!0;_=_.concat();let K=!0;for(let te=0;te<_.length;++te){const he=_[te];if(he&&!he.da&&he.capture==C){const Be=he.listener,Zt=he.ha||he.src;he.fa&&ni(g.i,he),K=Be.call(Zt,P)!==!1&&K}}return K&&!P.defaultPrevented}function Vs(g,_){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=y(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(g,_||0)}function Us(g){g.g=Vs(()=>{g.g=null,g.i&&(g.i=!1,Us(g))},g.l);const _=g.h;g.h=null,g.m.apply(null,_)}class ri extends z{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Us(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(g){z.call(this),this.h=g,this.g={}}T(fr,z);var Yn=[];function Ka(g){Ye(g.g,function(_,C){this.g.hasOwnProperty(C)&&Xe(_)},g),g.g={}}fr.prototype.N=function(){fr.Z.N.call(this),Ka(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var si=u.JSON.stringify,tn=u.JSON.parse,Za=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function is(){}function zo(){}var St={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Q(){G.call(this,"d")}T(Q,G);function ye(){G.call(this,"c")}T(ye,G);var Ae={},Pe=null;function rt(){return Pe=Pe||new ve}Ae.Ia="serverreachability";function wt(g){G.call(this,Ae.Ia,g)}T(wt,G);function vr(g){const _=rt();Wt(_,new wt(_))}Ae.STAT_EVENT="statevent";function st(g,_){G.call(this,Ae.STAT_EVENT,g),this.stat=_}T(st,G);function qt(g){const _=rt();Wt(_,new st(_,g))}Ae.Ja="timingevent";function bc(g,_){G.call(this,Ae.Ja,g),this.size=_}T(bc,G);function Fs(g,_){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},_)}function Ln(){this.g=!0}Ln.prototype.ua=function(){this.g=!1};function vc(g,_,C,P,K,te){g.info(function(){if(g.g)if(te){var he="",Be=te.split("&");for(let gt=0;gt<Be.length;gt++){var Zt=Be[gt].split("=");if(Zt.length>1){const nn=Zt[0];Zt=Zt[1];const Ii=nn.split("_");he=Ii.length>=2&&Ii[1]=="type"?he+(nn+"="+Zt+"&"):he+(nn+"=redacted&")}}}else he=null;else he=te;return"XMLHTTP REQ ("+P+") [attempt "+K+"]: "+_+`
`+C+`
`+he})}function Sn(g,_,C,P,K,te,he){g.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+K+"]: "+_+`
`+C+`
`+te+" "+he})}function Ai(g,_,C,P){g.info(function(){return"XMLHTTP TEXT ("+_+"): "+Xi(g,C)+(P?" "+P:"")})}function Ho(g,_){g.info(function(){return"TIMEOUT: "+_})}Ln.prototype.info=function(){};function Xi(g,_){if(!g.g)return _;if(!_)return null;try{const te=JSON.parse(_);if(te){for(g=0;g<te.length;g++)if(Array.isArray(te[g])){var C=te[g];if(!(C.length<2)){var P=C[1];if(Array.isArray(P)&&!(P.length<1)){var K=P[0];if(K!="noop"&&K!="stop"&&K!="close")for(let he=1;he<P.length;he++)P[he]=""}}}}return si(te)}catch{return _}}var Go={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ir={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yo;function bn(){}T(bn,is),bn.prototype.g=function(){return new XMLHttpRequest},Yo=new bn;function Ti(g){return encodeURIComponent(String(g))}function ai(g){var _=1;g=g.split(":");const C=[];for(;_>0&&g.length;)C.push(g.shift()),_--;return g.length&&C.push(g.join(":")),C}function pe(g,_,C,P){this.j=g,this.i=_,this.l=C,this.S=P||1,this.V=new fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rs}function rs(){this.i=null,this.g="",this.h=!1}var qo={},vn={};function Nr(g,_,C){g.M=1,g.A=bi(oi(_)),g.u=C,g.R=!0,Ja(g,null)}function Ja(g,_){g.F=Date.now(),Wo(g),g.B=oi(g.A);var C=g.B,P=g.S;Array.isArray(P)||(P=[String(P)]),Dt(C.i,"t",P),g.C=0,C=g.j.L,g.h=new rs,g.g=$o(g.j,C?_:null,!g.u),g.P>0&&(g.O=new ri(y(g.Y,g,g.g),g.P)),_=g.V,C=g.g,P=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(Yn[0]=K.toString()),K=Yn);for(let te=0;te<K.length;te++){const he=qi(C,K[te],P||_.handleEvent,!1,_.h||_);if(!he)break;_.g[he.key]=he}_=g.J?Yi(g.J):{},g.u?(g.v||(g.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,_)):(g.v="GET",g.g.ea(g.B,g.v,null,_)),vr(),vc(g.i,g.v,g.B,g.l,g.S,g.u)}pe.prototype.ba=function(g){g=g.target;const _=this.O;_&&dr(g)==3?_.j():this.Y(g)},pe.prototype.Y=function(g){try{if(g==this.g)e:{const Be=dr(this.g),Zt=this.g.ya(),gt=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||Gs(this.g)))){this.K||Be!=4||Zt==7||(Zt==8||gt<=0?vr(3):vr(2)),xn(this);var _=this.g.ca();this.X=_;var C=Xo(this);if(this.o=_==200,Sn(this.i,this.v,this.B,this.l,this.S,Be,_),this.o){if(this.U&&!this.L){t:{if(this.g){var P,K=this.g;if((P=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(P)){var te=P;break t}}te=null}if(g=te)Ai(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wi(this,g);else{this.o=!1,this.m=3,qt(12),Rr(this),yt(this);break e}}if(this.R){g=!0;let nn;for(;!this.K&&this.C<C.length;)if(nn=_0(this,C),nn==vn){Be==4&&(this.m=4,qt(14),g=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==qo){this.m=4,qt(15),Ai(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ai(this.i,this.l,nn,null),Wi(this,nn);if(Ci(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||C.length!=0||this.h.h||(this.m=1,qt(16),g=!1),this.o=this.o&&g,!g)Ai(this.i,this.l,C,"[Invalid Chunked Response]"),Rr(this),yt(this);else if(C.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),ee(he),he.P=!0,qt(11))}}else Ai(this.i,this.l,C,null),Wi(this,C);Be==4&&Rr(this),this.o&&!this.K&&(Be==4?ro(this.j,this):(this.o=!1,Wo(this)))}else to(this.g),_==400&&C.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),Rr(this),yt(this)}}}catch{}finally{}};function Xo(g){if(!Ci(g))return g.g.la();const _=Gs(g.g);if(_==="")return"";let C="";const P=_.length,K=dr(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Rr(g),yt(g),"";g.h.i=new u.TextDecoder}for(let te=0;te<P;te++)g.h.h=!0,C+=g.h.i.decode(_[te],{stream:!(K&&te==P-1)});return _.length=0,g.h.g+=C,g.C=0,g.h.g}function Ci(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function _0(g,_){var C=g.C,P=_.indexOf(`
`,C);return P==-1?vn:(C=Number(_.substring(C,P)),isNaN(C)?qo:(P+=1,P+C>_.length?vn:(_=_.slice(P,P+C),g.C=P+C,_)))}pe.prototype.cancel=function(){this.K=!0,Rr(this)};function Wo(g){g.T=Date.now()+g.H,Si(g,g.H)}function Si(g,_){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Fs(y(g.aa,g),_)}function xn(g){g.D&&(u.clearTimeout(g.D),g.D=null)}pe.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Ho(this.i,this.B),this.M!=2&&(vr(),qt(17)),Rr(this),this.m=2,yt(this)):Si(this,this.T-g)};function yt(g){g.j.I==0||g.K||ro(g.j,g)}function Rr(g){xn(g);var _=g.O;_&&typeof _.dispose=="function"&&_.dispose(),g.O=null,Ka(g.V),g.g&&(_=g.g,g.g=null,_.abort(),_.dispose())}function Wi(g,_){try{var C=g.j;if(C.I!=0&&(C.g==g||Mr(C.h,g))){if(!g.L&&Mr(C.h,g)&&C.I==3){try{var P=C.Ba.g.parse(_)}catch{P=null}if(Array.isArray(P)&&P.length==3){var K=P;if(K[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Qt(C),no(C);else break e;Bc(C),qt(18)}}else C.xa=K[1],0<C.xa-C.K&&K[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Fs(y(C.Va,C),6e3));kt(C.h)<=1&&C.ta&&(C.ta=void 0)}else ls(C,11)}else if((g.L||C.g==g)&&Qt(C),!F(_))for(K=C.Ba.g.parse(_),_=0;_<K.length;_++){let gt=K[_];const nn=gt[0];if(!(nn<=C.K))if(C.K=nn,gt=gt[1],C.I==2)if(gt[0]=="c"){C.M=gt[1],C.ba=gt[2];const Ii=gt[3];Ii!=null&&(C.ka=Ii,C.j.info("VER="+C.ka));const cs=gt[4];cs!=null&&(C.za=cs,C.j.info("SVER="+C.za));const Zn=gt[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(P=1.5*Zn,C.O=P,C.j.info("backChannelRequestTimeoutMs_="+P)),P=C;const Zi=g.g;if(Zi){const el=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(el){var te=P.h;te.g||el.indexOf("spdy")==-1&&el.indexOf("quic")==-1&&el.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Nc(te,te.h),te.h=null))}if(P.G){const us=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;us&&(P.wa=us,Oe(P.J,P.G,us))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),P=C;var he=g;if(P.na=Rh(P,P.L?P.ba:null,P.W),he.L){ut(P.h,he);var Be=he,Zt=P.O;Zt&&(Be.H=Zt),Be.D&&(xn(Be),Wo(Be)),P.g=he}else gr(P);C.i.length>0&&Jo(C)}else gt[0]!="stop"&&gt[0]!="close"||ls(C,7);else C.I==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?ls(C,7):Zo(C):gt[0]!="noop"&&C.l&&C.l.qa(gt),C.A=0)}}vr(4)}catch{}}var Ic=class{constructor(g,_){this.g=g,this.map=_}};function ce(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sh(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function kt(g){return g.h?1:g.g?g.g.size:0}function Mr(g,_){return g.h?g.h==_:g.g?g.g.has(_):!1}function Nc(g,_){g.g?g.g.add(_):g.h=_}function ut(g,_){g.h&&g.h==_?g.h=null:g.g&&g.g.has(_)&&g.g.delete(_)}ce.prototype.cancel=function(){if(this.i=at(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function at(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let _=g.i;for(const C of g.g.values())_=_.concat(C.G);return _}return I(g.i)}var qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rc(g,_){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const P=g[C].indexOf("=");let K,te=null;P>=0?(K=g[C].substring(0,P),te=g[C].substring(P+1)):K=g[C],_(K,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Qi(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;g instanceof Qi?(this.l=g.l,Bt(this,g.j),this.o=g.o,this.g=g.g,li(this,g.u),this.h=g.h,Mc(this,Dc(g.i)),this.m=g.m):g&&(_=String(g).match(qe))?(this.l=!1,Bt(this,_[1]||"",!0),this.o=$a(_[2]||""),this.g=$a(_[3]||"",!0),li(this,_[4]),this.h=$a(_[5]||"",!0),Mc(this,_[6]||"",!0),this.m=$a(_[7]||"")):(this.l=!1,this.i=new In(null,this.l))}Qi.prototype.toString=function(){const g=[];var _=this.j;_&&g.push(Ki(_,wn,!0),":");var C=this.g;return(C||_=="file")&&(g.push("//"),(_=this.o)&&g.push(Ki(_,wn,!0),"@"),g.push(Ti(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Ki(C,C.charAt(0)=="/"?B:J,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Ki(C,on)),g.join("")},Qi.prototype.resolve=function(g){const _=oi(this);let C=!!g.j;C?Bt(_,g.j):C=!!g.o,C?_.o=g.o:C=!!g.g,C?_.g=g.g:C=g.u!=null;var P=g.h;if(C)li(_,g.u);else if(C=!!g.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var K=_.h.lastIndexOf("/");K!=-1&&(P=_.h.slice(0,K+1)+P)}if(K=P,K==".."||K==".")P="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){P=K.lastIndexOf("/",0)==0,K=K.split("/");const te=[];for(let he=0;he<K.length;){const Be=K[he++];Be=="."?P&&he==K.length&&te.push(""):Be==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),P&&he==K.length&&te.push("")):(te.push(Be),P=!0)}P=te.join("/")}else P=K}return C?_.h=P:C=g.i.toString()!=="",C?Mc(_,Dc(g.i)):C=!!g.m,C&&(_.m=g.m),_};function oi(g){return new Qi(g)}function Bt(g,_,C){g.j=C?$a(_,!0):_,g.j&&(g.j=g.j.replace(/:$/,""))}function li(g,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);g.u=_}else g.u=null}function Mc(g,_,C){_ instanceof In?(g.i=_,Oc(g.i,g.l)):(C||(_=Ki(_,Te)),g.i=new In(_,g.l))}function Oe(g,_,C){g.i.set(_,C)}function bi(g){return Oe(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function $a(g,_){return g?_?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ki(g,_,C){return typeof g=="string"?(g=encodeURI(g).replace(_,bt),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function bt(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var wn=/[#\/\?@]/g,J=/[#\?:]/g,B=/[#\?]/g,Te=/[#\?@]/g,on=/#/g;function In(g,_){this.h=this.g=null,this.i=g||null,this.j=!!_}function ss(g){g.g||(g.g=new Map,g.h=0,g.i&&Rc(g.i,function(_,C){g.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=In.prototype,t.add=function(g,_){ss(this),this.i=null,g=js(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(_),this.h+=1,this};function Qo(g,_){ss(g),_=js(g,_),g.g.has(_)&&(g.i=null,g.h-=g.g.get(_).length,g.g.delete(_))}function Kn(g,_){return ss(g),_=js(g,_),g.g.has(_)}t.forEach=function(g,_){ss(this),this.g.forEach(function(C,P){C.forEach(function(K){g.call(_,K,P,this)},this)},this)};function Se(g,_){ss(g);let C=[];if(typeof _=="string")Kn(g,_)&&(C=C.concat(g.g.get(js(g,_))));else for(g=Array.from(g.g.values()),_=0;_<g.length;_++)C=C.concat(g[_]);return C}t.set=function(g,_){return ss(this),this.i=null,g=js(this,g),Kn(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[_]),this.h+=1,this},t.get=function(g,_){return g?(g=Se(this,g),g.length>0?String(g[0]):_):_};function Dt(g,_,C){Qo(g,_),C.length>0&&(g.i=null,g.g.set(js(g,_),I(C)),g.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],_=Array.from(this.g.keys());for(let P=0;P<_.length;P++){var C=_[P];const K=Ti(C);C=Se(this,C);for(let te=0;te<C.length;te++){let he=K;C[te]!==""&&(he+="="+Ti(C[te])),g.push(he)}}return this.i=g.join("&")};function Dc(g){const _=new In;return _.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),_}function js(g,_){return _=String(_),g.j&&(_=_.toLowerCase()),_}function Oc(g,_){_&&!g.j&&(ss(g),g.i=null,g.g.forEach(function(C,P){const K=P.toLowerCase();P!=K&&(Qo(this,P),Dt(this,K,C))},g)),g.j=_}function Ko(g,_){const C=new Ln;if(u.Image){const P=new Image;P.onload=w(Dr,C,"TestLoadImage: loaded",!0,_,P),P.onerror=w(Dr,C,"TestLoadImage: error",!1,_,P),P.onabort=w(Dr,C,"TestLoadImage: abort",!1,_,P),P.ontimeout=w(Dr,C,"TestLoadImage: timeout",!1,_,P),u.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=g}else _(!1)}function Lc(g,_){const C=new Ln,P=new AbortController,K=setTimeout(()=>{P.abort(),Dr(C,"TestPingServer: timeout",!1,_)},1e4);fetch(g,{signal:P.signal}).then(te=>{clearTimeout(K),te.ok?Dr(C,"TestPingServer: ok",!0,_):Dr(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(K),Dr(C,"TestPingServer: error",!1,_)})}function Dr(g,_,C,P,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),P(C)}catch{}}function ln(){this.g=new Za}function as(g){this.i=g.Sb||null,this.h=g.ab||!1}T(as,is),as.prototype.g=function(){return new vi(this.i,this.h)};function vi(g,_){ve.call(this),this.H=g,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(vi,ve),t=vi.prototype,t.open=function(g,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=_,this.readyState=1,Le(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(_.body=g),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Le(this)),this.g&&(this.readyState=3,Le(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ie(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ie(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var _=g.value?g.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!g.done}))&&(this.response=this.responseText+=_)}g.done?eo(this):Le(this),this.readyState==3&&Ie(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,eo(this))},t.Na=function(g){this.g&&(this.response=g,eo(this))},t.ga=function(){this.g&&eo(this)};function eo(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Le(g)}t.setRequestHeader=function(g,_){this.A.append(g,_)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=_.next();return g.join(`\r
`)};function Le(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function cn(g){let _="";return Ye(g,function(C,P){_+=P,_+=":",_+=C,_+=`\r
`}),_}function Pc(g,_,C){e:{for(P in C){var P=!1;break e}P=!0}P||(C=cn(C),typeof g=="string"?C!=null&&Ti(C):Oe(g,_,C))}function Ot(g){ve.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Ot,ve);var bh=/^https?$/i,os=["POST","PUT"];t=Ot.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,_,C,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);_=_?_.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yo.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(g),!0),this.B=!1}catch(te){vh(this,te);return}if(g=C||"",C=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var K in P)C.set(K,P[K]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const te of P.keys())C.set(te,P.get(te));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(C.keys()).find(te=>te.toLowerCase()=="content-type"),K=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(os,_,void 0)>=0)||P||K||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,he]of C)this.g.setRequestHeader(te,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(te){vh(this,te)}};function vh(g,_){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=_,g.o=5,zs(g),Or(g)}function zs(g){g.A||(g.A=!0,Wt(g,"complete"),Wt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Wt(this,"complete"),Wt(this,"abort"),Or(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Or(this,!0)),Ot.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Hs(this):this.Xa())},t.Xa=function(){Hs(this)};function Hs(g){if(g.h&&typeof a<"u"){if(g.v&&dr(g)==4)setTimeout(g.Ca.bind(g),0);else if(Wt(g,"readystatechange"),dr(g)==4){g.h=!1;try{const te=g.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var P;if(P=te===0){let he=String(g.D).match(qe)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),P=!bh.test(he?he.toLowerCase():"")}C=P}if(C)Wt(g,"complete"),Wt(g,"success");else{g.o=6;try{var K=dr(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",zs(g)}}finally{Or(g)}}}}function Or(g,_){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,_||Wt(g,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function dr(g){return g.g?g.g.readyState:0}t.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var _=this.g.responseText;return g&&_.indexOf(g)==0&&(_=_.substring(g.length)),tn(_)}};function Gs(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function to(g){const _={};g=(g.g&&dr(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<g.length;P++){if(F(g[P]))continue;var C=ai(g[P]);const K=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const te=_[K]||[];_[K]=te,te.push(C)}nt(_,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function un(g,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||_}function kc(g){this.za=0,this.i=[],this.j=new Ln,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=un("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=un("baseRetryDelayMs",5e3,g),this.Za=un("retryDelaySeedMs",1e4,g),this.Ta=un("forwardChannelMaxRetries",2,g),this.va=un("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new ce(g&&g.concurrentRequestLimit),this.Ba=new ln,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=kc.prototype,t.ka=8,t.I=1,t.connect=function(g,_,C,P){qt(0),this.W=g,this.H=_||{},C&&P!==void 0&&(this.H.OSID=C,this.H.OAID=P),this.F=this.X,this.J=Rh(this,null,this.W),Jo(this)};function Zo(g){if(Ih(g),g.I==3){var _=g.V++,C=oi(g.J);if(Oe(C,"SID",g.M),Oe(C,"RID",_),Oe(C,"TYPE","terminate"),Ys(g,C),_=new pe(g,g.j,_),_.M=2,_.A=bi(oi(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=_.A,C=!0),C||(_.g=$o(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Wo(_)}Nh(g)}function no(g){g.g&&(ee(g),g.g.cancel(),g.g=null)}function Ih(g){no(g),g.v&&(u.clearTimeout(g.v),g.v=null),Qt(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Jo(g){if(!Sh(g.h)&&!g.m){g.m=!0;var _=g.Ea;oe||D(),re||(oe(),re=!0),R.add(_,g),g.D=0}}function A0(g,_){return kt(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=_.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Fs(y(g.Ea,g,_),Vc(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new pe(this,this.j,g);let te=this.o;if(this.U&&(te?(te=Yi(te),Gn(te,this.U)):te=this.U),this.u!==null||this.R||(K.J=te,te=null),this.S)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var P=this.i[C];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(_+=P,_>4096){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=io(this,K,_),C=oi(this.J),Oe(C,"RID",g),Oe(C,"CVER",22),this.G&&Oe(C,"X-HTTP-Session-Id",this.G),Ys(this,C),te&&(this.R?_="headers="+Ti(cn(te))+"&"+_:this.u&&Pc(C,this.u,te)),Nc(this.h,K),this.Ra&&Oe(C,"TYPE","init"),this.S?(Oe(C,"$req",_),Oe(C,"SID","null"),K.U=!0,Nr(K,C,null)):Nr(K,C,_),this.I=2}}else this.I==3&&(g?dt(this,g):this.i.length==0||Sh(this.h)||dt(this))};function dt(g,_){var C;_?C=_.l:C=g.V++;const P=oi(g.J);Oe(P,"SID",g.M),Oe(P,"RID",C),Oe(P,"AID",g.K),Ys(g,P),g.u&&g.o&&Pc(P,g.u,g.o),C=new pe(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),_&&(g.i=_.G.concat(g.i)),_=io(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Nc(g.h,C),Nr(C,P,_)}function Ys(g,_){g.H&&Ye(g.H,function(C,P){Oe(_,P,C)}),g.l&&Ye({},function(C,P){Oe(_,P,C)})}function io(g,_,C){C=Math.min(g.i.length,C);const P=g.l?y(g.l.Ka,g.l,g):null;e:{var K=g.i;let Be=-1;for(;;){const Zt=["count="+C];Be==-1?C>0?(Be=K[0].g,Zt.push("ofs="+Be)):Be=0:Zt.push("ofs="+Be);let gt=!0;for(let nn=0;nn<C;nn++){var te=K[nn].g;const Ii=K[nn].map;if(te-=Be,te<0)Be=Math.max(0,K[nn].g-100),gt=!1;else try{te="req"+te+"_"||"";try{var he=Ii instanceof Map?Ii:Object.entries(Ii);for(const[cs,Zn]of he){let Zi=Zn;d(Zn)&&(Zi=si(Zn)),Zt.push(te+cs+"="+encodeURIComponent(Zi))}}catch(cs){throw Zt.push(te+"type="+encodeURIComponent("_badmap")),cs}}catch{P&&P(Ii)}}if(gt){he=Zt.join("&");break e}}he=void 0}return g=g.i.splice(0,C),_.G=g,he}function gr(g){if(!g.g&&!g.v){g.Y=1;var _=g.Da;oe||D(),re||(oe(),re=!0),R.add(_,g),g.A=0}}function Bc(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Fs(y(g.Da,g),Vc(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,Fe(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Fs(y(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),no(this),Fe(this))};function ee(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function Fe(g){g.g=new pe(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var _=oi(g.na);Oe(_,"RID","rpc"),Oe(_,"SID",g.M),Oe(_,"AID",g.K),Oe(_,"CI",g.F?"0":"1"),!g.F&&g.ia&&Oe(_,"TO",g.ia),Oe(_,"TYPE","xmlhttp"),Ys(g,_),g.u&&g.o&&Pc(_,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=bi(oi(_)),C.u=null,C.R=!0,Ja(C,g)}t.Va=function(){this.C!=null&&(this.C=null,no(this),Bc(this),qt(19))};function Qt(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function ro(g,_){var C=null;if(g.g==_){Qt(g),ee(g),g.g=null;var P=2}else if(Mr(g.h,_))C=_.G,ut(g.h,_),P=1;else return;if(g.I!=0){if(_.o)if(P==1){C=_.u?_.u.length:0,_=Date.now()-_.F;var K=g.D;P=rt(),Wt(P,new bc(P,C)),Jo(g)}else gr(g);else if(K=_.m,K==3||K==0&&_.X>0||!(P==1&&A0(g,_)||P==2&&Bc(g)))switch(C&&C.length>0&&(_=g.h,_.i=_.i.concat(C)),K){case 1:ls(g,5);break;case 4:ls(g,10);break;case 3:ls(g,6);break;default:ls(g,2)}}}function Vc(g,_){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*_}function ls(g,_){if(g.j.info("Error code "+_),_==2){var C=y(g.bb,g),P=g.Ua;const K=!P;P=new Qi(P||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Bt(P,"https"),bi(P),K?Ko(P.toString(),C):Lc(P.toString(),C)}else qt(2);g.I=0,g.l&&g.l.pa(_),Nh(g),Ih(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Nh(g){if(g.I=0,g.ja=[],g.l){const _=at(g.h);(_.length!=0||g.i.length!=0)&&(q(g.ja,_),q(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function Rh(g,_,C){var P=C instanceof Qi?oi(C):new Qi(C);if(P.g!="")_&&(P.g=_+"."+P.g),li(P,P.u);else{var K=u.location;P=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;const te=new Qi(null);P&&Bt(te,P),_&&(te.g=_),K&&li(te,K),C&&(te.h=C),P=te}return C=g.G,_=g.wa,C&&_&&Oe(P,C,_),Oe(P,"VER",g.ka),Ys(g,P),P}function $o(g,_,C){if(_&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=g.Aa&&!g.ma?new Ot(new as({ab:C})):new Ot(g.ma),_.Fa(g.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kt(){}t=Kt.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qs(){}qs.prototype.g=function(g,_){return new Ke(g,_)};function Ke(g,_){ve.call(this),this.g=new kc(_),this.l=g,this.h=_&&_.messageUrlParams||null,g=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(g?g["X-WebChannel-Content-Type"]=_.messageContentType:g={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(g?g["X-WebChannel-Client-Profile"]=_.sa:g={"X-WebChannel-Client-Profile":_.sa}),this.g.U=g,(g=_&&_.Qb)&&!F(g)&&(this.g.u=g),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.G=_,g=this.h,g!==null&&_ in g&&(g=this.h,_ in g&&delete g[_])),this.j=new ot(this)}T(Ke,ve),Ke.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){Zo(this.g)},Ke.prototype.o=function(g){var _=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=si(g),g=C);_.i.push(new Ic(_.Ya++,g)),_.I==3&&Jo(_)},Ke.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,Ke.Z.N.call(this)};function so(g){Q.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var _=g.__sm__;if(_){e:{for(const C in _){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,_=_!==null&&g in _?_[g]:void 0),this.data=_}else this.data=g}T(so,Q);function Lr(){ye.call(this),this.status=1}T(Lr,ye);function ot(g){this.g=g}T(ot,Kt),ot.prototype.ra=function(){Wt(this.g,"a")},ot.prototype.qa=function(g){Wt(this.g,new so(g))},ot.prototype.pa=function(g){Wt(this.g,new Lr)},ot.prototype.oa=function(){Wt(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,KT=function(){return new qs},QT=function(){return rt()},WT=Ae,Og={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Go.NO_ERROR=0,Go.TIMEOUT=8,Go.HTTP_ERROR=6,Cf=Go,Ir.COMPLETE="complete",XT=Ir,zo.EventType=St,St.OPEN="a",St.CLOSE="b",St.ERROR="c",St.MESSAGE="d",ve.prototype.listen=ve.prototype.J,tu=zo,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,qT=Ot}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const _E="@firebase/firestore",AE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new lp("@firebase/firestore");function cl(){return Mo.logLevel}function we(t,...e){if(Mo.logLevel<=Je.DEBUG){const n=e.map(xp);Mo.debug(`Firestore (${_c}): ${t}`,...n)}}function Ls(t,...e){if(Mo.logLevel<=Je.ERROR){const n=e.map(xp);Mo.error(`Firestore (${_c}): ${t}`,...n)}}function $l(t,...e){if(Mo.logLevel<=Je.WARN){const n=e.map(xp);Mo.warn(`Firestore (${_c}): ${t}`,...n)}}function xp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,ZT(t,i,n)}function ZT(t,e,n){let i=`FIRESTORE (${_c}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ls(i),new Error(i)}function Et(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||ZT(e,s,i)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xn.UNAUTHENTICATED))}shutdown(){}}class s8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a8{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Et(this.o===void 0,42304);let i=this.i;const s=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let a=new Na;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Na,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await s(this.currentUser)})},d=p=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Na)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Et(typeof i.accessToken=="string",31837,{l:i}),new JT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class o8{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l8{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new o8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Et(this.o===void 0,3512);const i=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,we("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new TE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new TE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=u8(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function $e(t,e){return t<e?-1:t>e?1:0}function Lg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),a=e.charAt(i);if(s!==a)return m1(s)===m1(a)?$e(s,a):m1(s)?1:-1}return $e(t.length,e.length)}const h8=55296,f8=57343;function m1(t){const e=t.charCodeAt(0);return e>=h8&&e<=f8}function ec(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="__name__";class Ur{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=Ur.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return $e(e.length,n.length)}static compareSegments(e,n){const i=Ur.isNumericId(e),s=Ur.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Ur.extractNumericId(e).compare(Ur.extractNumericId(n)):Lg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ia.fromString(e.substring(4,e.length-2))}}class Lt extends Ur{construct(e,n,i){return new Lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Lt(n)}static emptyPath(){return new Lt([])}}const d8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends Ur{construct(e,n,i){return new Fn(e,n,i)}static isValidIdentifier(e){return d8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CE}static keyField(){return new Fn([CE])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ee(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Ee(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ee(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(i+=d,s++):(a(),s++)}if(a(),u)throw new Ee(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(n)}static emptyPath(){return new Fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(Lt.fromString(e))}static fromName(e){return new be(Lt.fromString(e).popFirst(5))}static empty(){return new be(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e,n){if(!n)throw new Ee(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g8(t,e,n,i){if(e===!0&&i===!0)throw new Ee(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SE(t){if(!be.isDocumentKey(t))throw new Ee(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bE(t){if(be.isDocumentKey(t))throw new Ee(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function t0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Wr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=t0(t);throw new Ee(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){const n={typeString:t};return e&&(n.value=e),n}function yh(t,e){if(!eC(t))throw new Ee(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const u=t[i];if(s&&typeof u!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Ee(se.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=-62135596800,IE=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*IE);return new Rt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vE)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IE}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yh(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:yn("string",Rt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Rt(0,0))}static max(){return new ke(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=-1;function m8(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(i===1e9?new Rt(n+1,0):new Rt(n,i));return new Pa(s,be.empty(),e)}function p8(t){return new Pa(t.readTime,t.key,Yu)}class Pa{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Pa(ke.min(),be.empty(),Yu)}static max(){return new Pa(ke.max(),be.empty(),Yu)}}function y8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==E8)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):le.reject(n)}static resolve(e){return new le((n,i)=>{n(e)})}static reject(e){return new le((n,i)=>{i(e)})}static waitFor(e){return new le((n,i)=>{let s=0,a=0,u=!1;e.forEach(d=>{++s,d.next(()=>{++a,u&&a===s&&n()},p=>i(p))}),u=!0,a===s&&n()})}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next(s=>s?le.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,a)=>{i.push(n.call(this,s,a))}),this.waitFor(i)}static mapArray(e,n){return new le((i,s)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;n(e[y]).next(w=>{u[y]=w,++d,d===a&&i(u)},w=>s(w))}})}static doWhile(e,n){return new le((i,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):i()};a()})}}function w8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}n0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=-1;function i0(t){return t==null}function gd(t){return t===0&&1/t==-1/0}function _8(t){return typeof t=="number"&&Number.isInteger(t)&&!gd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="";function A8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=NE(e)),e=T8(t.get(n),e);return NE(e)}function T8(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case tC:n+="";break;default:n+=a}}return n}function NE(t){return t+tC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new Xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??Bn.RED,this.left=s??Bn.EMPTY,this.right=a??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new Bn(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ME(this.data.getIterator())}getIteratorFrom(e){return new ME(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new An(this.comparator);return n.data=e,n}}class ME{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new Bi([])}unionWith(e){let n=new An(Fn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Bi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new iC("Invalid base64 string: "+a):a}}(e);return new Hn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const C8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(t){if(Et(!!t,39018),typeof t=="string"){let e=0;const n=C8.exec(t);if(Et(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rn(t.seconds),nanos:rn(t.nanos)}}function rn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ba(t){return typeof t=="string"?Hn.fromBase64String(t):Hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="server_timestamp",sC="__type__",aC="__previous_value__",oC="__local_write_time__";function Ap(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sC])==null?void 0:i.stringValue)===rC}function r0(t){const e=t.mapValue.fields[aC];return Ap(e)?r0(e):e}function qu(t){const e=ka(t.mapValue.fields[oC].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,n,i,s,a,u,d,p,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=w}}const md="(default)";class Xu{constructor(e,n){this.projectId=e,this.database=n||md}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===md}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__type__",b8="__max__",Jh={mapValue:{}},cC="__vector__",pd="value";function Va(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ap(t)?4:I8(t)?9007199254740991:v8(t)?10:11:Me(28295,{value:t})}function $r(t,e){if(t===e)return!0;const n=Va(t);if(n!==Va(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qu(t).isEqual(qu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=ka(s.timestampValue),d=ka(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Ba(s.bytesValue).isEqual(Ba(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return rn(s.geoPointValue.latitude)===rn(a.geoPointValue.latitude)&&rn(s.geoPointValue.longitude)===rn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return rn(s.integerValue)===rn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=rn(s.doubleValue),d=rn(a.doubleValue);return u===d?gd(u)===gd(d):isNaN(u)&&isNaN(d)}return!1}(t,e);case 9:return ec(t.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(RE(u)!==RE(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!$r(u[p],d[p])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Wu(t,e){return(t.values||[]).find(n=>$r(n,e))!==void 0}function tc(t,e){if(t===e)return 0;const n=Va(t),i=Va(e);if(n!==i)return $e(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(a,u){const d=rn(a.integerValue||a.doubleValue),p=rn(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(t,e);case 3:return DE(t.timestampValue,e.timestampValue);case 4:return DE(qu(t),qu(e));case 5:return Lg(t.stringValue,e.stringValue);case 6:return function(a,u){const d=Ba(a),p=Ba(u);return d.compareTo(p)}(t.bytesValue,e.bytesValue);case 7:return function(a,u){const d=a.split("/"),p=u.split("/");for(let y=0;y<d.length&&y<p.length;y++){const w=$e(d[y],p[y]);if(w!==0)return w}return $e(d.length,p.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,u){const d=$e(rn(a.latitude),rn(u.latitude));return d!==0?d:$e(rn(a.longitude),rn(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OE(t.arrayValue,e.arrayValue);case 10:return function(a,u){var S,I,q,X;const d=a.fields||{},p=u.fields||{},y=(S=d[pd])==null?void 0:S.arrayValue,w=(I=p[pd])==null?void 0:I.arrayValue,T=$e(((q=y==null?void 0:y.values)==null?void 0:q.length)||0,((X=w==null?void 0:w.values)==null?void 0:X.length)||0);return T!==0?T:OE(y,w)}(t.mapValue,e.mapValue);case 11:return function(a,u){if(a===Jh.mapValue&&u===Jh.mapValue)return 0;if(a===Jh.mapValue)return 1;if(u===Jh.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=u.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let T=0;T<p.length&&T<w.length;++T){const S=Lg(p[T],w[T]);if(S!==0)return S;const I=tc(d[p[T]],y[w[T]]);if(I!==0)return I}return $e(p.length,w.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{he:n})}}function DE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=ka(t),i=ka(e),s=$e(n.seconds,i.seconds);return s!==0?s:$e(n.nanos,i.nanos)}function OE(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=tc(n[s],i[s]);if(a)return a}return $e(n.length,i.length)}function nc(t){return Pg(t)}function Pg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ka(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ba(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=Pg(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const u of i)a?a=!1:s+=",",s+=`${u}:${Pg(n.fields[u])}`;return s+"}"}(t.mapValue):Me(61005,{value:t})}function Sf(t){switch(Va(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=r0(t);return e?16+Sf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ba(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+Sf(a),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return qa(i.fields,(a,u)=>{s+=a.length+Sf(u)}),s}(t.mapValue);default:throw Me(13486,{value:t})}}function LE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kg(t){return!!t&&"integerValue"in t}function Tp(t){return!!t&&"arrayValue"in t}function PE(t){return!!t&&"nullValue"in t}function kE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bf(t){return!!t&&"mapValue"in t}function v8(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lC])==null?void 0:i.stringValue)===cC}function Au(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return qa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Au(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Au(t.arrayValue.values[n]);return e}return{...t}}function I8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===b8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!bf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(n)}setAll(e){let n=Fn.emptyPath(),i={},s=[];e.forEach((u,d)=>{if(!n.isImmediateParentOf(d)){const p=this.getFieldsMap(n);this.applyChanges(p,i,s),i={},s=[],n=d.popLast()}u?i[d.lastSegment()]=Au(u):s.push(d.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());bf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];bf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){qa(n,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new pi(Au(this.value))}}function uC(t){const e=[];return qa(t.fields,(n,i)=>{const s=new Fn([n]);if(bf(i)){const a=uC(i.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)}),new Bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n,i,s,a,u,d){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Wn(e,0,ke.min(),ke.min(),ke.min(),pi.empty(),0)}static newFoundDocument(e,n,i,s){return new Wn(e,1,n,ke.min(),i,s,0)}static newNoDocument(e,n){return new Wn(e,2,n,ke.min(),ke.min(),pi.empty(),0)}static newUnknownDocument(e,n){return new Wn(e,3,n,ke.min(),ke.min(),pi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.position=e,this.inclusive=n}}function BE(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],u=t.position[s];if(a.field.isKeyField()?i=be.comparator(be.fromName(u.referenceValue),n.key):i=tc(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function VE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n="asc"){this.field=e,this.dir=n}}function N8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{}class mn extends hC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new M8(e,n,i):n==="array-contains"?new L8(e,i):n==="in"?new P8(e,i):n==="not-in"?new k8(e,i):n==="array-contains-any"?new B8(e,i):new mn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new D8(e,i):new O8(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tc(n,this.value)):n!==null&&Va(this.value)===Va(n)&&this.matchesComparison(tc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends hC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Tr(e,n)}matches(e){return fC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fC(t){return t.op==="and"}function dC(t){return R8(t)&&fC(t)}function R8(t){for(const e of t.filters)if(e instanceof Tr)return!1;return!0}function Bg(t){if(t instanceof mn)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(dC(t))return t.filters.map(e=>Bg(e)).join(",");{const e=t.filters.map(n=>Bg(n)).join(",");return`${t.op}(${e})`}}function gC(t,e){return t instanceof mn?function(i,s){return s instanceof mn&&i.op===s.op&&i.field.isEqual(s.field)&&$r(i.value,s.value)}(t,e):t instanceof Tr?function(i,s){return s instanceof Tr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,u,d)=>a&&gC(u,s.filters[d]),!0):!1}(t,e):void Me(19439)}function mC(t){return t instanceof mn?function(n){return`${n.field.canonicalString()} ${n.op} ${nc(n.value)}`}(t):t instanceof Tr?function(n){return n.op.toString()+" {"+n.getFilters().map(mC).join(" ,")+"}"}(t):"Filter"}class M8 extends mn{constructor(e,n,i){super(e,n,i),this.key=be.fromName(i.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class D8 extends mn{constructor(e,n){super(e,"in",n),this.keys=pC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class O8 extends mn{constructor(e,n){super(e,"not-in",n),this.keys=pC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>be.fromName(i.referenceValue))}class L8 extends mn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tp(n)&&Wu(n.arrayValue,this.value)}}class P8 extends mn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wu(this.value.arrayValue,n)}}class k8 extends mn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wu(this.value.arrayValue,n)}}class B8 extends mn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Wu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n=null,i=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function UE(t,e=null,n=[],i=[],s=null,a=null,u=null){return new V8(t,e,n,i,s,a,u)}function Cp(t){const e=Ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Bg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),i0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>nc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>nc(i)).join(",")),e.Te=n}return e.Te}function Sp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VE(t.startAt,e.startAt)&&VE(t.endAt,e.endAt)}function Vg(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n=null,i=[],s=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function U8(t,e,n,i,s,a,u,d){return new Cc(t,e,n,i,s,a,u,d)}function bp(t){return new Cc(t)}function FE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yC(t){return t.collectionGroup!==null}function Tu(t){const e=Ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new An(Fn.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Qu(a,i))}),n.has(Fn.keyField().canonicalString())||e.Ie.push(new Qu(Fn.keyField(),i))}return e.Ie}function Qr(t){const e=Ve(t);return e.Ee||(e.Ee=F8(e,Tu(t))),e.Ee}function F8(t,e){if(t.limitType==="F")return UE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Qu(s.field,a)});const n=t.endAt?new yd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new yd(t.startAt.position,t.startAt.inclusive):null;return UE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ug(t,e){const n=t.filters.concat([e]);return new Cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fg(t,e,n){return new Cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function s0(t,e){return Sp(Qr(t),Qr(e))&&t.limitType===e.limitType}function EC(t){return`${Cp(Qr(t))}|lt:${t.limitType}`}function ul(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>mC(s)).join(", ")}]`),i0(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>nc(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>nc(s)).join(",")),`Target(${i})`}(Qr(t))}; limitType=${t.limitType})`}function a0(t,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):be.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,s){for(const a of Tu(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(u,d,p){const y=BE(u,d,p);return u.inclusive?y<=0:y<0}(i.startAt,Tu(i),s)||i.endAt&&!function(u,d,p){const y=BE(u,d,p);return u.inclusive?y>=0:y>0}(i.endAt,Tu(i),s))}(t,e)}function j8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xC(t){return(e,n)=>{let i=!1;for(const s of Tu(t)){const a=z8(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function z8(t,e,n){const i=t.field.isKeyField()?be.comparator(e.key,n.key):function(a,u,d){const p=u.data.field(a),y=d.data.field(a);return p!==null&&y!==null?tc(p,y):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,(n,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=new Xt(be.comparator);function Ps(){return H8}const wC=new Xt(be.comparator);function nu(...t){let e=wC;for(const n of t)e=e.insert(n.key,n);return e}function _C(t){let e=wC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function mo(){return Cu()}function AC(){return Cu()}function Cu(){return new Fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const G8=new Xt(be.comparator),Y8=new An(be.comparator);function et(...t){let e=Y8;for(const n of t)e=e.add(n);return e}const q8=new An($e);function X8(){return q8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gd(e)?"-0":e}}function TC(t){return{integerValue:""+t}}function W8(t,e){return _8(e)?TC(e):vp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this._=void 0}}function Q8(t,e,n){return t instanceof Ed?function(s,a){const u={fields:{[sC]:{stringValue:rC},[oC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Ap(a)&&(a=r0(a)),a&&(u.fields[aC]=a),{mapValue:u}}(n,e):t instanceof Ku?SC(t,e):t instanceof Zu?bC(t,e):function(s,a){const u=CC(s,a),d=jE(u)+jE(s.Ae);return kg(u)&&kg(s.Ae)?TC(d):vp(s.serializer,d)}(t,e)}function K8(t,e,n){return t instanceof Ku?SC(t,e):t instanceof Zu?bC(t,e):n}function CC(t,e){return t instanceof xd?function(i){return kg(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Ed extends o0{}class Ku extends o0{constructor(e){super(),this.elements=e}}function SC(t,e){const n=vC(e);for(const i of t.elements)n.some(s=>$r(s,i))||n.push(i);return{arrayValue:{values:n}}}class Zu extends o0{constructor(e){super(),this.elements=e}}function bC(t,e){let n=vC(e);for(const i of t.elements)n=n.filter(s=>!$r(s,i));return{arrayValue:{values:n}}}class xd extends o0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function jE(t){return rn(t.integerValue||t.doubleValue)}function vC(t){return Tp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Z8(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Ku&&s instanceof Ku||i instanceof Zu&&s instanceof Zu?ec(i.elements,s.elements,$r):i instanceof xd&&s instanceof xd?$r(i.Ae,s.Ae):i instanceof Ed&&s instanceof Ed}(t.transform,e.transform)}class J8{constructor(e,n){this.version=e,this.transformResults=n}}class _r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class l0{}function IC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ip(t.key,_r.none()):new Eh(t.key,t.data,_r.none());{const n=t.data,i=pi.empty();let s=new An(Fn.comparator);for(let a of e.fields)if(!s.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),s=s.add(a)}return new Xa(t.key,i,new Bi(s.toArray()),_r.none())}}function $8(t,e,n){t instanceof Eh?function(s,a,u){const d=s.value.clone(),p=HE(s.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(t,e,n):t instanceof Xa?function(s,a,u){if(!vf(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=HE(s.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(NC(s)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(t,e,n):function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Su(t,e,n,i){return t instanceof Eh?function(a,u,d,p){if(!vf(a.precondition,u))return d;const y=a.value.clone(),w=GE(a.fieldTransforms,p,u);return y.setAll(w),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(t,e,n,i):t instanceof Xa?function(a,u,d,p){if(!vf(a.precondition,u))return d;const y=GE(a.fieldTransforms,p,u),w=u.data;return w.setAll(NC(a)),w.setAll(y),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(T=>T.field))}(t,e,n,i):function(a,u,d){return vf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(t,e,n)}function eR(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=CC(i.transform,s||null);a!=null&&(n===null&&(n=pi.empty()),n.set(i.field,a))}return n||null}function zE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ec(i,s,(a,u)=>Z8(a,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eh extends l0{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xa extends l0{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function NC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function HE(t,e,n){const i=new Map;Et(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],u=a.transform,d=e.data.field(a.field);i.set(a.field,K8(u,d,n[s]))}return i}function GE(t,e,n){const i=new Map;for(const s of t){const a=s.transform,u=n.data.field(s.field);i.set(s.field,Q8(a,u,e))}return i}class Ip extends l0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tR extends l0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&$8(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Su(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Su(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=AC();return this.mutations.forEach(s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=n.has(s.key)?null:d;const p=IC(u,d);p!==null&&i.set(s.key,p),u.isValidDocument()||u.convertToNoDocument(ke.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(n,i)=>zE(n,i))&&ec(this.baseMutations,e.baseMutations,(n,i)=>zE(n,i))}}class Np{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Et(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return G8}();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,i[u].version);return new Np(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,lt;function sR(t){switch(t){case se.OK:return Me(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function RC(t){if(t===void 0)return Ls("GRPC error has no .code"),se.UNKNOWN;switch(t){case hn.OK:return se.OK;case hn.CANCELLED:return se.CANCELLED;case hn.UNKNOWN:return se.UNKNOWN;case hn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case hn.INTERNAL:return se.INTERNAL;case hn.UNAVAILABLE:return se.UNAVAILABLE;case hn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case hn.NOT_FOUND:return se.NOT_FOUND;case hn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case hn.ABORTED:return se.ABORTED;case hn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case hn.DATA_LOSS:return se.DATA_LOSS;default:return Me(39323,{code:t})}}(lt=hn||(hn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Ia([4294967295,4294967295],0);function YE(t){const e=aR().encode(t),n=new YT;return n.update(e),new Uint8Array(n.digest())}function qE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ia([n,i],0),new Ia([s,a],0)]}class Rp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new iu(`Invalid padding: ${n}`);if(i<0)throw new iu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new iu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ia.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Ia.fromNumber(i)));return s.compare(oR)===1&&(s=new Ia([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=YE(e),[i,s]=qE(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,s,a);if(!this.we(u))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Rp(a,s,n);return i.forEach(d=>u.insert(d)),u}insert(e){if(this.ge===0)return;const n=YE(e),[i,s]=qE(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,s,a);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,xh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new c0(ke.min(),s,new Xt($e),Ps(),et())}}class xh{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new xh(i,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class MC{constructor(e,n){this.targetId=e,this.Ce=n}}class DC{constructor(e,n,i=Hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class XE{constructor(){this.ve=0,this.Fe=WE(),this.Me=Hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),n=et(),i=et();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Me(38017,{changeType:a})}}),new xh(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=WE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ps(),this.Je=$h(),this.He=$h(),this.Ye=new Xt($e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(Vg(a))if(i===0){const u=new be(a.path);this.et(n,u,Wn.newNoDocument(u,ke.min()))}else Et(i===1,20013,{expectedCount:i});else{const u=this._t(n);if(u!==i){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let u,d;try{u=Ba(i).toUint8Array()}catch(p){if(p instanceof iC)return $l("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Rp(u,s,a)}catch(p){return $l(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,u)=>{const d=this.ot(u);if(d){if(a.current&&Vg(d.target)){const p=new be(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Wn.newNoDocument(p,e))}a.Be&&(n.set(u,a.ke()),a.qe())}});let i=et();this.He.forEach((a,u)=>{let d=!0;u.forEachWhile(p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(a))}),this.je.forEach((a,u)=>u.setReadTime(e));const s=new c0(e,n,this.Ye,this.je,i);return this.je=Ps(),this.Je=$h(),this.He=$h(),this.Ye=new Xt($e),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new XE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new An($e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new An($e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $h(){return new Xt(be.comparator)}function WE(){return new Xt(be.comparator)}const cR={asc:"ASCENDING",desc:"DESCENDING"},uR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hR={and:"AND",or:"OR"};class fR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jg(t,e){return t.useProto3Json||i0(e)?e:{value:e}}function wd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dR(t,e){return wd(t,e.toTimestamp())}function Kr(t){return Et(!!t,49232),ke.fromTimestamp(function(n){const i=ka(n);return new Rt(i.seconds,i.nanos)}(t))}function Mp(t,e){return zg(t,e).canonicalString()}function zg(t,e){const n=function(s){return new Lt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LC(t){const e=Lt.fromString(t);return Et(UC(e),10190,{key:e.toString()}),e}function Hg(t,e){return Mp(t.databaseId,e.path)}function p1(t,e){const n=LC(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(kC(n))}function PC(t,e){return Mp(t.databaseId,e)}function gR(t){const e=LC(t);return e.length===4?Lt.emptyPath():kC(e)}function Gg(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kC(t){return Et(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function QE(t,e,n){return{name:Hg(t,e),fields:n.value.mapValue.fields}}function mR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Me(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(y,w){return y.useProto3Json?(Et(w===void 0||typeof w=="string",58123),Hn.fromBase64String(w||"")):(Et(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Hn.fromUint8Array(w||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(y){const w=y.code===void 0?se.UNKNOWN:RC(y.code);return new Ee(w,y.message||"")}(u);n=new DC(i,s,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=p1(t,i.document.name),a=Kr(i.document.updateTime),u=i.document.createTime?Kr(i.document.createTime):ke.min(),d=new pi({mapValue:{fields:i.document.fields}}),p=Wn.newFoundDocument(s,a,u,d),y=i.targetIds||[],w=i.removedTargetIds||[];n=new If(y,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=p1(t,i.document),a=i.readTime?Kr(i.readTime):ke.min(),u=Wn.newNoDocument(s,a),d=i.removedTargetIds||[];n=new If([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=p1(t,i.document),a=i.removedTargetIds||[];n=new If([],a,s,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,u=new rR(s,a),d=i.targetId;n=new MC(d,u)}}return n}function pR(t,e){let n;if(e instanceof Eh)n={update:QE(t,e.key,e.value)};else if(e instanceof Ip)n={delete:Hg(t,e.key)};else if(e instanceof Xa)n={update:QE(t,e.key,e.data),updateMask:SR(e.fieldMask)};else{if(!(e instanceof tR))return Me(16599,{Vt:e.type});n={verify:Hg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(a,u){const d=u.transform;if(d instanceof Ed)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ku)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Zu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xd)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Me(20930,{transform:u.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:dR(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Me(27497)}(t,e.precondition)),n}function yR(t,e){return t&&t.length>0?(Et(e!==void 0,14353),t.map(n=>function(s,a){let u=s.updateTime?Kr(s.updateTime):Kr(a);return u.isEqual(ke.min())&&(u=Kr(a)),new J8(u,s.transformResults||[])}(n,e))):[]}function ER(t,e){return{documents:[PC(t,e.path)]}}function xR(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=PC(t,s);const a=function(y){if(y.length!==0)return VC(Tr.create(y,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const u=function(y){if(y.length!==0)return y.map(w=>function(S){return{field:hl(S.field),direction:AR(S.dir)}}(w))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=jg(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ft:n,parent:s}}function wR(t){let e=gR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Et(i===1,65062);const w=n.from[0];w.allDescendants?s=w.collectionId:e=e.child(w.collectionId)}let a=[];n.where&&(a=function(T){const S=BC(T);return S instanceof Tr&&dC(S)?S.getFilters():[S]}(n.where));let u=[];n.orderBy&&(u=function(T){return T.map(S=>function(q){return new Qu(fl(q.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(S))}(n.orderBy));let d=null;n.limit&&(d=function(T){let S;return S=typeof T=="object"?T.value:T,i0(S)?null:S}(n.limit));let p=null;n.startAt&&(p=function(T){const S=!!T.before,I=T.values||[];return new yd(I,S)}(n.startAt));let y=null;return n.endAt&&(y=function(T){const S=!T.before,I=T.values||[];return new yd(I,S)}(n.endAt)),U8(e,s,u,a,d,"F",p,y)}function _R(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fl(n.unaryFilter.field);return mn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=fl(n.unaryFilter.field);return mn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fl(n.unaryFilter.field);return mn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fl(n.unaryFilter.field);return mn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return mn.create(fl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tr.create(n.compositeFilter.filters.map(i=>BC(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function AR(t){return cR[t]}function TR(t){return uR[t]}function CR(t){return hR[t]}function hl(t){return{fieldPath:t.canonicalString()}}function fl(t){return Fn.fromServerFormat(t.fieldPath)}function VC(t){return t instanceof mn?function(n){if(n.op==="=="){if(kE(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(PE(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kE(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(PE(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:TR(n.op),value:n.value}}}(t):t instanceof Tr?function(n){const i=n.getFilters().map(s=>VC(s));return i.length===1?i[0]:{compositeFilter:{op:CR(n.op),filters:i}}}(t):Me(54877,{filter:t})}function SR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,i,s,a=ke.min(),u=ke.min(),d=Hn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.yt=e}}function vR(t){const e=wR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.Cn=new NR}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(Pa.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(Pa.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class NR{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new An(Lt.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new An(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FC=41943040;class mi{static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(FC,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ic(0)}static cr(){return new ic(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="LruGarbageCollector",RR=1048576;function JE([t,e],[n,i]){const s=$e(t,n);return s===0?$e(e,i):s}class MR{constructor(e){this.Ir=e,this.buffer=new An(JE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();JE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DR{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(ZE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tc(n)?we(ZE,"Ignoring IndexedDB error during garbage collection: ",n):await Ac(n)}await this.Vr(3e5)})}}class OR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return le.resolve(n0.ce);const i=new MR(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(KE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,a,u,d,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),s=this.params.maximumSequenceNumbersToCollect):s=T,u=Date.now(),this.nthSequenceNumber(e,s))).next(T=>(i=T,d=Date.now(),this.removeTargets(e,i,n))).next(T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),cl()<=Je.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-w}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-w}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:T})))}}function LR(t,e){return new OR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.changes=new Fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Su(i.mutation,s,Bi.empty(),Rt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,et()).next(()=>i))}getLocalViewOfDocuments(e,n,i=et()){const s=mo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(a=>{let u=nu();return a.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const i=mo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,et()))}populateOverlays(e,n,i){const s=[];return i.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((u,d)=>{n.set(u,d)})})}computeViews(e,n,i,s){let a=Ps();const u=Cu(),d=function(){return Cu()}();return n.forEach((p,y)=>{const w=i.get(y.key);s.has(y.key)&&(w===void 0||w.mutation instanceof Xa)?a=a.insert(y.key,y):w!==void 0?(u.set(y.key,w.mutation.getFieldMask()),Su(w.mutation,y,w.mutation.getFieldMask(),Rt.now())):u.set(y.key,Bi.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((y,w)=>u.set(y,w)),n.forEach((y,w)=>d.set(y,new kR(w,u.get(y)??null))),d))}recalculateAndSaveOverlays(e,n){const i=Cu();let s=new Xt((u,d)=>u-d),a=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const d of u)d.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let w=i.get(p)||Bi.empty();w=d.applyToLocalView(y,w),i.set(p,w);const T=(s.get(d.batchId)||et()).add(p);s=s.insert(d.batchId,T)})}).next(()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,w=p.value,T=AC();w.forEach(S=>{if(!a.has(S)){const I=IC(n.get(S),i.get(S));I!==null&&T.set(S,I),a=a.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return le.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(u){return be.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):le.resolve(mo());let d=Yu,p=a;return u.next(y=>le.forEach(y,(w,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(w)?le.resolve():this.remoteDocumentCache.getEntry(e,w).next(S=>{p=p.insert(w,S)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,p,y,et())).next(w=>({batchId:d,changes:_C(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(i=>{let s=nu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let u=nu();return this.indexManager.getCollectionParents(e,a).next(d=>le.forEach(d,p=>{const y=function(T,S){return new Cc(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,s).next(w=>{w.forEach((T,S)=>{u=u.insert(T,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s))).next(u=>{a.forEach((p,y)=>{const w=y.getKey();u.get(w)===null&&(u=u.insert(w,Wn.newInvalidDocument(w)))});let d=nu();return u.forEach((p,y)=>{const w=a.get(p);w!==void 0&&Su(w.mutation,y,Bi.empty(),Rt.now()),a0(n,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Kr(s.createTime)}}(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:vR(s.bundledQuery),readTime:Kr(s.readTime)}}(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.overlays=new Xt(be.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=mo();return le.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,a)=>{this.St(e,n,a)}),le.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const s=mo(),a=n.length+1,u=new be(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>i&&s.set(p.getKey(),p)}return le.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new Xt((y,w)=>y-w);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let w=a.get(y.largestBatchId);w===null&&(w=mo(),a=a.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=mo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=s)););return le.resolve(d)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new iR(n,i));let a=this.qr.get(n);a===void 0&&(a=et(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(){this.Qr=new An(Nn.$r),this.Ur=new An(Nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Nn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Nn(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new be(new Lt([])),i=new Nn(n,e),s=new Nn(n,e+1),a=[];return this.Ur.forEachInRange([i,s],u=>{this.Gr(u),a.push(u.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new Lt([])),i=new Nn(n,e),s=new Nn(n,e+1);let a=et();return this.Ur.forEachInRange([i,s],u=>{a=a.add(u.key)}),a}containsKey(e){const n=new Nn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Nn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||$e(e.Yr,n.Yr)}static Kr(e,n){return $e(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new An(Nn.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new nR(a,n,i,s);this.mutationQueue.push(u);for(const d of s)this.Zr=this.Zr.add(new Nn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(u)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),a=s<0?0:s;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?_p:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Nn(n,0),s=new Nn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],u=>{const d=this.Xr(u.Yr);a.push(d)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new An($e);return n.forEach(s=>{const a=new Nn(s,0),u=new Nn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],d=>{i=i.add(d.Yr)})}),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;be.isDocumentKey(a)||(a=a.child(""));const u=new Nn(new be(a),0);let d=new An($e);return this.Zr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===s&&(d=d.add(p.Yr)),!0)},u),le.resolve(this.ti(d))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Et(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(n.mutations,s=>{const a=new Nn(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Nn(n,0),s=this.Zr.firstAfterOrEqual(i);return le.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.ri=e,this.docs=function(){return new Xt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,u=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():Wn.newInvalidDocument(n))}getEntries(e,n){let i=Ps();return n.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Wn.newInvalidDocument(s))}),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=Ps();const u=n.path,d=new be(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||y8(p8(w),i)<=0||(s.has(w.key)||a0(n,w))&&(a=a.insert(w.key,w.mutableCopy()))}return le.resolve(a)}getAllFromCollectionGroup(e,n,i,s){Me(9500)}ii(e,n){return le.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new HR(this)}getSize(e){return le.resolve(this.size)}}class HR extends PR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.persistence=e,this.si=new Fo(n=>Cp(n),Sp),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new Dp,this.targetCount=0,this.ai=ic.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ic(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.si.forEach((u,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),le.waitFor(a).next(()=>s)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),le.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(u=>{a.push(s.markPotentiallyOrphaned(e,u))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.ui={},this.overlays={},this.ci=new n0(0),this.li=!1,this.li=!0,this.hi=new FR,this.referenceDelegate=e(this),this.Pi=new GR(this),this.indexManager=new IR,this.remoteDocumentCache=function(s){return new zR(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new bR(n),this.Ii=new VR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new jR(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const s=new YR(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return le.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class YR extends x8{constructor(e){super(),this.currentSequenceNumber=e}}class Op{constructor(e){this.persistence=e,this.Ri=new Dp,this.Vi=null}static mi(e){return new Op(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,i=>{const s=be.fromPath(i);return this.gi(e,s).next(a=>{a||n.removeEntry(s,ke.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _d{constructor(e,n){this.persistence=e,this.pi=new Fo(i=>A8(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=LR(this,n)}static mi(e,n){return new _d(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return le.forEach(this.pi,(i,s)=>this.br(e,i,s).next(a=>a?le.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,u=>this.br(e,u,n).next(d=>{d||(i++,a.removeEntry(u,ke.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sf(e.data.value)),n}br(e,n,i){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return le.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=et(),s=et();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Lp(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return SI()?8:w8(Qn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ys(e,n).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ws(e,n,s,i).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new qR;return this.Ss(e,n,u).next(d=>{if(a.result=d,this.Vs)return this.bs(e,n,u,d.size)})}).next(()=>a.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(cl()<=Je.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",ul(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(cl()<=Je.DEBUG&&we("QueryEngine","Query:",ul(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(cl()<=Je.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",ul(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(n))):le.resolve())}ys(e,n){if(FE(n))return le.resolve(null);let i=Qr(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fg(n,null,"F"),i=Qr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const u=et(...a);return this.ps.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.Ds(n,d);return this.Cs(n,y,u,p.readTime)?this.ys(e,Fg(n,null,"F")):this.vs(e,y,n,p)}))})))}ws(e,n,i,s){return FE(n)||s.isEqual(ke.min())?le.resolve(null):this.ps.getDocuments(e,i).next(a=>{const u=this.Ds(n,a);return this.Cs(n,u,i,s)?le.resolve(null):(cl()<=Je.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ul(n)),this.vs(e,u,n,m8(s,Yu)).next(d=>d))})}Ds(e,n){let i=new An(xC(e));return n.forEach((s,a)=>{a0(e,a)&&(i=i.add(a))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,i){return cl()<=Je.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",ul(n)),this.ps.getDocumentsMatchingQuery(e,n,Pa.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(a=>(n.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="LocalStore",WR=3e8;class QR{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Xt($e),this.xs=new Fo(a=>Cp(a),Sp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function KR(t,e,n,i){return new QR(t,e,n,i)}async function zC(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(a=>{const u=[],d=[];let p=et();for(const y of s){u.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of a){d.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return n.localDocuments.getDocuments(i,p).next(y=>({Ls:y,removedBatchIds:u,addedBatchIds:d}))})})}function ZR(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(d,p,y,w){const T=y.batch,S=T.keys();let I=le.resolve();return S.forEach(q=>{I=I.next(()=>w.getEntry(p,q)).next(X=>{const $=y.docVersions.get(q);Et($!==null,48541),X.version.compareTo($)<0&&(T.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),w.addEntry(X)))})}),I.next(()=>d.mutationQueue.removeMutationBatch(p,T))}(n,i,e,a).next(()=>a.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=et();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function HC(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function JR(t,e){const n=Ve(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const d=[];e.targetChanges.forEach((w,T)=>{const S=s.get(T);if(!S)return;d.push(n.Pi.removeMatchingKeys(a,w.removedDocuments,T).next(()=>n.Pi.addMatchingKeys(a,w.addedDocuments,T)));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(Hn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):w.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(w.resumeToken,i)),s=s.insert(T,I),function(X,$,V){return X.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=WR?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(S,I,w)&&d.push(n.Pi.updateTargetData(a,I))});let p=Ps(),y=et();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,w))}),d.push($R(a,u,e.documentUpdates).next(w=>{p=w.ks,y=w.qs})),!i.isEqual(ke.min())){const w=n.Pi.getLastRemoteSnapshotVersion(a).next(T=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i));d.push(w)}return le.waitFor(d).next(()=>u.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,p,y)).next(()=>p)}).then(a=>(n.Ms=s,a))}function $R(t,e,n){let i=et(),s=et();return n.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let u=Ps();return n.forEach((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):we(Pp,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{ks:u,qs:s}})}function eM(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=_p),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function tM(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(a=>a?(s=a,le.resolve(s)):n.Pi.allocateTargetId(i).next(u=>(s=new da(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Yg(t,e,n){const i=Ve(t),s=i.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,u=>i.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Tc(u))throw u;we(Pp,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function $E(t,e,n){const i=Ve(t);let s=ke.min(),a=et();return i.persistence.runTransaction("Execute query","readwrite",u=>function(p,y,w){const T=Ve(p),S=T.xs.get(w);return S!==void 0?le.resolve(T.Ms.get(S)):T.Pi.getTargetData(y,w)}(i,u,Qr(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next(p=>{a=p})}).next(()=>i.Fs.getDocumentsMatchingQuery(u,e,n?s:ke.min(),n?a:et())).next(d=>(nM(i,j8(e),d),{documents:d,Qs:a})))}function nM(t,e,n){let i=t.Os.get(e)||ke.min();n.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Os.set(e,i)}class ex{constructor(){this.activeTargetIds=X8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iM{constructor(){this.Mo=new ex,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ex,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="ConnectivityMonitor";class nx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(tx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(tx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function qg(){return ef===null?ef=function(){return 268435456+Math.round(2147483648*Math.random())}():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="RestConnection",sM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===md?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,a){const u=qg(),d=this.zo(e,n.toUriEncodedString());we(y1,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,s,a);const{host:y}=new URL(d),w=yc(y);return this.Jo(e,d,p,i,w).then(T=>(we(y1,`Received RPC '${e}' ${u}: `,T),T),T=>{throw $l(y1,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T})}Ho(e,n,i,s,a,u){return this.Go(e,n,i,s,a)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_c}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const i=sM[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection";class lM extends aM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,a){const u=qg();return new Promise((d,p)=>{const y=new qT;y.setWithCredentials(!0),y.listenOnce(XT.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Cf.NO_ERROR:const T=y.getResponseJson();we(qn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Cf.TIMEOUT:we(qn,`RPC '${e}' ${u} timed out`),p(new Ee(se.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const S=y.getStatus();if(we(qn,`RPC '${e}' ${u} failed with status:`,S,"response text:",y.getResponseText()),S>0){let I=y.getResponseJson();Array.isArray(I)&&(I=I[0]);const q=I==null?void 0:I.error;if(q&&q.status&&q.message){const X=function(V){const L=V.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(L)>=0?L:se.UNKNOWN}(q.status);p(new Ee(X,q.message))}else p(new Ee(se.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new Ee(se.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{we(qn,`RPC '${e}' ${u} completed.`)}});const w=JSON.stringify(s);we(qn,`RPC '${e}' ${u} sending request:`,s),y.send(n,"POST",w,i,15)})}T_(e,n,i){const s=qg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=KT(),d=QT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const w=a.join("");we(qn,`Creating RPC '${e}' stream ${s}: ${w}`,p);const T=u.createWebChannel(w,p);this.I_(T);let S=!1,I=!1;const q=new oM({Yo:$=>{I?we(qn,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(S||(we(qn,`Opening RPC '${e}' stream ${s} transport.`),T.open(),S=!0),we(qn,`RPC '${e}' stream ${s} sending:`,$),T.send($))},Zo:()=>T.close()}),X=($,V,L)=>{$.listen(V,k=>{try{L(k)}catch(H){setTimeout(()=>{throw H},0)}})};return X(T,tu.EventType.OPEN,()=>{I||(we(qn,`RPC '${e}' stream ${s} transport opened.`),q.o_())}),X(T,tu.EventType.CLOSE,()=>{I||(I=!0,we(qn,`RPC '${e}' stream ${s} transport closed`),q.a_(),this.E_(T))}),X(T,tu.EventType.ERROR,$=>{I||(I=!0,$l(qn,`RPC '${e}' stream ${s} transport errored. Name:`,$.name,"Message:",$.message),q.a_(new Ee(se.UNAVAILABLE,"The operation could not be completed")))}),X(T,tu.EventType.MESSAGE,$=>{var V;if(!I){const L=$.data[0];Et(!!L,16349);const k=L,H=(k==null?void 0:k.error)||((V=k[0])==null?void 0:V.error);if(H){we(qn,`RPC '${e}' stream ${s} received error:`,H);const oe=H.status;let re=function(M){const z=hn[M];if(z!==void 0)return RC(z)}(oe),R=H.message;re===void 0&&(re=se.INTERNAL,R="Unknown error status: "+oe+" with message "+H.message),I=!0,q.a_(new Ee(re,R)),T.close()}else we(qn,`RPC '${e}' stream ${s} received:`,L),q.u_(L)}}),X(d,WT.STAT_EVENT,$=>{$.stat===Og.PROXY?we(qn,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===Og.NOPROXY&&we(qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{q.__()},0),q}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function E1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){return new fR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="PersistentStream";class YC{constructor(e,n,i,s,a,u,d,p){this.Mi=e,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Ls(n.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new Ee(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return we(ix,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(we(ix,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cM extends YC{constructor(e,n,i,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,u),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mR(this.serializer,e),i=function(a){if(!("targetChange"in a))return ke.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?Kr(u.readTime):ke.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Gg(this.serializer),n.addTarget=function(a,u){let d;const p=u.target;if(d=Vg(p)?{documents:ER(a,p)}:{query:xR(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=OC(a,u.resumeToken);const y=jg(a,u.expectedCount);y!==null&&(d.expectedCount=y)}else if(u.snapshotVersion.compareTo(ke.min())>0){d.readTime=wd(a,u.snapshotVersion.toTimestamp());const y=jg(a,u.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const i=_R(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Gg(this.serializer),n.removeTarget=e,this.q_(n)}}class uM extends YC{constructor(e,n,i,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yR(e.writeResults,e.commitTime),i=Kr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Gg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>pR(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{}class fM extends hM{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Go(e,zg(n,i),s,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(se.UNKNOWN,a.toString())})}Ho(e,n,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Ho(e,zg(n,i),s,u,d,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(se.UNKNOWN,u.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ls(n),this.aa=!1):we("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="RemoteStore";class gM{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(u=>{i.enqueueAndForget(async()=>{jo(this)&&(we(Do,"Restarting streams for network reachability change."),await async function(p){const y=Ve(p);y.Ea.add(4),await wh(y),y.Ra.set("Unknown"),y.Ea.delete(4),await h0(y)}(this))})}),this.Ra=new dM(i,s)}}async function h0(t){if(jo(t))for(const e of t.da)await e(!0)}async function wh(t){for(const e of t.da)await e(!1)}function qC(t,e){const n=Ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Up(n)?Vp(n):Sc(n).O_()&&Bp(n,e))}function kp(t,e){const n=Ve(t),i=Sc(n);n.Ia.delete(e),i.O_()&&XC(n,e),n.Ia.size===0&&(i.O_()?i.L_():jo(n)&&n.Ra.set("Unknown"))}function Bp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sc(t).Y_(e)}function XC(t,e){t.Va.Ue(e),Sc(t).Z_(e)}function Vp(t){t.Va=new lR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sc(t).start(),t.Ra.ua()}function Up(t){return jo(t)&&!Sc(t).x_()&&t.Ia.size>0}function jo(t){return Ve(t).Ea.size===0}function WC(t){t.Va=void 0}async function mM(t){t.Ra.set("Online")}async function pM(t){t.Ia.forEach((e,n)=>{Bp(t,e)})}async function yM(t,e){WC(t),Up(t)?(t.Ra.ha(e),Vp(t)):t.Ra.set("Unknown")}async function EM(t,e,n){if(t.Ra.set("Online"),e instanceof DC&&e.state===2&&e.cause)try{await async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ia.delete(d),s.Va.removeTarget(d))}(t,e)}catch(i){we(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ad(t,i)}else if(e instanceof If?t.Va.Ze(e):e instanceof MC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ke.min()))try{const i=await HC(t.localStore);n.compareTo(i)>=0&&await function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=a.Ia.get(y);w&&a.Ia.set(y,w.withResumeToken(p.resumeToken,u))}}),d.targetMismatches.forEach((p,y)=>{const w=a.Ia.get(p);if(!w)return;a.Ia.set(p,w.withResumeToken(Hn.EMPTY_BYTE_STRING,w.snapshotVersion)),XC(a,p);const T=new da(w.target,p,y,w.sequenceNumber);Bp(a,T)}),a.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(i){we(Do,"Failed to raise snapshot:",i),await Ad(t,i)}}async function Ad(t,e,n){if(!Tc(e))throw e;t.Ea.add(1),await wh(t),t.Ra.set("Offline"),n||(n=()=>HC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(Do,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await h0(t)})}function QC(t,e){return e().catch(n=>Ad(t,n,e))}async function f0(t){const e=Ve(t),n=Ua(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_p;for(;xM(e);)try{const s=await eM(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,wM(e,s)}catch(s){await Ad(e,s)}KC(e)&&ZC(e)}function xM(t){return jo(t)&&t.Ta.length<10}function wM(t,e){t.Ta.push(e);const n=Ua(t);n.O_()&&n.X_&&n.ea(e.mutations)}function KC(t){return jo(t)&&!Ua(t).x_()&&t.Ta.length>0}function ZC(t){Ua(t).start()}async function _M(t){Ua(t).ra()}async function AM(t){const e=Ua(t);for(const n of t.Ta)e.ea(n.mutations)}async function TM(t,e,n){const i=t.Ta.shift(),s=Np.from(i,e,n);await QC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await f0(t)}async function CM(t,e){e&&Ua(t).X_&&await async function(i,s){if(function(u){return sR(u)&&u!==se.ABORTED}(s.code)){const a=i.Ta.shift();Ua(i).B_(),await QC(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await f0(i)}}(t,e),KC(t)&&ZC(t)}async function rx(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),we(Do,"RemoteStore received new credentials");const i=jo(n);n.Ea.add(3),await wh(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await h0(n)}async function SM(t,e){const n=Ve(t);e?(n.Ea.delete(2),await h0(n)):e||(n.Ea.add(2),await wh(n),n.Ra.set("Unknown"))}function Sc(t){return t.ma||(t.ma=function(n,i,s){const a=Ve(n);return a.sa(),new cM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:mM.bind(null,t),t_:pM.bind(null,t),r_:yM.bind(null,t),H_:EM.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Up(t)?Vp(t):t.Ra.set("Unknown")):(await t.ma.stop(),WC(t))})),t.ma}function Ua(t){return t.fa||(t.fa=function(n,i,s){const a=Ve(n);return a.sa(),new uM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_M.bind(null,t),r_:CM.bind(null,t),ta:AM.bind(null,t),na:TM.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await f0(t)):(await t.fa.stop(),t.Ta.length>0&&(we(Do,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const u=Date.now()+i,d=new Fp(e,n,u,s,a);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jp(t,e){if(Ls("AsyncQueue",`${e}: ${t}`),Tc(t))return new Ee(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{static emptySet(e){return new Vl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||be.comparator(n.key,i.key):(n,i)=>be.comparator(n.key,i.key),this.keyedMap=nu(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.ga=new Xt(be.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class rc{constructor(e,n,i,s,a,u,d,p,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,s,a){const u=[];return n.forEach(d=>{u.push({type:0,doc:d})}),new rc(e,n,Vl.emptySet(n),u,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&s0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vM{constructor(){this.queries=ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Ve(n),a=s.queries;s.queries=ax(),a.forEach((u,d)=>{for(const p of d.Sa)p.onError(i)})})(this,new Ee(se.ABORTED,"Firestore shutting down"))}}function ax(){return new Fo(t=>EC(t),s0)}async function JC(t,e){const n=Ve(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(i=2):(a=new bM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const d=jp(u,`Initialization of query '${ul(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&zp(n)}async function $C(t,e){const n=Ve(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function IM(t,e){const n=Ve(t);let i=!1;for(const s of e){const a=s.query,u=n.queries.get(a);if(u){for(const d of u.Sa)d.Fa(s)&&(i=!0);u.wa=s}}i&&zp(n)}function NM(t,e,n){const i=Ve(t),s=i.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);i.queries.delete(e)}function zp(t){t.Ca.forEach(e=>{e.next()})}var Xg,ox;(ox=Xg||(Xg={})).Ma="default",ox.Cache="cache";class eS{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new rc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.key=e}}class nS{constructor(e){this.key=e}}class RM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=xC(e),this.tu=new Vl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new sx,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,u=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,y=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((w,T)=>{const S=s.get(w),I=a0(this.query,T)?T:null,q=!!S&&this.mutatedKeys.has(S.key),X=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let $=!1;S&&I?S.data.isEqual(I.data)?q!==X&&(i.track({type:3,doc:I}),$=!0):this.su(S,I)||(i.track({type:2,doc:I}),$=!0,(p&&this.eu(I,p)>0||y&&this.eu(I,y)<0)&&(d=!0)):!S&&I?(i.track({type:0,doc:I}),$=!0):S&&!I&&(i.track({type:1,doc:S}),$=!0,(p||y)&&(d=!0)),$&&(I?(u=u.add(I),a=X?a.add(w):a.delete(w)):(u=u.delete(w),a=a.delete(w)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const w=this.query.limitType==="F"?u.last():u.first();u=u.delete(w.key),a=a.delete(w.key),i.track({type:1,doc:w})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort((w,T)=>function(I,q){const X=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:$})}};return X(I)-X(q)}(w.type,T.type)||this.eu(w.doc,T.doc)),this.ou(i),s=s??!1;const d=n&&!s?this._u():[],p=this.Xa.size===0&&this.current&&!s?1:0,y=p!==this.Za;return this.Za=p,u.length!==0||y?{snapshot:new rc(this.query,e.tu,a,u,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new nS(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new tS(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return rc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hp="SyncEngine";class MM{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class DM{constructor(e){this.key=e,this.hu=!1}}class OM{constructor(e,n,i,s,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Fo(d=>EC(d),s0),this.Iu=new Map,this.Eu=new Set,this.du=new Xt(be.comparator),this.Au=new Map,this.Ru=new Dp,this.Vu={},this.mu=new Map,this.fu=ic.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LM(t,e,n=!0){const i=lS(t);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await iS(i,e,n,!0),s}async function PM(t,e){const n=lS(t);await iS(n,e,!0,!1)}async function iS(t,e,n,i){const s=await tM(t.localStore,Qr(e)),a=s.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let d;return i&&(d=await kM(t,e,a,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&qC(t.remoteStore,s),d}async function kM(t,e,n,i,s){t.pu=(T,S,I)=>async function(X,$,V,L){let k=$.view.ru(V);k.Cs&&(k=await $E(X.localStore,$.query,!1).then(({documents:R})=>$.view.ru(R,k)));const H=L&&L.targetChanges.get($.targetId),oe=L&&L.targetMismatches.get($.targetId)!=null,re=$.view.applyChanges(k,X.isPrimaryClient,H,oe);return cx(X,$.targetId,re.au),re.snapshot}(t,T,S,I);const a=await $E(t.localStore,e,!0),u=new RM(e,a.Qs),d=u.ru(a.documents),p=xh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),y=u.applyChanges(d,t.isPrimaryClient,p);cx(t,n,y.au);const w=new MM(e,n,u);return t.Tu.set(e,w),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),y.snapshot}async function BM(t,e,n){const i=Ve(t),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter(u=>!s0(u,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Yg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&kp(i.remoteStore,s.targetId),Wg(i,s.targetId)}).catch(Ac)):(Wg(i,s.targetId),await Yg(i.localStore,s.targetId,!0))}async function VM(t,e){const n=Ve(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),kp(n.remoteStore,i.targetId))}async function UM(t,e,n){const i=qM(t);try{const s=await function(u,d){const p=Ve(u),y=Rt.now(),w=d.reduce((I,q)=>I.add(q.key),et());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",I=>{let q=Ps(),X=et();return p.Ns.getEntries(I,w).next($=>{q=$,q.forEach((V,L)=>{L.isValidDocument()||(X=X.add(V))})}).next(()=>p.localDocuments.getOverlayedDocuments(I,q)).next($=>{T=$;const V=[];for(const L of d){const k=eR(L,T.get(L.key).overlayedDocument);k!=null&&V.push(new Xa(L.key,k,uC(k.value.mapValue),_r.exists(!0)))}return p.mutationQueue.addMutationBatch(I,y,V,d)}).next($=>{S=$;const V=$.applyToLocalDocumentSet(T,X);return p.documentOverlayCache.saveOverlays(I,$.batchId,V)})}).then(()=>({batchId:S.batchId,changes:_C(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(u,d,p){let y=u.Vu[u.currentUser.toKey()];y||(y=new Xt($e)),y=y.insert(d,p),u.Vu[u.currentUser.toKey()]=y}(i,s.batchId,n),await _h(i,s.changes),await f0(i.remoteStore)}catch(s){const a=jp(s,"Failed to persist write");n.reject(a)}}async function rS(t,e){const n=Ve(t);try{const i=await JR(n.localStore,e);e.targetChanges.forEach((s,a)=>{const u=n.Au.get(a);u&&(Et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?Et(u.hu,14607):s.removedDocuments.size>0&&(Et(u.hu,42227),u.hu=!1))}),await _h(n,i,e)}catch(i){await Ac(i)}}function lx(t,e,n){const i=Ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)}),function(u,d){const p=Ve(u);p.onlineState=d;let y=!1;p.queries.forEach((w,T)=>{for(const S of T.Sa)S.va(d)&&(y=!0)}),y&&zp(p)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function FM(t,e,n){const i=Ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),a=s&&s.key;if(a){let u=new Xt(be.comparator);u=u.insert(a,Wn.newNoDocument(a,ke.min()));const d=et().add(a),p=new c0(ke.min(),new Map,new Xt($e),u,d);await rS(i,p),i.du=i.du.remove(a),i.Au.delete(e),Gp(i)}else await Yg(i.localStore,e,!1).then(()=>Wg(i,e,n)).catch(Ac)}async function jM(t,e){const n=Ve(t),i=e.batch.batchId;try{const s=await ZR(n.localStore,e);aS(n,i,null),sS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await _h(n,s)}catch(s){await Ac(s)}}async function zM(t,e,n){const i=Ve(t);try{const s=await function(u,d){const p=Ve(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return p.mutationQueue.lookupMutationBatch(y,d).next(T=>(Et(T!==null,37113),w=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>p.localDocuments.getDocuments(y,w))})}(i.localStore,e);aS(i,e,n),sS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await _h(i,s)}catch(s){await Ac(s)}}function sS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function aS(t,e,n){const i=Ve(t);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Wg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||oS(t,i)})}function oS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Gp(t))}function cx(t,e,n){for(const i of n)i instanceof tS?(t.Ru.addReference(i.key,e),HM(t,i)):i instanceof nS?(we(Hp,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||oS(t,i.key)):Me(19791,{wu:i})}function HM(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(we(Hp,"New document in limbo: "+n),t.Eu.add(i),Gp(t))}function Gp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new be(Lt.fromString(e)),i=t.fu.next();t.Au.set(i,new DM(n)),t.du=t.du.insert(n,i),qC(t.remoteStore,new da(Qr(bp(n.path)),i,"TargetPurposeLimboResolution",n0.ce))}}async function _h(t,e,n){const i=Ve(t),s=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach((d,p)=>{u.push(i.pu(p,e,n).then(y=>{var w;if((y||n)&&i.isPrimaryClient){const T=y?!y.fromCache:(w=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:w.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){s.push(y);const T=Lp.As(p.targetId,y);a.push(T)}}))}),await Promise.all(u),i.Pu.H_(s),await async function(p,y){const w=Ve(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>le.forEach(y,S=>le.forEach(S.Es,I=>w.persistence.referenceDelegate.addReference(T,S.targetId,I)).next(()=>le.forEach(S.ds,I=>w.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))}catch(T){if(!Tc(T))throw T;we(Pp,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const I=w.Ms.get(S),q=I.snapshotVersion,X=I.withLastLimboFreeSnapshotVersion(q);w.Ms=w.Ms.insert(S,X)}}}(i.localStore,a))}async function GM(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){we(Hp,"User change. New user:",e.toKey());const i=await zC(n.localStore,e);n.currentUser=e,function(a,u){a.mu.forEach(d=>{d.forEach(p=>{p.reject(new Ee(se.CANCELLED,u))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await _h(n,i.Ls)}}function YM(t,e){const n=Ve(t),i=n.Au.get(e);if(i&&i.hu)return et().add(i.key);{let s=et();const a=n.Iu.get(e);if(!a)return s;for(const u of a){const d=n.Tu.get(u);s=s.unionWith(d.view.nu)}return s}}function lS(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FM.bind(null,e),e.Pu.H_=IM.bind(null,e.eventManager),e.Pu.yu=NM.bind(null,e.eventManager),e}function qM(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zM.bind(null,e),e}class Td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=u0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return KR(this.persistence,new XR,e.initialUser,this.serializer)}Cu(e){return new jC(Op.mi,this.serializer)}Du(e){return new iM}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Td.provider={build:()=>new Td};class XM extends Td{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Et(this.persistence.referenceDelegate instanceof _d,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new DR(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new jC(i=>_d.mi(i,n),this.serializer)}}class Qg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=GM.bind(null,this.syncEngine),await SM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vM}()}createDatastore(e){const n=u0(e.databaseInfo.databaseId),i=function(a){return new lM(a)}(e.databaseInfo);return function(a,u,d,p){return new fM(a,u,d,p)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,a,u,d){return new gM(i,s,a,u,d)}(this.localStore,this.datastore,e.asyncQueue,n=>lx(this.syncEngine,n,0),function(){return nx.v()?new nx:new rM}())}createSyncEngine(e,n){return function(s,a,u,d,p,y,w){const T=new OM(s,a,u,d,p,y);return w&&(T.gu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Ve(s);we(Do,"RemoteStore shutting down."),a.Ea.add(5),await wh(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Qg.provider={build:()=>new Qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="FirestoreClient";class WM{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Xn.UNAUTHENTICATED,this.clientId=wp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async u=>{we(Fa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(we(Fa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=jp(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function x1(t,e){t.asyncQueue.verifyOperationInProgress(),we(Fa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await zC(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ux(t,e){t.asyncQueue.verifyOperationInProgress();const n=await QM(t);we(Fa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>rx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>rx(e.remoteStore,s)),t._onlineComponents=e}async function QM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(Fa,"Using user provided OfflineComponentProvider");try{await x1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;$l("Error using user provided cache. Falling back to memory cache: "+n),await x1(t,new Td)}}else we(Fa,"Using default OfflineComponentProvider"),await x1(t,new XM(void 0));return t._offlineComponents}async function uS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(Fa,"Using user provided OnlineComponentProvider"),await ux(t,t._uninitializedComponentsProvider._online)):(we(Fa,"Using default OnlineComponentProvider"),await ux(t,new Qg))),t._onlineComponents}function KM(t){return uS(t).then(e=>e.syncEngine)}async function Kg(t){const e=await uS(t),n=e.eventManager;return n.onListen=LM.bind(null,e.syncEngine),n.onUnlisten=BM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VM.bind(null,e.syncEngine),n}function ZM(t,e,n={}){const i=new Na;return t.asyncQueue.enqueueAndForget(async()=>function(a,u,d,p,y){const w=new cS({next:S=>{w.Nu(),u.enqueueAndForget(()=>$C(a,T)),S.fromCache&&p.source==="server"?y.reject(new Ee(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new eS(d,w,{includeMetadataChanges:!0,qa:!0});return JC(a,T)}(await Kg(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firestore.googleapis.com",fx=!0;class dx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fS,this.ssl=fx}else this.host=e.host,this.ssl=e.ssl??fx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RR)throw new Ee(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class d0{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new r8;switch(i.type){case"firstParty":return new l8(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=hx.get(n);i&&(we("ComponentProvider","Removing Datastore"),hx.delete(n),i.terminate())}(this),Promise.resolve()}}function JM(t,e,n,i={}){var y;t=Wr(t,d0);const s=yc(e),a=t._getSettings(),u={...a,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;s&&(iT(`https://${d}`),rT("Firestore",!0)),a.host!==fS&&a.host!==d&&$l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:s,emulatorOptions:i};if(!Io(p,u)&&(t._setSettings(p),i.mockUserToken)){let w,T;if(typeof i.mockUserToken=="string")w=i.mockUserToken,T=Xn.MOCK_USER;else{w=pI(i.mockUserToken,(y=t._app)==null?void 0:y.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Ee(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xn(S)}t._authCredentials=new s8(new JT(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wa(this.firestore,e,this._query)}}class En{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}toJSON(){return{type:En._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(yh(n,En._jsonSchema))return new En(e,i||null,new be(Lt.fromString(n.referencePath)))}}En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:yn("string",En._jsonSchemaVersion),referencePath:yn("string")};class Ra extends Wa{constructor(e,n,i){super(e,n,bp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new be(e))}withConverter(e){return new Ra(this.firestore,e,this._path)}}function tf(t,e,...n){if(t=On(t),$T("collection","path",e),t instanceof d0){const i=Lt.fromString(e,...n);return bE(i),new Ra(t,null,i)}{if(!(t instanceof En||t instanceof Ra))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Lt.fromString(e,...n));return bE(i),new Ra(t.firestore,null,i)}}function fo(t,e,...n){if(t=On(t),arguments.length===1&&(e=wp.newId()),$T("doc","path",e),t instanceof d0){const i=Lt.fromString(e,...n);return SE(i),new En(t,null,new be(i))}{if(!(t instanceof En||t instanceof Ra))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Lt.fromString(e,...n));return SE(i),new En(t.firestore,t instanceof Ra?t.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="AsyncQueue";class mx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GC(this,"async_queue_retry"),this._c=()=>{const i=E1();i&&we(gx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=E1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=E1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Na;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Tc(e))throw e;we(gx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Ls("INTERNAL UNHANDLED ERROR: ",px(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Fp.createAndSchedule(this,e,n,i,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Me(47125,{Pc:px(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function px(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Oo extends d0{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new mx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mx(e),this._firestoreClient=void 0,await e}}}function $M(t,e){const n=typeof t=="object"?t:lT(),i=typeof t=="string"?t:md,s=up(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=gI("firestore");a&&JM(s,...a)}return s}function Yp(t){if(t._terminated)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eD(t),t._firestoreClient}function eD(t){var i,s,a;const e=t._freezeSettings(),n=function(d,p,y,w){return new S8(d,p,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,hS(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new WM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar(Hn.fromBase64String(e))}catch(n){throw new Ee(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ar(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yh(e,ar._jsonSchema))return ar.fromBase64String(e.bytes)}}ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:yn("string",ar._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zr._jsonSchemaVersion}}static fromJSON(e){if(yh(e,Zr._jsonSchema))return new Zr(e.latitude,e.longitude)}}Zr._jsonSchemaVersion="firestore/geoPoint/1.0",Zr._jsonSchema={type:yn("string",Zr._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yh(e,Jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jr(e.vectorValues);throw new Ee(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jr._jsonSchemaVersion="firestore/vectorValue/1.0",Jr._jsonSchema={type:yn("string",Jr._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=/^__.*__$/;class nD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eh(e,this.data,n,this.fieldTransforms)}}class dS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:t})}}class Xp{constructor(e,n,i,s,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gS(this.Ac)&&tD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iD{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||u0(e)}Cc(e,n,i,s=!1){return new Xp({Ac:e,methodName:n,Dc:i,path:Fn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wp(t){const e=t._freezeSettings(),n=u0(t._databaseId);return new iD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rD(t,e,n,i,s,a={}){const u=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);Qp("Data must be an object, but it was:",u,i);const d=mS(i,u);let p,y;if(a.merge)p=new Bi(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const w=[];for(const T of a.mergeFields){const S=Zg(e,T,n);if(!u.contains(S))throw new Ee(se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);yS(w,S)||w.push(S)}p=new Bi(w),y=u.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=u.fieldTransforms;return new nD(new pi(d),p,y)}class m0 extends qp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof m0}}function sD(t,e,n,i){const s=t.Cc(1,e,n);Qp("Data must be an object, but it was:",s,i);const a=[],u=pi.empty();qa(i,(p,y)=>{const w=Kp(e,p,n);y=On(y);const T=s.yc(w);if(y instanceof m0)a.push(w);else{const S=Ah(y,T);S!=null&&(a.push(w),u.set(w,S))}});const d=new Bi(a);return new dS(u,d,s.fieldTransforms)}function aD(t,e,n,i,s,a){const u=t.Cc(1,e,n),d=[Zg(e,i,n)],p=[s];if(a.length%2!=0)throw new Ee(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(Zg(e,a[S])),p.push(a[S+1]);const y=[],w=pi.empty();for(let S=d.length-1;S>=0;--S)if(!yS(y,d[S])){const I=d[S];let q=p[S];q=On(q);const X=u.yc(I);if(q instanceof m0)y.push(I);else{const $=Ah(q,X);$!=null&&(y.push(I),w.set(I,$))}}const T=new Bi(y);return new dS(w,T,u.fieldTransforms)}function oD(t,e,n,i=!1){return Ah(n,t.Cc(i?4:3,e))}function Ah(t,e){if(pS(t=On(t)))return Qp("Unsupported field value:",e,t),mS(t,e);if(t instanceof qp)return function(i,s){if(!gS(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const a=[];let u=0;for(const d of i){let p=Ah(d,s.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}}(t,e)}return function(i,s){if((i=On(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return W8(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Rt.fromDate(i);return{timestampValue:wd(s.serializer,a)}}if(i instanceof Rt){const a=new Rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wd(s.serializer,a)}}if(i instanceof Zr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ar)return{bytesValue:OC(s.serializer,i._byteString)};if(i instanceof En){const a=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw s.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Mp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Jr)return function(u,d){return{mapValue:{fields:{[lC]:{stringValue:cC},[pd]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw d.Sc("VectorValues must only contain numeric values.");return vp(d.serializer,y)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${t0(i)}`)}(t,e)}function mS(t,e){const n={};return nC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qa(t,(i,s)=>{const a=Ah(s,e.mc(i));a!=null&&(n[i]=a)}),{mapValue:{fields:n}}}function pS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof Zr||t instanceof ar||t instanceof En||t instanceof qp||t instanceof Jr)}function Qp(t,e,n){if(!pS(n)||!eC(n)){const i=t0(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Zg(t,e,n){if((e=On(e))instanceof g0)return e._internalPath;if(typeof e=="string")return Kp(t,e);throw Cd("Field path arguments must be of type string or ",t,!1,void 0,n)}const lD=new RegExp("[~\\*/\\[\\]]");function Kp(t,e,n){if(e.search(lD)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new g0(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cd(t,e,n,i,s){const a=i&&!i.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${s}`),p+=")"),new Ee(se.INVALID_ARGUMENT,d+t+p)}function yS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cD extends ES{data(){return super.data()}}function Zp(t,e){return typeof e=="string"?Kp(t,e):e instanceof g0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jp{}class wS extends Jp{}function w1(t,e,...n){let i=[];e instanceof Jp&&i.push(e),i=i.concat(n),function(a){const u=a.filter(p=>p instanceof e2).length,d=a.filter(p=>p instanceof $p).length;if(u>1||u>0&&d>0)throw new Ee(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class $p extends wS{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new $p(e,n,i)}_apply(e){const n=this._parse(e);return _S(e._query,n),new Wa(e.firestore,e.converter,Ug(e._query,n))}_parse(e){const n=Wp(e.firestore);return function(a,u,d,p,y,w,T){let S;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){xx(T,w);const q=[];for(const X of T)q.push(Ex(p,a,X));S={arrayValue:{values:q}}}else S=Ex(p,a,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||xx(T,w),S=oD(d,u,T,w==="in"||w==="not-in");return mn.create(y,w,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class e2 extends Jp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new e2(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let u=s;const d=a.getFlattenedFilters();for(const p of d)_S(u,p),u=Ug(u,p)}(e._query,n),new Wa(e.firestore,e.converter,Ug(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class t2 extends wS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t2(e,n)}_apply(e){const n=function(s,a,u){if(s.startAt!==null)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qu(a,u)}(e._query,this._field,this._direction);return new Wa(e.firestore,e.converter,function(s,a){const u=s.explicitOrderBy.concat([a]);return new Cc(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function _1(t,e="asc"){const n=e,i=Zp("orderBy",t);return t2._create(i,n)}function Ex(t,e,n){if(typeof(n=On(n))=="string"){if(n==="")throw new Ee(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yC(e)&&n.indexOf("/")!==-1)throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Lt.fromString(n));if(!be.isDocumentKey(i))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return LE(t,new be(i))}if(n instanceof En)return LE(t,n._key);throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${t0(n)}.`)}function xx(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _S(t,e){const n=function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ee(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uD{convertValue(e,n="none"){switch(Va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return qa(e,(s,a)=>{i[s]=this.convertValue(a,n)}),i}convertVectorValue(e){var i,s,a;const n=(a=(s=(i=e.fields)==null?void 0:i[pd].arrayValue)==null?void 0:s.values)==null?void 0:a.map(u=>rn(u.doubleValue));return new Jr(n)}convertGeoPoint(e){return new Zr(rn(e.latitude),rn(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=r0(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){const n=ka(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Lt.fromString(e);Et(UC(i),9688,{name:e});const s=new Xu(i.get(1),i.get(3)),a=new be(i.popFirst(5));return s.isEqual(n)||Ls(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ru{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends ES{constructor(e,n,i,s,a,u){super(e,n,i,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Zp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_o._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:yn("string",_o._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class Nf extends _o{data(e={}){return super.data(e)}}class Ao{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ru(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Nf(this._firestore,this._userDataWriter,i.key,i,new ru(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(d=>{const p=new Nf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new ru(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const p=new Nf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new ru(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let y=-1,w=-1;return d.type!==0&&(y=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),w=u.indexOf(d.doc.key)),{type:fD(d.type),doc:p,oldIndex:y,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:yn("string",Ao._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class n2 extends uD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function dD(t){t=Wr(t,Wa);const e=Wr(t.firestore,Oo),n=Yp(e),i=new n2(e);return xS(t._query),ZM(n,t._query).then(s=>new Ao(e,i,t,s))}function A1(t,e,n,...i){t=Wr(t,En);const s=Wr(t.firestore,Oo),a=Wp(s);let u;return u=typeof(e=On(e))=="string"||e instanceof g0?aD(a,"updateDoc",t._key,e,n,i):sD(a,"updateDoc",t._key,e),i2(s,[u.toMutation(t._key,_r.exists(!0))])}function T1(t){return i2(Wr(t.firestore,Oo),[new Ip(t._key,_r.none())])}function gD(t,e){const n=Wr(t.firestore,Oo),i=fo(t),s=hD(t.converter,e);return i2(n,[rD(Wp(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,_r.exists(!1))]).then(()=>i)}function wx(t,...e){var p,y,w;t=On(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||yx(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(yx(e[i])){const T=e[i];e[i]=(p=T.next)==null?void 0:p.bind(T),e[i+1]=(y=T.error)==null?void 0:y.bind(T),e[i+2]=(w=T.complete)==null?void 0:w.bind(T)}let a,u,d;if(t instanceof En)u=Wr(t.firestore,Oo),d=bp(t._key.path),a={next:T=>{e[i]&&e[i](mD(u,t,T))},error:e[i+1],complete:e[i+2]};else{const T=Wr(t,Wa);u=Wr(T.firestore,Oo),d=T._query;const S=new n2(u);a={next:I=>{e[i]&&e[i](new Ao(u,S,T,I))},error:e[i+1],complete:e[i+2]},xS(t._query)}return function(S,I,q,X){const $=new cS(X),V=new eS(I,$,q);return S.asyncQueue.enqueueAndForget(async()=>JC(await Kg(S),V)),()=>{$.Nu(),S.asyncQueue.enqueueAndForget(async()=>$C(await Kg(S),V))}}(Yp(u),d,s,a)}function i2(t,e){return function(i,s){const a=new Na;return i.asyncQueue.enqueueAndForget(async()=>UM(await KM(i),s,a)),a.promise}(Yp(t),e)}function mD(t,e,n){const i=n.docs.get(e._key),s=new n2(t);return new _o(t,s,e._key,i,new ru(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){_c=s})(Ec),Zl(new No("firestore",(i,{instanceIdentifier:s,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Oo(new a8(i.getProvider("auth-internal")),new c8(u,i.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ee(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(y.options.projectId,w)}(u,s),u);return a={useFetchStreams:n,...a},d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),ba(_E,AE,e),ba(_E,AE,"esm2020")})();var Th={},pD=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},AS={},Gi={};let r2;const yD=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Gi.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Gi.getSymbolTotalCodewords=function(e){return yD[e]};Gi.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Gi.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');r2=e};Gi.isKanjiModeEnabled=function(){return typeof r2<"u"};Gi.toSJIS=function(e){return r2(e)};var p0={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,s){if(t.isValid(i))return i;try{return e(i)}catch{return s}}})(p0);function TS(){this.buffer=[],this.length=0}TS.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ED=TS;function Ch(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Ch.prototype.set=function(t,e,n,i){const s=t*this.size+e;this.data[s]=n,i&&(this.reservedBit[s]=!0)};Ch.prototype.get=function(t,e){return this.data[t*this.size+e]};Ch.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Ch.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var xD=Ch,CS={};(function(t){const e=Gi.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const s=Math.floor(i/7)+2,a=e(i),u=a===145?26:Math.ceil((a-13)/(2*s-2))*2,d=[a-7];for(let p=1;p<s-1;p++)d[p]=d[p-1]-u;return d.push(6),d.reverse()},t.getPositions=function(i){const s=[],a=t.getRowColCoords(i),u=a.length;for(let d=0;d<u;d++)for(let p=0;p<u;p++)d===0&&p===0||d===0&&p===u-1||d===u-1&&p===0||s.push([a[d],a[p]]);return s}})(CS);var SS={};const wD=Gi.getSymbolSize,_x=7;SS.getPositions=function(e){const n=wD(e);return[[0,0],[n-_x,0],[0,n-_x]]};var bS={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const a=s.size;let u=0,d=0,p=0,y=null,w=null;for(let T=0;T<a;T++){d=p=0,y=w=null;for(let S=0;S<a;S++){let I=s.get(T,S);I===y?d++:(d>=5&&(u+=e.N1+(d-5)),y=I,d=1),I=s.get(S,T),I===w?p++:(p>=5&&(u+=e.N1+(p-5)),w=I,p=1)}d>=5&&(u+=e.N1+(d-5)),p>=5&&(u+=e.N1+(p-5))}return u},t.getPenaltyN2=function(s){const a=s.size;let u=0;for(let d=0;d<a-1;d++)for(let p=0;p<a-1;p++){const y=s.get(d,p)+s.get(d,p+1)+s.get(d+1,p)+s.get(d+1,p+1);(y===4||y===0)&&u++}return u*e.N2},t.getPenaltyN3=function(s){const a=s.size;let u=0,d=0,p=0;for(let y=0;y<a;y++){d=p=0;for(let w=0;w<a;w++)d=d<<1&2047|s.get(y,w),w>=10&&(d===1488||d===93)&&u++,p=p<<1&2047|s.get(w,y),w>=10&&(p===1488||p===93)&&u++}return u*e.N3},t.getPenaltyN4=function(s){let a=0;const u=s.data.length;for(let p=0;p<u;p++)a+=s.data[p];return Math.abs(Math.ceil(a*100/u/5)-10)*e.N4};function n(i,s,a){switch(i){case t.Patterns.PATTERN000:return(s+a)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return a%3===0;case t.Patterns.PATTERN011:return(s+a)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(a/3))%2===0;case t.Patterns.PATTERN101:return s*a%2+s*a%3===0;case t.Patterns.PATTERN110:return(s*a%2+s*a%3)%2===0;case t.Patterns.PATTERN111:return(s*a%3+(s+a)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(s,a){const u=a.size;for(let d=0;d<u;d++)for(let p=0;p<u;p++)a.isReserved(p,d)||a.xor(p,d,n(s,p,d))},t.getBestMask=function(s,a){const u=Object.keys(t.Patterns).length;let d=0,p=1/0;for(let y=0;y<u;y++){a(y),t.applyMask(y,s);const w=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(y,s),w<p&&(p=w,d=y)}return d}})(bS);var y0={};const ga=p0,nf=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],rf=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];y0.getBlocksCount=function(e,n){switch(n){case ga.L:return nf[(e-1)*4+0];case ga.M:return nf[(e-1)*4+1];case ga.Q:return nf[(e-1)*4+2];case ga.H:return nf[(e-1)*4+3];default:return}};y0.getTotalCodewordsCount=function(e,n){switch(n){case ga.L:return rf[(e-1)*4+0];case ga.M:return rf[(e-1)*4+1];case ga.Q:return rf[(e-1)*4+2];case ga.H:return rf[(e-1)*4+3];default:return}};var vS={},E0={};const bu=new Uint8Array(512),Sd=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)bu[n]=e,Sd[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)bu[n]=bu[n-255]})();E0.log=function(e){if(e<1)throw new Error("log("+e+")");return Sd[e]};E0.exp=function(e){return bu[e]};E0.mul=function(e,n){return e===0||n===0?0:bu[Sd[e]+Sd[n]]};(function(t){const e=E0;t.mul=function(i,s){const a=new Uint8Array(i.length+s.length-1);for(let u=0;u<i.length;u++)for(let d=0;d<s.length;d++)a[u+d]^=e.mul(i[u],s[d]);return a},t.mod=function(i,s){let a=new Uint8Array(i);for(;a.length-s.length>=0;){const u=a[0];for(let p=0;p<s.length;p++)a[p]^=e.mul(s[p],u);let d=0;for(;d<a.length&&a[d]===0;)d++;a=a.slice(d)}return a},t.generateECPolynomial=function(i){let s=new Uint8Array([1]);for(let a=0;a<i;a++)s=t.mul(s,new Uint8Array([1,e.exp(a)]));return s}})(vS);const IS=vS;function s2(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}s2.prototype.initialize=function(e){this.degree=e,this.genPoly=IS.generateECPolynomial(this.degree)};s2.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const i=IS.mod(n,this.genPoly),s=this.degree-i.length;if(s>0){const a=new Uint8Array(this.degree);return a.set(i,s),a}return i};var _D=s2,NS={},Qa={},a2={};a2.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ns={};const RS="[0-9]+",AD="[A-Z $%*+\\-./:]+";let Ju="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ju=Ju.replace(/u/g,"\\u");const TD="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ju+`)(?:.|[\r
]))+`;ns.KANJI=new RegExp(Ju,"g");ns.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ns.BYTE=new RegExp(TD,"g");ns.NUMERIC=new RegExp(RS,"g");ns.ALPHANUMERIC=new RegExp(AD,"g");const CD=new RegExp("^"+Ju+"$"),SD=new RegExp("^"+RS+"$"),bD=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ns.testKanji=function(e){return CD.test(e)};ns.testNumeric=function(e){return SD.test(e)};ns.testAlphanumeric=function(e){return bD.test(e)};(function(t){const e=a2,n=ns;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(a,u){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?a.ccBits[0]:u<27?a.ccBits[1]:a.ccBits[2]},t.getBestModeForData=function(a){return n.testNumeric(a)?t.NUMERIC:n.testAlphanumeric(a)?t.ALPHANUMERIC:n.testKanji(a)?t.KANJI:t.BYTE},t.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},t.isValid=function(a){return a&&a.bit&&a.ccBits};function i(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(a,u){if(t.isValid(a))return a;try{return i(a)}catch{return u}}})(Qa);(function(t){const e=Gi,n=y0,i=p0,s=Qa,a=a2,u=7973,d=e.getBCHDigit(u);function p(S,I,q){for(let X=1;X<=40;X++)if(I<=t.getCapacity(X,q,S))return X}function y(S,I){return s.getCharCountIndicator(S,I)+4}function w(S,I){let q=0;return S.forEach(function(X){const $=y(X.mode,I);q+=$+X.getBitsLength()}),q}function T(S,I){for(let q=1;q<=40;q++)if(w(S,q)<=t.getCapacity(q,I,s.MIXED))return q}t.from=function(I,q){return a.isValid(I)?parseInt(I,10):q},t.getCapacity=function(I,q,X){if(!a.isValid(I))throw new Error("Invalid QR Code version");typeof X>"u"&&(X=s.BYTE);const $=e.getSymbolTotalCodewords(I),V=n.getTotalCodewordsCount(I,q),L=($-V)*8;if(X===s.MIXED)return L;const k=L-y(X,I);switch(X){case s.NUMERIC:return Math.floor(k/10*3);case s.ALPHANUMERIC:return Math.floor(k/11*2);case s.KANJI:return Math.floor(k/13);case s.BYTE:default:return Math.floor(k/8)}},t.getBestVersionForData=function(I,q){let X;const $=i.from(q,i.M);if(Array.isArray(I)){if(I.length>1)return T(I,$);if(I.length===0)return 1;X=I[0]}else X=I;return p(X.mode,X.getLength(),$)},t.getEncodedBits=function(I){if(!a.isValid(I)||I<7)throw new Error("Invalid QR Code version");let q=I<<12;for(;e.getBCHDigit(q)-d>=0;)q^=u<<e.getBCHDigit(q)-d;return I<<12|q}})(NS);var MS={};const Jg=Gi,DS=1335,vD=21522,Ax=Jg.getBCHDigit(DS);MS.getEncodedBits=function(e,n){const i=e.bit<<3|n;let s=i<<10;for(;Jg.getBCHDigit(s)-Ax>=0;)s^=DS<<Jg.getBCHDigit(s)-Ax;return(i<<10|s)^vD};var OS={};const ID=Qa;function sc(t){this.mode=ID.NUMERIC,this.data=t.toString()}sc.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};sc.prototype.getLength=function(){return this.data.length};sc.prototype.getBitsLength=function(){return sc.getBitsLength(this.data.length)};sc.prototype.write=function(e){let n,i,s;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),s=parseInt(i,10),e.put(s,10);const a=this.data.length-n;a>0&&(i=this.data.substr(n),s=parseInt(i,10),e.put(s,a*3+1))};var ND=sc;const RD=Qa,C1=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ac(t){this.mode=RD.ALPHANUMERIC,this.data=t}ac.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ac.prototype.getLength=function(){return this.data.length};ac.prototype.getBitsLength=function(){return ac.getBitsLength(this.data.length)};ac.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let i=C1.indexOf(this.data[n])*45;i+=C1.indexOf(this.data[n+1]),e.put(i,11)}this.data.length%2&&e.put(C1.indexOf(this.data[n]),6)};var MD=ac;const DD=Qa;function oc(t){this.mode=DD.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}oc.getBitsLength=function(e){return e*8};oc.prototype.getLength=function(){return this.data.length};oc.prototype.getBitsLength=function(){return oc.getBitsLength(this.data.length)};oc.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var OD=oc;const LD=Qa,PD=Gi;function lc(t){this.mode=LD.KANJI,this.data=t}lc.getBitsLength=function(e){return e*13};lc.prototype.getLength=function(){return this.data.length};lc.prototype.getBitsLength=function(){return lc.getBitsLength(this.data.length)};lc.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=PD.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var kD=lc,LS={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,i,s){var a={},u={};u[i]=0;var d=e.PriorityQueue.make();d.push(i,0);for(var p,y,w,T,S,I,q,X,$;!d.empty();){p=d.pop(),y=p.value,T=p.cost,S=n[y]||{};for(w in S)S.hasOwnProperty(w)&&(I=S[w],q=T+I,X=u[w],$=typeof u[w]>"u",($||X>q)&&(u[w]=q,d.push(w,q),a[w]=y))}if(typeof s<"u"&&typeof u[s]>"u"){var V=["Could not find a path from ",i," to ",s,"."].join("");throw new Error(V)}return a},extract_shortest_path_from_predecessor_list:function(n,i){for(var s=[],a=i;a;)s.push(a),n[a],a=n[a];return s.reverse(),s},find_path:function(n,i,s){var a=e.single_source_shortest_paths(n,i,s);return e.extract_shortest_path_from_predecessor_list(a,s)},PriorityQueue:{make:function(n){var i=e.PriorityQueue,s={},a;n=n||{};for(a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);return s.queue=[],s.sorter=n.sorter||i.default_sorter,s},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var s={value:n,cost:i};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(LS);var BD=LS.exports;(function(t){const e=Qa,n=ND,i=MD,s=OD,a=kD,u=ns,d=Gi,p=BD;function y(V){return unescape(encodeURIComponent(V)).length}function w(V,L,k){const H=[];let oe;for(;(oe=V.exec(k))!==null;)H.push({data:oe[0],index:oe.index,mode:L,length:oe[0].length});return H}function T(V){const L=w(u.NUMERIC,e.NUMERIC,V),k=w(u.ALPHANUMERIC,e.ALPHANUMERIC,V);let H,oe;return d.isKanjiModeEnabled()?(H=w(u.BYTE,e.BYTE,V),oe=w(u.KANJI,e.KANJI,V)):(H=w(u.BYTE_KANJI,e.BYTE,V),oe=[]),L.concat(k,H,oe).sort(function(R,D){return R.index-D.index}).map(function(R){return{data:R.data,mode:R.mode,length:R.length}})}function S(V,L){switch(L){case e.NUMERIC:return n.getBitsLength(V);case e.ALPHANUMERIC:return i.getBitsLength(V);case e.KANJI:return a.getBitsLength(V);case e.BYTE:return s.getBitsLength(V)}}function I(V){return V.reduce(function(L,k){const H=L.length-1>=0?L[L.length-1]:null;return H&&H.mode===k.mode?(L[L.length-1].data+=k.data,L):(L.push(k),L)},[])}function q(V){const L=[];for(let k=0;k<V.length;k++){const H=V[k];switch(H.mode){case e.NUMERIC:L.push([H,{data:H.data,mode:e.ALPHANUMERIC,length:H.length},{data:H.data,mode:e.BYTE,length:H.length}]);break;case e.ALPHANUMERIC:L.push([H,{data:H.data,mode:e.BYTE,length:H.length}]);break;case e.KANJI:L.push([H,{data:H.data,mode:e.BYTE,length:y(H.data)}]);break;case e.BYTE:L.push([{data:H.data,mode:e.BYTE,length:y(H.data)}])}}return L}function X(V,L){const k={},H={start:{}};let oe=["start"];for(let re=0;re<V.length;re++){const R=V[re],D=[];for(let M=0;M<R.length;M++){const z=R[M],G=""+re+M;D.push(G),k[G]={node:z,lastCount:0},H[G]={};for(let j=0;j<oe.length;j++){const F=oe[j];k[F]&&k[F].node.mode===z.mode?(H[F][G]=S(k[F].lastCount+z.length,z.mode)-S(k[F].lastCount,z.mode),k[F].lastCount+=z.length):(k[F]&&(k[F].lastCount=z.length),H[F][G]=S(z.length,z.mode)+4+e.getCharCountIndicator(z.mode,L))}}oe=D}for(let re=0;re<oe.length;re++)H[oe[re]].end=0;return{map:H,table:k}}function $(V,L){let k;const H=e.getBestModeForData(V);if(k=e.from(L,H),k!==e.BYTE&&k.bit<H.bit)throw new Error('"'+V+'" cannot be encoded with mode '+e.toString(k)+`.
 Suggested mode is: `+e.toString(H));switch(k===e.KANJI&&!d.isKanjiModeEnabled()&&(k=e.BYTE),k){case e.NUMERIC:return new n(V);case e.ALPHANUMERIC:return new i(V);case e.KANJI:return new a(V);case e.BYTE:return new s(V)}}t.fromArray=function(L){return L.reduce(function(k,H){return typeof H=="string"?k.push($(H,null)):H.data&&k.push($(H.data,H.mode)),k},[])},t.fromString=function(L,k){const H=T(L,d.isKanjiModeEnabled()),oe=q(H),re=X(oe,k),R=p.find_path(re.map,"start","end"),D=[];for(let M=1;M<R.length-1;M++)D.push(re.table[R[M]].node);return t.fromArray(I(D))},t.rawSplit=function(L){return t.fromArray(T(L,d.isKanjiModeEnabled()))}})(OS);const x0=Gi,S1=p0,VD=ED,UD=xD,FD=CS,jD=SS,$g=bS,em=y0,zD=_D,bd=NS,HD=MS,GD=Qa,b1=OS;function YD(t,e){const n=t.size,i=jD.getPositions(e);for(let s=0;s<i.length;s++){const a=i[s][0],u=i[s][1];for(let d=-1;d<=7;d++)if(!(a+d<=-1||n<=a+d))for(let p=-1;p<=7;p++)u+p<=-1||n<=u+p||(d>=0&&d<=6&&(p===0||p===6)||p>=0&&p<=6&&(d===0||d===6)||d>=2&&d<=4&&p>=2&&p<=4?t.set(a+d,u+p,!0,!0):t.set(a+d,u+p,!1,!0))}}function qD(t){const e=t.size;for(let n=8;n<e-8;n++){const i=n%2===0;t.set(n,6,i,!0),t.set(6,n,i,!0)}}function XD(t,e){const n=FD.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],a=n[i][1];for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)u===-2||u===2||d===-2||d===2||u===0&&d===0?t.set(s+u,a+d,!0,!0):t.set(s+u,a+d,!1,!0)}}function WD(t,e){const n=t.size,i=bd.getEncodedBits(e);let s,a,u;for(let d=0;d<18;d++)s=Math.floor(d/3),a=d%3+n-8-3,u=(i>>d&1)===1,t.set(s,a,u,!0),t.set(a,s,u,!0)}function v1(t,e,n){const i=t.size,s=HD.getEncodedBits(e,n);let a,u;for(a=0;a<15;a++)u=(s>>a&1)===1,a<6?t.set(a,8,u,!0):a<8?t.set(a+1,8,u,!0):t.set(i-15+a,8,u,!0),a<8?t.set(8,i-a-1,u,!0):a<9?t.set(8,15-a-1+1,u,!0):t.set(8,15-a-1,u,!0);t.set(i-8,8,1,!0)}function QD(t,e){const n=t.size;let i=-1,s=n-1,a=7,u=0;for(let d=n-1;d>0;d-=2)for(d===6&&d--;;){for(let p=0;p<2;p++)if(!t.isReserved(s,d-p)){let y=!1;u<e.length&&(y=(e[u]>>>a&1)===1),t.set(s,d-p,y),a--,a===-1&&(u++,a=7)}if(s+=i,s<0||n<=s){s-=i,i=-i;break}}}function KD(t,e,n){const i=new VD;n.forEach(function(p){i.put(p.mode.bit,4),i.put(p.getLength(),GD.getCharCountIndicator(p.mode,t)),p.write(i)});const s=x0.getSymbolTotalCodewords(t),a=em.getTotalCodewordsCount(t,e),u=(s-a)*8;for(i.getLengthInBits()+4<=u&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const d=(u-i.getLengthInBits())/8;for(let p=0;p<d;p++)i.put(p%2?17:236,8);return ZD(i,t,e)}function ZD(t,e,n){const i=x0.getSymbolTotalCodewords(e),s=em.getTotalCodewordsCount(e,n),a=i-s,u=em.getBlocksCount(e,n),d=i%u,p=u-d,y=Math.floor(i/u),w=Math.floor(a/u),T=w+1,S=y-w,I=new zD(S);let q=0;const X=new Array(u),$=new Array(u);let V=0;const L=new Uint8Array(t.buffer);for(let R=0;R<u;R++){const D=R<p?w:T;X[R]=L.slice(q,q+D),$[R]=I.encode(X[R]),q+=D,V=Math.max(V,D)}const k=new Uint8Array(i);let H=0,oe,re;for(oe=0;oe<V;oe++)for(re=0;re<u;re++)oe<X[re].length&&(k[H++]=X[re][oe]);for(oe=0;oe<S;oe++)for(re=0;re<u;re++)k[H++]=$[re][oe];return k}function JD(t,e,n,i){let s;if(Array.isArray(t))s=b1.fromArray(t);else if(typeof t=="string"){let y=e;if(!y){const w=b1.rawSplit(t);y=bd.getBestVersionForData(w,n)}s=b1.fromString(t,y||40)}else throw new Error("Invalid data");const a=bd.getBestVersionForData(s,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const u=KD(e,n,s),d=x0.getSymbolSize(e),p=new UD(d);return YD(p,e),qD(p),XD(p,e),v1(p,n,0),e>=7&&WD(p,e),QD(p,u),isNaN(i)&&(i=$g.getBestMask(p,v1.bind(null,p,n))),$g.applyMask(i,p),v1(p,n,i),{modules:p,version:e,errorCorrectionLevel:n,maskPattern:i,segments:s}}AS.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let i=S1.M,s,a;return typeof n<"u"&&(i=S1.from(n.errorCorrectionLevel,S1.M),s=bd.from(n.version),a=$g.from(n.maskPattern),n.toSJISFunc&&x0.setToSJISFunction(n.toSJISFunc)),JD(e,s,i,a)};var PS={},o2={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(a){return[a,a]}))),i.length===6&&i.push("F","F");const s=parseInt(i.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const s=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,a=i.width&&i.width>=21?i.width:void 0,u=i.scale||4;return{width:a,scale:a?4:u,margin:s,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,s){return s.width&&s.width>=i+s.margin*2?s.width/(i+s.margin*2):s.scale},t.getImageWidth=function(i,s){const a=t.getScale(i,s);return Math.floor((i+s.margin*2)*a)},t.qrToImageData=function(i,s,a){const u=s.modules.size,d=s.modules.data,p=t.getScale(u,a),y=Math.floor((u+a.margin*2)*p),w=a.margin*p,T=[a.color.light,a.color.dark];for(let S=0;S<y;S++)for(let I=0;I<y;I++){let q=(S*y+I)*4,X=a.color.light;if(S>=w&&I>=w&&S<y-w&&I<y-w){const $=Math.floor((S-w)/p),V=Math.floor((I-w)/p);X=T[d[$*u+V]?1:0]}i[q++]=X.r,i[q++]=X.g,i[q++]=X.b,i[q]=X.a}}})(o2);(function(t){const e=o2;function n(s,a,u){s.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=u,a.width=u,a.style.height=u+"px",a.style.width=u+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(a,u,d){let p=d,y=u;typeof p>"u"&&(!u||!u.getContext)&&(p=u,u=void 0),u||(y=i()),p=e.getOptions(p);const w=e.getImageWidth(a.modules.size,p),T=y.getContext("2d"),S=T.createImageData(w,w);return e.qrToImageData(S.data,a,p),n(T,y,w),T.putImageData(S,0,0),y},t.renderToDataURL=function(a,u,d){let p=d;typeof p>"u"&&(!u||!u.getContext)&&(p=u,u=void 0),p||(p={});const y=t.render(a,u,p),w=p.type||"image/png",T=p.rendererOpts||{};return y.toDataURL(w,T.quality)}})(PS);var kS={};const $D=o2;function Tx(t,e){const n=t.a/255,i=e+'="'+t.hex+'"';return n<1?i+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function I1(t,e,n){let i=t+e;return typeof n<"u"&&(i+=" "+n),i}function eO(t,e,n){let i="",s=0,a=!1,u=0;for(let d=0;d<t.length;d++){const p=Math.floor(d%e),y=Math.floor(d/e);!p&&!a&&(a=!0),t[d]?(u++,d>0&&p>0&&t[d-1]||(i+=a?I1("M",p+n,.5+y+n):I1("m",s,0),s=0,a=!1),p+1<e&&t[d+1]||(i+=I1("h",u),u=0)):s++}return i}kS.render=function(e,n,i){const s=$D.getOptions(n),a=e.modules.size,u=e.modules.data,d=a+s.margin*2,p=s.color.light.a?"<path "+Tx(s.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",y="<path "+Tx(s.color.dark,"stroke")+' d="'+eO(u,a,s.margin)+'"/>',w='viewBox="0 0 '+d+" "+d+'"',S='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+w+' shape-rendering="crispEdges">'+p+y+`</svg>
`;return typeof i=="function"&&i(null,S),S};const tO=pD,tm=AS,BS=PS,nO=kS;function l2(t,e,n,i,s){const a=[].slice.call(arguments,1),u=a.length,d=typeof a[u-1]=="function";if(!d&&!tO())throw new Error("Callback required as last argument");if(d){if(u<2)throw new Error("Too few arguments provided");u===2?(s=n,n=e,e=i=void 0):u===3&&(e.getContext&&typeof s>"u"?(s=i,i=void 0):(s=i,i=n,n=e,e=void 0))}else{if(u<1)throw new Error("Too few arguments provided");return u===1?(n=e,e=i=void 0):u===2&&!e.getContext&&(i=n,n=e,e=void 0),new Promise(function(p,y){try{const w=tm.create(n,i);p(t(w,e,i))}catch(w){y(w)}})}try{const p=tm.create(n,i);s(null,t(p,e,i))}catch(p){s(p)}}Th.create=tm.create;Th.toCanvas=l2.bind(null,BS.render);Th.toDataURL=l2.bind(null,BS.renderToDataURL);Th.toString=l2.bind(null,function(t,e,n){return nO.render(t,n)});var _e;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(_e||(_e={}));var Cx=new Map([[_e.QR_CODE,"QR_CODE"],[_e.AZTEC,"AZTEC"],[_e.CODABAR,"CODABAR"],[_e.CODE_39,"CODE_39"],[_e.CODE_93,"CODE_93"],[_e.CODE_128,"CODE_128"],[_e.DATA_MATRIX,"DATA_MATRIX"],[_e.MAXICODE,"MAXICODE"],[_e.ITF,"ITF"],[_e.EAN_13,"EAN_13"],[_e.EAN_8,"EAN_8"],[_e.PDF_417,"PDF_417"],[_e.RSS_14,"RSS_14"],[_e.RSS_EXPANDED,"RSS_EXPANDED"],[_e.UPC_A,"UPC_A"],[_e.UPC_E,"UPC_E"],[_e.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Sx;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Sx||(Sx={}));function iO(t){return Object.values(_e).includes(t)}var ja;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ja||(ja={}));var Er=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[ja.SCAN_TYPE_CAMERA,ja.SCAN_TYPE_FILE],t}(),VS=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Cx.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Cx.get(e))},t}(),bx=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),nm;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(nm||(nm={}));var US=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:nm.UNKWOWN_ERROR}},t}(),FS=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Vr(t){return typeof t>"u"||t===null}function rO(t,e,n){return t>n?n:t<e?e:t}var vl=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Tt=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),vx=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),jS=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(s),u=Object.keys(e),d=0,p=u;d<p.length;d++){var y=p[d];if(a.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},t}(),im={exports:{}};(function(t,e){(function(n,i){i(e)})(Fc,function(n){function i(b){return b==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,r){b.__proto__=r}||function(b,r){for(var o in r)r.hasOwnProperty(o)&&(b[o]=r[o])};function a(b,r){s(b,r);function o(){this.constructor=b}b.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function u(b,r){var o=Object.setPrototypeOf;o?o(b,r):b.__proto__=r}function d(b,r){r===void 0&&(r=b.constructor);var o=Error.captureStackTrace;o&&o(b,r)}var p=function(b){a(r,b);function r(o){var l=this.constructor,c=b.call(this,o)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),u(c,l.prototype),d(c),c}return r}(Error);class y extends p{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}y.kind="Exception";class w extends y{}w.kind="ArgumentException";class T extends y{}T.kind="IllegalArgumentException";class S{constructor(r){if(this.binarizer=r,r===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,l,c){const h=this.binarizer.getLuminanceSource().crop(r,o,l,c);return new S(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends y{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class q{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class X{static arraycopy(r,o,l,c,h){for(;h--;)l[c++]=r[o++]}static currentTimeMillis(){return Date.now()}}class $ extends y{}$.kind="IndexOutOfBoundsException";class V extends ${constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}V.kind="ArrayIndexOutOfBoundsException";class L{static fill(r,o){for(let l=0,c=r.length;l<c;l++)r[l]=o}static fillWithin(r,o,l,c){L.rangeCheck(r.length,o,l);for(let h=o;h<l;h++)r[h]=c}static rangeCheck(r,o,l){if(o>l)throw new T("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new V(o);if(l>r)throw new V(l)}static asList(...r){return r}static create(r,o,l){return Array.from({length:r}).map(h=>Array.from({length:o}).fill(l))}static createInt32Array(r,o,l){return Array.from({length:r}).map(h=>Int32Array.from({length:o}).fill(l))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let l=0,c=r.length;l<c;l++)if(r[l]!==o[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const l of r)o=31*o+l;return o}static fillUint8Array(r,o){for(let l=0;l!==r.length;l++)r[l]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const l=new Uint8Array(o);return l.set(r),l}return r.slice(0,o)}static copyOfRange(r,o,l){const c=l-o,h=new Int32Array(c);return X.arraycopy(r,o,h,0,c),h}static binarySearch(r,o,l){l===void 0&&(l=L.numberComparator);let c=0,h=r.length-1;for(;c<=h;){const f=h+c>>1,m=l(o,r[f]);if(m>0)c=f+1;else if(m<0)h=f-1;else return f}return-c-1}static numberComparator(r,o){return r-o}}class k{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let l=31;return o=r<<16,o!==0&&(l-=16,r=o),o=r<<8,o!==0&&(l-=8,r=o),o=r<<4,o!==0&&(l-=4,r=o),o=r<<2,o!==0&&(l-=2,r=o),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class H{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=H.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=H.makeArray(r);X.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const l=this.bits;let c=Math.floor(r/32),h=l[c];h&=~((1<<(r&31))-1);const f=l.length;for(;h===0;){if(++c===f)return o;h=l[c]}const m=c*32+k.numberOfTrailingZeros(h);return m>o?o:m}getNextUnset(r){const o=this.size;if(r>=o)return o;const l=this.bits;let c=Math.floor(r/32),h=~l[c];h&=~((1<<(r&31))-1);const f=l.length;for(;h===0;){if(++c===f)return o;h=~l[c]}const m=c*32+k.numberOfTrailingZeros(h);return m>o?o:m}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new T;if(o===r)return;o--;const l=Math.floor(r/32),c=Math.floor(o/32),h=this.bits;for(let f=l;f<=c;f++){const m=f>l?0:r&31,x=(2<<(f<c?31:o&31))-(1<<m);h[f]|=x}}clear(){const r=this.bits.length,o=this.bits;for(let l=0;l<r;l++)o[l]=0}isRange(r,o,l){if(o<r||r<0||o>this.size)throw new T;if(o===r)return!0;o--;const c=Math.floor(r/32),h=Math.floor(o/32),f=this.bits;for(let m=c;m<=h;m++){const E=m>c?0:r&31,A=(2<<(m<h?31:o&31))-(1<<E)&4294967295;if((f[m]&A)!==(l?A:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new T("Sizes don't match");const o=this.bits;for(let l=0,c=o.length;l<c;l++)o[l]^=r.bits[l]}toBytes(r,o,l,c){for(let h=0;h<c;h++){let f=0;for(let m=0;m<8;m++)this.get(r)&&(f|=1<<7-m),r++;o[l+h]=f}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,c=this.bits;for(let h=0;h<l;h++){let f=c[h];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,r[o-h]=f}if(this.size!==l*32){const h=l*32-this.size;let f=r[0]>>>h;for(let m=1;m<l;m++){const E=r[m];f|=E<<32-h,r[m-1]=f,f=E>>>h}r[l-1]=f}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof H))return!1;const o=r;return this.size===o.size&&L.equals(this.bits,o.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let r="";for(let o=0,l=this.size;o<l;o++)o&7||(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new H(this.size,this.bits.slice())}}var oe;(function(b){b[b.OTHER=0]="OTHER",b[b.PURE_BARCODE=1]="PURE_BARCODE",b[b.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",b[b.TRY_HARDER=3]="TRY_HARDER",b[b.CHARACTER_SET=4]="CHARACTER_SET",b[b.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",b[b.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",b[b.ASSUME_GS1=7]="ASSUME_GS1",b[b.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",b[b.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",b[b.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(oe||(oe={}));var re=oe;class R extends y{static getFormatInstance(){return new R}}R.kind="FormatException";var D;(function(b){b[b.Cp437=0]="Cp437",b[b.ISO8859_1=1]="ISO8859_1",b[b.ISO8859_2=2]="ISO8859_2",b[b.ISO8859_3=3]="ISO8859_3",b[b.ISO8859_4=4]="ISO8859_4",b[b.ISO8859_5=5]="ISO8859_5",b[b.ISO8859_6=6]="ISO8859_6",b[b.ISO8859_7=7]="ISO8859_7",b[b.ISO8859_8=8]="ISO8859_8",b[b.ISO8859_9=9]="ISO8859_9",b[b.ISO8859_10=10]="ISO8859_10",b[b.ISO8859_11=11]="ISO8859_11",b[b.ISO8859_13=12]="ISO8859_13",b[b.ISO8859_14=13]="ISO8859_14",b[b.ISO8859_15=14]="ISO8859_15",b[b.ISO8859_16=15]="ISO8859_16",b[b.SJIS=16]="SJIS",b[b.Cp1250=17]="Cp1250",b[b.Cp1251=18]="Cp1251",b[b.Cp1252=19]="Cp1252",b[b.Cp1256=20]="Cp1256",b[b.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",b[b.UTF8=22]="UTF8",b[b.ASCII=23]="ASCII",b[b.Big5=24]="Big5",b[b.GB18030=25]="GB18030",b[b.EUC_KR=26]="EUC_KR"})(D||(D={}));class M{constructor(r,o,l,...c){this.valueIdentifier=r,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=c,M.VALUE_IDENTIFIER_TO_ECI.set(r,this),M.NAME_TO_ECI.set(l,this);const h=this.values;for(let f=0,m=h.length;f!==m;f++){const E=h[f];M.VALUES_TO_ECI.set(E,this)}for(const f of c)M.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new R("incorect value");const o=M.VALUES_TO_ECI.get(r);if(o===void 0)throw new R("incorect value");return o}static getCharacterSetECIByName(r){const o=M.NAME_TO_ECI.get(r);if(o===void 0)throw new R("incorect value");return o}equals(r){if(!(r instanceof M))return!1;const o=r;return this.getName()===o.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(D.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(D.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(D.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(D.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(D.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(D.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(D.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(D.Big5,28,"Big5"),M.GB18030=new M(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(D.EUC_KR,30,"EUC_KR","EUC-KR");class z extends y{}z.kind="UnsupportedOperationException";class G{static decode(r,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!G.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof M?r:M.getCharacterSetECIByName(r)}static decodeFallback(r,o){const l=this.encodingCharacterSet(o);if(G.isDecodeFallbackSupported(l)){let c="";for(let h=0,f=r.length;h<f;h++){let m=r[h].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(l.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new z(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(M.UTF8)||r.equals(M.ISO8859_1)||r.equals(M.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let h=0;h<l.length;h++)c.push(l[h].charCodeAt(0));return new Uint8Array(c)}}class j{static castAsNonUtf8Char(r,o=null){const l=o?o.getName():this.ISO88591;return G.decode(new Uint8Array([r]),l)}static guessEncoding(r,o){if(o!=null&&o.get(re.CHARACTER_SET)!==void 0)return o.get(re.CHARACTER_SET).toString();const l=r.length;let c=!0,h=!0,f=!0,m=0,E=0,x=0,A=0,v=0,N=0,U=0,Y=0,W=0,Z=0,ne=0;const fe=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ge=0;ge<l&&(c||h||f);ge++){const ue=r[ge]&255;f&&(m>0?ue&128?m--:f=!1:ue&128&&(ue&64?(m++,ue&32?(m++,ue&16?(m++,ue&8?f=!1:A++):x++):E++):f=!1)),c&&(ue>127&&ue<160?c=!1:ue>159&&(ue<192||ue===215||ue===247)&&ne++),h&&(v>0?ue<64||ue===127||ue>252?h=!1:v--:ue===128||ue===160||ue>239?h=!1:ue>160&&ue<224?(N++,Y=0,U++,U>W&&(W=U)):ue>127?(v++,U=0,Y++,Y>Z&&(Z=Y)):(U=0,Y=0))}return f&&m>0&&(f=!1),h&&v>0&&(h=!1),f&&(fe||E+x+A>0)?j.UTF8:h&&(j.ASSUME_SHIFT_JIS||W>=3||Z>=3)?j.SHIFT_JIS:c&&h?W===2&&N===2||ne*10>=l?j.SHIFT_JIS:j.ISO88591:c?j.ISO88591:h?j.SHIFT_JIS:f?j.UTF8:j.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let l=-1;function c(f,m,E,x,A,v){if(f==="%%")return"%";if(o[++l]===void 0)return;f=x?parseInt(x.substr(1)):void 0;let N=A?parseInt(A.substr(1)):void 0,U;switch(v){case"s":U=o[l];break;case"c":U=o[l][0];break;case"f":U=parseFloat(o[l]).toFixed(f);break;case"p":U=parseFloat(o[l]).toPrecision(f);break;case"e":U=parseFloat(o[l]).toExponential(f);break;case"x":U=parseInt(o[l]).toString(N||16);break;case"d":U=parseFloat(parseInt(o[l],N||10).toPrecision(f)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(N);let Y=parseInt(E),W=E&&E[0]+""=="0"?"0":" ";for(;U.length<Y;)U=m!==void 0?U+W:W+U;return U}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(h,c)}static getBytes(r,o){return G.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}j.SHIFT_JIS=M.SJIS.getName(),j.GB2312="GB2312",j.ISO88591=M.ISO8859_1.getName(),j.EUC_JP="EUC_JP",j.UTF8=M.UTF8.getName(),j.PLATFORM_DEFAULT_ENCODING=j.UTF8,j.ASSUME_SHIFT_JIS=!1;class F{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=j.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,l){for(let c=o;o<o+l;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class Ge{constructor(r,o,l,c){if(this.width=r,this.height=o,this.rowSize=l,this.bits=c,o==null&&(o=r),this.height=o,r<1||o<1)throw new T("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,l=r[0].length,c=new Ge(l,o);for(let h=0;h<o;h++){const f=r[h];for(let m=0;m<l;m++)f[m]&&c.set(m,h)}return c}static parseFromString(r,o,l){if(r===null)throw new T("stringRepresentation cannot be null");const c=new Array(r.length);let h=0,f=0,m=-1,E=0,x=0;for(;x<r.length;)if(r.charAt(x)===`
`||r.charAt(x)==="\r"){if(h>f){if(m===-1)m=h-f;else if(h-f!==m)throw new T("row lengths do not match");f=h,E++}x++}else if(r.substring(x,x+o.length)===o)x+=o.length,c[h]=!0,h++;else if(r.substring(x,x+l.length)===l)x+=l.length,c[h]=!1,h++;else throw new T("illegal character encountered: "+r.substring(x));if(h>f){if(m===-1)m=h-f;else if(h-f!==m)throw new T("row lengths do not match");E++}const A=new Ge(m,E);for(let v=0;v<h;v++)c[v]&&A.set(Math.floor(v%m),Math.floor(v/m));return A}get(r,o){const l=o*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new T("input matrix dimensions do not match");const o=new H(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let h=0,f=this.height;h<f;h++){const m=h*l,E=r.getRow(h,o).getBitArray();for(let x=0;x<l;x++)c[m+x]^=E[x]}}clear(){const r=this.bits,o=r.length;for(let l=0;l<o;l++)r[l]=0}setRegion(r,o,l,c){if(o<0||r<0)throw new T("Left and top must be nonnegative");if(c<1||l<1)throw new T("Height and width must be at least 1");const h=r+l,f=o+c;if(f>this.height||h>this.width)throw new T("The region must fit inside the matrix");const m=this.rowSize,E=this.bits;for(let x=o;x<f;x++){const A=x*m;for(let v=r;v<h;v++)E[A+Math.floor(v/32)]|=1<<(v&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new H(this.width):o.clear();const l=this.rowSize,c=this.bits,h=r*l;for(let f=0;f<l;f++)o.setBulk(f*32,c[h+f]);return o}setRow(r,o){X.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let l=new H(r),c=new H(r);for(let h=0,f=Math.floor((o+1)/2);h<f;h++)l=this.getRow(h,l),c=this.getRow(o-1-h,c),l.reverse(),c.reverse(),this.setRow(h,c),this.setRow(o-1-h,l)}getEnclosingRectangle(){const r=this.width,o=this.height,l=this.rowSize,c=this.bits;let h=r,f=o,m=-1,E=-1;for(let x=0;x<o;x++)for(let A=0;A<l;A++){const v=c[x*l+A];if(v!==0){if(x<f&&(f=x),x>E&&(E=x),A*32<h){let N=0;for(;!(v<<31-N&4294967295);)N++;A*32+N<h&&(h=A*32+N)}if(A*32+31>m){let N=31;for(;!(v>>>N);)N--;A*32+N>m&&(m=A*32+N)}}}return m<h||E<f?null:Int32Array.from([h,f,m-h+1,E-f+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const c=l/r;let h=l%r*32;const f=o[l];let m=0;for(;!(f<<31-m&4294967295);)m++;return h+=m,Int32Array.from([h,c])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const c=Math.floor(l/r);let h=Math.floor(l%r)*32;const f=o[l];let m=31;for(;!(f>>>m);)m--;return h+=m,Int32Array.from([h,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ge))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&L.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+L.hashCode(this.bits),r}toString(r="X ",o="  ",l=`
`){return this.buildToString(r,o,l)}buildToString(r,o,l){let c=new F;for(let h=0,f=this.height;h<f;h++){for(let m=0,E=this.width;m<E;m++)c.append(this.get(m,h)?r:o);c.append(l)}return c.toString()}clone(){return new Ge(this.width,this.height,this.rowSize,this.bits.slice())}}class ie extends y{static getNotFoundInstance(){return new ie}}ie.kind="NotFoundException";class de extends q{constructor(r){super(r),this.luminances=de.EMPTY,this.buckets=new Int32Array(de.LUMINANCE_BUCKETS)}getBlackRow(r,o){const l=this.getLuminanceSource(),c=l.getWidth();o==null||o.getSize()<c?o=new H(c):o.clear(),this.initArrays(c);const h=l.getRow(r,this.luminances),f=this.buckets;for(let E=0;E<c;E++)f[(h[E]&255)>>de.LUMINANCE_SHIFT]++;const m=de.estimateBlackPoint(f);if(c<3)for(let E=0;E<c;E++)(h[E]&255)<m&&o.set(E);else{let E=h[0]&255,x=h[1]&255;for(let A=1;A<c-1;A++){const v=h[A+1]&255;(x*4-E-v)/2<m&&o.set(A),E=x,x=v}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight(),c=new Ge(o,l);this.initArrays(o);const h=this.buckets;for(let E=1;E<5;E++){const x=Math.floor(l*E/5),A=r.getRow(x,this.luminances),v=Math.floor(o*4/5);for(let N=Math.floor(o/5);N<v;N++){const U=A[N]&255;h[U>>de.LUMINANCE_SHIFT]++}}const f=de.estimateBlackPoint(h),m=r.getMatrix();for(let E=0;E<l;E++){const x=E*o;for(let A=0;A<o;A++)(m[x+A]&255)<f&&c.set(A,E)}return c}createBinarizer(r){return new de(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let l=0;l<de.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(r){const o=r.length;let l=0,c=0,h=0;for(let A=0;A<o;A++)r[A]>h&&(c=A,h=r[A]),r[A]>l&&(l=r[A]);let f=0,m=0;for(let A=0;A<o;A++){const v=A-c,N=r[A]*v*v;N>m&&(f=A,m=N)}if(c>f){const A=c;c=f,f=A}if(f-c<=o/16)throw new ie;let E=f-1,x=-1;for(let A=f-1;A>c;A--){const v=A-c,N=v*v*(f-A)*(l-r[A]);N>x&&(E=A,x=N)}return E<<de.LUMINANCE_SHIFT}}de.LUMINANCE_BITS=5,de.LUMINANCE_SHIFT=8-de.LUMINANCE_BITS,de.LUMINANCE_BUCKETS=1<<de.LUMINANCE_BITS,de.EMPTY=Uint8ClampedArray.from([0]);class me extends de{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight();if(o>=me.MINIMUM_DIMENSION&&l>=me.MINIMUM_DIMENSION){const c=r.getMatrix();let h=o>>me.BLOCK_SIZE_POWER;o&me.BLOCK_SIZE_MASK&&h++;let f=l>>me.BLOCK_SIZE_POWER;l&me.BLOCK_SIZE_MASK&&f++;const m=me.calculateBlackPoints(c,h,f,o,l),E=new Ge(o,l);me.calculateThresholdForBlock(c,h,f,o,l,m,E),this.matrix=E}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new me(r)}static calculateThresholdForBlock(r,o,l,c,h,f,m){const E=h-me.BLOCK_SIZE,x=c-me.BLOCK_SIZE;for(let A=0;A<l;A++){let v=A<<me.BLOCK_SIZE_POWER;v>E&&(v=E);const N=me.cap(A,2,l-3);for(let U=0;U<o;U++){let Y=U<<me.BLOCK_SIZE_POWER;Y>x&&(Y=x);const W=me.cap(U,2,o-3);let Z=0;for(let fe=-2;fe<=2;fe++){const ge=f[N+fe];Z+=ge[W-2]+ge[W-1]+ge[W]+ge[W+1]+ge[W+2]}const ne=Z/25;me.thresholdBlock(r,Y,v,ne,c,m)}}}static cap(r,o,l){return r<o?o:r>l?l:r}static thresholdBlock(r,o,l,c,h,f){for(let m=0,E=l*h+o;m<me.BLOCK_SIZE;m++,E+=h)for(let x=0;x<me.BLOCK_SIZE;x++)(r[E+x]&255)<=c&&f.set(o+x,l+m)}static calculateBlackPoints(r,o,l,c,h){const f=h-me.BLOCK_SIZE,m=c-me.BLOCK_SIZE,E=new Array(l);for(let x=0;x<l;x++){E[x]=new Int32Array(o);let A=x<<me.BLOCK_SIZE_POWER;A>f&&(A=f);for(let v=0;v<o;v++){let N=v<<me.BLOCK_SIZE_POWER;N>m&&(N=m);let U=0,Y=255,W=0;for(let ne=0,fe=A*c+N;ne<me.BLOCK_SIZE;ne++,fe+=c){for(let ge=0;ge<me.BLOCK_SIZE;ge++){const ue=r[fe+ge]&255;U+=ue,ue<Y&&(Y=ue),ue>W&&(W=ue)}if(W-Y>me.MIN_DYNAMIC_RANGE)for(ne++,fe+=c;ne<me.BLOCK_SIZE;ne++,fe+=c)for(let ge=0;ge<me.BLOCK_SIZE;ge++)U+=r[fe+ge]&255}let Z=U>>me.BLOCK_SIZE_POWER*2;if(W-Y<=me.MIN_DYNAMIC_RANGE&&(Z=Y/2,x>0&&v>0)){const ne=(E[x-1][v]+2*E[x][v-1]+E[x-1][v-1])/4;Y<ne&&(Z=ne)}E[x][v]=Z}}return E}}me.BLOCK_SIZE_POWER=3,me.BLOCK_SIZE=1<<me.BLOCK_SIZE_POWER,me.BLOCK_SIZE_MASK=me.BLOCK_SIZE-1,me.MINIMUM_DIMENSION=me.BLOCK_SIZE*5,me.MIN_DYNAMIC_RANGE=24;class Ne{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,l,c){throw new z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new z("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new F;for(let l=0;l<this.height;l++){const c=this.getRow(l,r);for(let h=0;h<this.width;h++){const f=c[h]&255;let m;f<64?m="#":f<128?m="+":f<192?m=".":m=" ",o.append(m)}o.append(`
`)}return o.toString()}}class Ye extends Ne{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const l=this.delegate.getRow(r,o),c=this.getWidth();for(let h=0;h<c;h++)l[h]=255-(l[h]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let c=0;c<o;c++)l[c]=255-(r[c]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,l,c){return new Ye(this.delegate.crop(r,o,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ye(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ye(this.delegate.rotateCounterClockwise45())}}class nt extends Ne{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=nt.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return nt.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,l){const c=new Uint8ClampedArray(o*l);for(let h=0,f=0,m=r.length;h<m;h+=4,f++){let E;if(r[h+3]===0)E=255;else{const A=r[h],v=r[h+1],N=r[h+2];E=306*A+601*v+117*N+512>>10}c[f]=E}return c}getRow(r,o){if(r<0||r>=this.getHeight())throw new T("Requested row is outside the image: "+r);const l=this.getWidth(),c=r*l;return o===null?o=this.buffer.slice(c,c+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(c,c+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,l,c){return super.crop(r,o,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),l=o.getContext("2d"),c=r*nt.DEGREE_TO_RADIANS,h=this.canvas.width,f=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*h+Math.abs(Math.sin(c))*f),E=Math.ceil(Math.abs(Math.sin(c))*h+Math.abs(Math.cos(c))*f);return o.width=m,o.height=E,l.translate(m/2,E/2),l.rotate(c),l.drawImage(this.canvas,h/-2,f/-2),this.buffer=nt.makeBufferFromCanvasImageData(o),this}invert(){return new Ye(this)}}nt.DEGREE_TO_RADIANS=Math.PI/180;class Yi{constructor(r,o,l){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var xt=(globalThis||Fc||self||window||void 0)&&(globalThis||Fc||self||window||void 0).__awaiter||function(b,r,o,l){function c(h){return h instanceof o?h:new o(function(f){f(h)})}return new(o||(o=Promise))(function(h,f){function m(A){try{x(l.next(A))}catch(v){f(v)}}function E(A){try{x(l.throw(A))}catch(v){f(v)}}function x(A){A.done?h(A.value):c(A.value).then(m,E)}x((l=l.apply(b,r||[])).next())})};class Gn{constructor(r,o=500,l){this.reader=r,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return xt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of r){const c=l.kind==="video"?"videoinput":l.kind;if(c!=="videoinput")continue;const h=l.deviceId||l.id,f=l.label||`Video device ${o.length+1}`,m=l.groupId,E={deviceId:h,label:f,kind:c,groupId:m};o.push(E)}return o})}getVideoInputDevices(){return xt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Yi(o.deviceId,o.label))})}findDeviceById(r){return xt(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return xt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return xt(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,o)})}decodeOnceFromConstraints(r,o){return xt(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(r,o){return xt(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,o,l){return xt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,l)})}decodeFromVideoDevice(r,o,l){return xt(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeFromConstraints(h,o,l)})}decodeFromConstraints(r,o,l){return xt(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,o,l)})}decodeFromStream(r,o,l){return xt(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return xt(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((o,l)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return xt(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const l=document.getElementById(r);if(!l)throw new w(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new w(`element with id '${r}' must be an ${o} element`);return l}decodeFromImage(r,o){if(!r&&!o)throw new w("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new w("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,l){if(r===void 0&&o===void 0)throw new w("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new w("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(r){if(!r)throw new w("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new w("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=r,l}decodeFromVideoUrl(r){if(!r)throw new w("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=r,l}decodeFromVideoUrlContinuously(r,o){if(!r)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,o);return l.src=r,c}_decodeOnLoadImage(r){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return xt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return xt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,l=!0){this._stopAsyncDecode=!1;const c=(h,f)=>{if(this._stopAsyncDecode){f(new ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(r);h(m)}catch(m){const E=o&&m instanceof ie,A=(m instanceof I||m instanceof R)&&l;if(E||A)return setTimeout(c,this._timeBetweenDecodingAttempts,h,f);f(m)}};return new Promise((h,f)=>c(h,f))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);o(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){o(null,c);const h=c instanceof I||c instanceof R,f=c instanceof ie;(h||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,l){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),l=new nt(o),c=new me(l);return new S(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),o.style.width=l+"px",o.style.height=c+"px",o.width=l,o.height=c,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ct{constructor(r,o,l=o==null?0:8*o.length,c,h,f=X.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=l,this.resultPoints=c,this.format=h,this.timestamp=f,this.text=r,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=c,this.format=h,this.resultMetadata=null,f==null?this.timestamp=X.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(o.length+r.length);X.arraycopy(o,0,l,0,o.length),X.arraycopy(r,0,l,o.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ni;(function(b){b[b.AZTEC=0]="AZTEC",b[b.CODABAR=1]="CODABAR",b[b.CODE_39=2]="CODE_39",b[b.CODE_93=3]="CODE_93",b[b.CODE_128=4]="CODE_128",b[b.DATA_MATRIX=5]="DATA_MATRIX",b[b.EAN_8=6]="EAN_8",b[b.EAN_13=7]="EAN_13",b[b.ITF=8]="ITF",b[b.MAXICODE=9]="MAXICODE",b[b.PDF_417=10]="PDF_417",b[b.QR_CODE=11]="QR_CODE",b[b.RSS_14=12]="RSS_14",b[b.RSS_EXPANDED=13]="RSS_EXPANDED",b[b.UPC_A=14]="UPC_A",b[b.UPC_E=15]="UPC_E",b[b.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ni||(ni={}));var Ce=ni,br;(function(b){b[b.OTHER=0]="OTHER",b[b.ORIENTATION=1]="ORIENTATION",b[b.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",b[b.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",b[b.ISSUE_NUMBER=4]="ISSUE_NUMBER",b[b.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",b[b.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",b[b.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",b[b.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",b[b.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",b[b.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(br||(br={}));var Ht=br;class qi{constructor(r,o,l,c,h=-1,f=-1){this.rawBytes=r,this.text=o,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=f,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class wi{exp(r){return this.expTable[r]}log(r){if(r===0)throw new T;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class Cn{constructor(r,o){if(o.length===0)throw new T;this.field=r;const l=o.length;if(l>1&&o[0]===0){let c=1;for(;c<l&&o[c]===0;)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),X.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(r===1){l=0;for(let f=0,m=o.length;f!==m;f++){const E=o[f];l=wi.addOrSubtract(l,E)}return l}l=o[0];const c=o.length,h=this.field;for(let f=1;f<c;f++)l=wi.addOrSubtract(h.multiply(r,l),o[f]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){const f=o;o=l,l=f}let c=new Int32Array(l.length);const h=l.length-o.length;X.arraycopy(l,0,c,0,h);for(let f=h;f<l.length;f++)c[f]=wi.addOrSubtract(o[f-h],l[f]);return new Cn(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,c=r.coefficients,h=c.length,f=new Int32Array(l+h-1),m=this.field;for(let E=0;E<l;E++){const x=o[E];for(let A=0;A<h;A++)f[E+A]=wi.addOrSubtract(f[E+A],m.multiply(x,c[A]))}return new Cn(m,f)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,l=this.field,c=new Int32Array(o),h=this.coefficients;for(let f=0;f<o;f++)c[f]=l.multiply(h[f],r);return new Cn(l,c)}multiplyByMonomial(r,o){if(r<0)throw new T;if(o===0)return this.field.getZero();const l=this.coefficients,c=l.length,h=new Int32Array(c+r),f=this.field;for(let m=0;m<c;m++)h[m]=f.multiply(l[m],o);return new Cn(f,h)}divide(r){if(!this.field.equals(r.field))throw new T("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new T("Divide by 0");const o=this.field;let l=o.getZero(),c=this;const h=r.getCoefficient(r.getDegree()),f=o.inverse(h);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const m=c.getDegree()-r.getDegree(),E=o.multiply(c.getCoefficient(c.getDegree()),f),x=r.multiplyByMonomial(m,E),A=o.buildMonomial(m,E);l=l.addOrSubtract(A),c=c.addOrSubtract(x)}return[l,c]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),o===0||l!==1){const c=this.field.log(l);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class _i extends y{}_i.kind="ArithmeticException";class Xe extends wi{constructor(r,o,l){super(),this.primitive=r,this.size=o,this.generatorBase=l;const c=new Int32Array(o);let h=1;for(let m=0;m<o;m++)c[m]=h,h*=2,h>=o&&(h^=r,h&=o-1);this.expTable=c;const f=new Int32Array(o);for(let m=0;m<o-1;m++)f[c[m]]=m;this.logTable=f,this.zero=new Cn(this,Int32Array.from([0])),this.one=new Cn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new T;if(o===0)return this.zero;const l=new Int32Array(r+1);return l[0]=o,new Cn(this,l)}inverse(r){if(r===0)throw new _i;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Xe.AZTEC_DATA_12=new Xe(4201,4096,1),Xe.AZTEC_DATA_10=new Xe(1033,1024,1),Xe.AZTEC_DATA_6=new Xe(67,64,1),Xe.AZTEC_PARAM=new Xe(19,16,1),Xe.QR_CODE_FIELD_256=new Xe(285,256,0),Xe.DATA_MATRIX_FIELD_256=new Xe(301,256,1),Xe.AZTEC_DATA_8=Xe.DATA_MATRIX_FIELD_256,Xe.MAXICODE_FIELD_64=Xe.AZTEC_DATA_6;class ur extends y{}ur.kind="ReedSolomonException";class ii extends y{}ii.kind="IllegalStateException";class hr{constructor(r){this.field=r}decode(r,o){const l=this.field,c=new Cn(l,r),h=new Int32Array(o);let f=!0;for(let U=0;U<o;U++){const Y=c.evaluateAt(l.exp(U+l.getGeneratorBase()));h[h.length-1-U]=Y,Y!==0&&(f=!1)}if(f)return;const m=new Cn(l,h),E=this.runEuclideanAlgorithm(l.buildMonomial(o,1),m,o),x=E[0],A=E[1],v=this.findErrorLocations(x),N=this.findErrorMagnitudes(A,v);for(let U=0;U<v.length;U++){const Y=r.length-1-l.log(v[U]);if(Y<0)throw new ur("Bad error location");r[Y]=Xe.addOrSubtract(r[Y],N[U])}}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){const U=r;r=o,o=U}const c=this.field;let h=r,f=o,m=c.getZero(),E=c.getOne();for(;f.getDegree()>=(l/2|0);){let U=h,Y=m;if(h=f,m=E,h.isZero())throw new ur("r_{i-1} was zero");f=U;let W=c.getZero();const Z=h.getCoefficient(h.getDegree()),ne=c.inverse(Z);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){const fe=f.getDegree()-h.getDegree(),ge=c.multiply(f.getCoefficient(f.getDegree()),ne);W=W.addOrSubtract(c.buildMonomial(fe,ge)),f=f.addOrSubtract(h.multiplyByMonomial(fe,ge))}if(E=W.multiply(m).addOrSubtract(Y),f.getDegree()>=h.getDegree())throw new ii("Division algorithm failed to reduce polynomial?")}const x=E.getCoefficient(0);if(x===0)throw new ur("sigmaTilde(0) was zero");const A=c.inverse(x),v=E.multiplyScalar(A),N=f.multiplyScalar(A);return[v,N]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(o);let c=0;const h=this.field;for(let f=1;f<h.getSize()&&c<o;f++)r.evaluateAt(f)===0&&(l[c]=h.inverse(f),c++);if(c!==o)throw new ur("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,o){const l=o.length,c=new Int32Array(l),h=this.field;for(let f=0;f<l;f++){const m=h.inverse(o[f]);let E=1;for(let x=0;x<l;x++)if(f!==x){const A=h.multiply(o[x],m),v=A&1?A&-2:A|1;E=h.multiply(E,v)}c[f]=h.multiply(r.evaluateAt(m),h.inverse(E)),h.getGeneratorBase()!==0&&(c[f]=h.multiply(c[f],m))}return c}}var Yt;(function(b){b[b.UPPER=0]="UPPER",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.DIGIT=3]="DIGIT",b[b.PUNCT=4]="PUNCT",b[b.BINARY=5]="BINARY"})(Yt||(Yt={}));class ft{decode(r){this.ddata=r;let o=r.getBits(),l=this.extractBits(o),c=this.correctBits(l),h=ft.convertBoolArrayToByteArray(c),f=ft.getEncodedData(c),m=new qi(h,f,null,null);return m.setNumBits(c.length),m}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,l=Yt.UPPER,c=Yt.UPPER,h="",f=0;for(;f<o;)if(c===Yt.BINARY){if(o-f<5)break;let m=ft.readCode(r,f,5);if(f+=5,m===0){if(o-f<11)break;m=ft.readCode(r,f,11)+31,f+=11}for(let E=0;E<m;E++){if(o-f<8){f=o;break}const x=ft.readCode(r,f,8);h+=j.castAsNonUtf8Char(x),f+=8}c=l}else{let m=c===Yt.DIGIT?4:5;if(o-f<m)break;let E=ft.readCode(r,f,m);f+=m;let x=ft.getCharacter(c,E);x.startsWith("CTRL_")?(l=c,c=ft.getTable(x.charAt(5)),x.charAt(6)==="L"&&(l=c)):(h+=x,c=l)}return h}static getTable(r){switch(r){case"L":return Yt.LOWER;case"P":return Yt.PUNCT;case"M":return Yt.MIXED;case"D":return Yt.DIGIT;case"B":return Yt.BINARY;case"U":default:return Yt.UPPER}}static getCharacter(r,o){switch(r){case Yt.UPPER:return ft.UPPER_TABLE[o];case Yt.LOWER:return ft.LOWER_TABLE[o];case Yt.MIXED:return ft.MIXED_TABLE[o];case Yt.PUNCT:return ft.PUNCT_TABLE[o];case Yt.DIGIT:return ft.DIGIT_TABLE[o];default:throw new ii("Bad table")}}correctBits(r){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=Xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=Xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=Xe.AZTEC_DATA_10):(l=12,o=Xe.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),h=r.length/l;if(h<c)throw new R;let f=r.length%l,m=new Int32Array(h);for(let N=0;N<h;N++,f+=l)m[N]=ft.readCode(r,f,l);try{new hr(o).decode(m,h-c)}catch(N){throw new R(N)}let E=(1<<l)-1,x=0;for(let N=0;N<c;N++){let U=m[N];if(U===0||U===E)throw new R;(U===1||U===E-1)&&x++}let A=new Array(c*l-x),v=0;for(let N=0;N<c;N++){let U=m[N];if(U===1||U===E-1)A.fill(U>1,v,v+l-1),v+=l-1;else for(let Y=l-1;Y>=0;--Y)A[v++]=(U&1<<Y)!==0}return A}extractBits(r){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),c=(o?11:14)+l*4,h=new Int32Array(c),f=new Array(this.totalBitsInLayer(l,o));if(o)for(let m=0;m<h.length;m++)h[m]=m;else{let m=c+1+2*k.truncDivision(k.truncDivision(c,2)-1,15),E=c/2,x=k.truncDivision(m,2);for(let A=0;A<E;A++){let v=A+k.truncDivision(A,15);h[E-A-1]=x-v-1,h[E+A]=x+v+1}}for(let m=0,E=0;m<l;m++){let x=(l-m)*4+(o?9:12),A=m*2,v=c-1-A;for(let N=0;N<x;N++){let U=N*2;for(let Y=0;Y<2;Y++)f[E+U+Y]=r.get(h[A+Y],h[A+N]),f[E+2*x+U+Y]=r.get(h[A+N],h[v-Y]),f[E+4*x+U+Y]=r.get(h[v-Y],h[v-N]),f[E+6*x+U+Y]=r.get(h[v-N],h[A+Y])}E+=x*8}return f}static readCode(r,o,l){let c=0;for(let h=o;h<o+l;h++)c<<=1,r[h]&&(c|=1);return c}static readByte(r,o){let l=r.length-o;return l>=8?ft.readCode(r,o,8):ft.readCode(r,o,l)<<8-l}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let l=0;l<o.length;l++)o[l]=ft.readByte(r,8*l);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}ft.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ft.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ft.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ft.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ft.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ve{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,l,c){const h=r-l,f=o-c;return Math.sqrt(h*h+f*f)}static sum(r){let o=0;for(let l=0,c=r.length;l!==c;l++){const h=r[l];o+=h}return o}}class Wt{static floatToIntBits(r){return r}}Wt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class xe{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof xe){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Wt.floatToIntBits(this.x)+Wt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let h,f,m;if(l>=o&&l>=c?(f=r[0],h=r[1],m=r[2]):c>=l&&c>=o?(f=r[1],h=r[0],m=r[2]):(f=r[2],h=r[0],m=r[1]),this.crossProductZ(h,f,m)<0){const E=h;h=m,m=E}r[0]=h,r[1]=f,r[2]=m}static distance(r,o){return ve.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,l){const c=o.x,h=o.y;return(l.x-c)*(r.y-h)-(l.y-h)*(r.x-c)}}class Vs{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Us extends Vs{constructor(r,o,l,c,h){super(r,o),this.compact=l,this.nbDatablocks=c,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ri{constructor(r,o,l,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=ri.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const h=o/2|0;if(this.leftInit=l-h,this.rightInit=l+h,this.upInit=c-h,this.downInit=c+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}detect(){let r=this.leftInit,o=this.rightInit,l=this.upInit,c=this.downInit,h=!1,f=!0,m=!1,E=!1,x=!1,A=!1,v=!1;const N=this.width,U=this.height;for(;f;){f=!1;let Y=!0;for(;(Y||!E)&&o<N;)Y=this.containsBlackPoint(l,c,o,!1),Y?(o++,f=!0,E=!0):E||o++;if(o>=N){h=!0;break}let W=!0;for(;(W||!x)&&c<U;)W=this.containsBlackPoint(r,o,c,!0),W?(c++,f=!0,x=!0):x||c++;if(c>=U){h=!0;break}let Z=!0;for(;(Z||!A)&&r>=0;)Z=this.containsBlackPoint(l,c,r,!1),Z?(r--,f=!0,A=!0):A||r--;if(r<0){h=!0;break}let ne=!0;for(;(ne||!v)&&l>=0;)ne=this.containsBlackPoint(r,o,l,!0),ne?(l--,f=!0,v=!0):v||l--;if(l<0){h=!0;break}f&&(m=!0)}if(!h&&m){const Y=o-r;let W=null;for(let ge=1;W===null&&ge<Y;ge++)W=this.getBlackPointOnSegment(r,c-ge,r+ge,c);if(W==null)throw new ie;let Z=null;for(let ge=1;Z===null&&ge<Y;ge++)Z=this.getBlackPointOnSegment(r,l+ge,r+ge,l);if(Z==null)throw new ie;let ne=null;for(let ge=1;ne===null&&ge<Y;ge++)ne=this.getBlackPointOnSegment(o,l+ge,o-ge,l);if(ne==null)throw new ie;let fe=null;for(let ge=1;fe===null&&ge<Y;ge++)fe=this.getBlackPointOnSegment(o,c-ge,o-ge,c);if(fe==null)throw new ie;return this.centerEdges(fe,W,ne,Z)}else throw new ie}getBlackPointOnSegment(r,o,l,c){const h=ve.round(ve.distance(r,o,l,c)),f=(l-r)/h,m=(c-o)/h,E=this.image;for(let x=0;x<h;x++){const A=ve.round(r+x*f),v=ve.round(o+x*m);if(E.get(A,v))return new xe(A,v)}return null}centerEdges(r,o,l,c){const h=r.getX(),f=r.getY(),m=o.getX(),E=o.getY(),x=l.getX(),A=l.getY(),v=c.getX(),N=c.getY(),U=ri.CORR;return h<this.width/2?[new xe(v-U,N+U),new xe(m+U,E+U),new xe(x-U,A-U),new xe(h+U,f-U)]:[new xe(v+U,N+U),new xe(m+U,E-U),new xe(x-U,A+U),new xe(h-U,f-U)]}containsBlackPoint(r,o,l,c){const h=this.image;if(c){for(let f=r;f<=o;f++)if(h.get(f,l))return!0}else for(let f=r;f<=o;f++)if(h.get(l,f))return!0;return!1}}ri.INIT_SIZE=10,ri.CORR=1;class fr{static checkAndNudgePoints(r,o){const l=r.getWidth(),c=r.getHeight();let h=!0;for(let f=0;f<o.length&&h;f+=2){const m=Math.floor(o[f]),E=Math.floor(o[f+1]);if(m<-1||m>l||E<-1||E>c)throw new ie;h=!1,m===-1?(o[f]=0,h=!0):m===l&&(o[f]=l-1,h=!0),E===-1?(o[f+1]=0,h=!0):E===c&&(o[f+1]=c-1,h=!0)}h=!0;for(let f=o.length-2;f>=0&&h;f-=2){const m=Math.floor(o[f]),E=Math.floor(o[f+1]);if(m<-1||m>l||E<-1||E>c)throw new ie;h=!1,m===-1?(o[f]=0,h=!0):m===l&&(o[f]=l-1,h=!0),E===-1?(o[f+1]=0,h=!0):E===c&&(o[f+1]=c-1,h=!0)}}}class Yn{constructor(r,o,l,c,h,f,m,E,x){this.a11=r,this.a21=o,this.a31=l,this.a12=c,this.a22=h,this.a32=f,this.a13=m,this.a23=E,this.a33=x}static quadrilateralToQuadrilateral(r,o,l,c,h,f,m,E,x,A,v,N,U,Y,W,Z){const ne=Yn.quadrilateralToSquare(r,o,l,c,h,f,m,E);return Yn.squareToQuadrilateral(x,A,v,N,U,Y,W,Z).times(ne)}transformPoints(r){const o=r.length,l=this.a11,c=this.a12,h=this.a13,f=this.a21,m=this.a22,E=this.a23,x=this.a31,A=this.a32,v=this.a33;for(let N=0;N<o;N+=2){const U=r[N],Y=r[N+1],W=h*U+E*Y+v;r[N]=(l*U+f*Y+x)/W,r[N+1]=(c*U+m*Y+A)/W}}transformPointsWithValues(r,o){const l=this.a11,c=this.a12,h=this.a13,f=this.a21,m=this.a22,E=this.a23,x=this.a31,A=this.a32,v=this.a33,N=r.length;for(let U=0;U<N;U++){const Y=r[U],W=o[U],Z=h*Y+E*W+v;r[U]=(l*Y+f*W+x)/Z,o[U]=(c*Y+m*W+A)/Z}}static squareToQuadrilateral(r,o,l,c,h,f,m,E){const x=r-l+h-m,A=o-c+f-E;if(x===0&&A===0)return new Yn(l-r,h-l,r,c-o,f-c,o,0,0,1);{const v=l-h,N=m-h,U=c-f,Y=E-f,W=v*Y-N*U,Z=(x*Y-N*A)/W,ne=(v*A-x*U)/W;return new Yn(l-r+Z*l,m-r+ne*m,r,c-o+Z*c,E-o+ne*E,o,Z,ne,1)}}static quadrilateralToSquare(r,o,l,c,h,f,m,E){return Yn.squareToQuadrilateral(r,o,l,c,h,f,m,E).buildAdjoint()}buildAdjoint(){return new Yn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Yn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Ka extends fr{sampleGrid(r,o,l,c,h,f,m,E,x,A,v,N,U,Y,W,Z,ne,fe,ge){const ue=Yn.quadrilateralToQuadrilateral(c,h,f,m,E,x,A,v,N,U,Y,W,Z,ne,fe,ge);return this.sampleGridWithTransform(r,o,l,ue)}sampleGridWithTransform(r,o,l,c){if(o<=0||l<=0)throw new ie;const h=new Ge(o,l),f=new Float32Array(2*o);for(let m=0;m<l;m++){const E=f.length,x=m+.5;for(let A=0;A<E;A+=2)f[A]=A/2+.5,f[A+1]=x;c.transformPoints(f),fr.checkAndNudgePoints(r,f);try{for(let A=0;A<E;A+=2)r.get(Math.floor(f[A]),Math.floor(f[A+1]))&&h.set(A/2,m)}catch{throw new ie}}return h}}class si{static setGridSampler(r){si.gridSampler=r}static getInstance(){return si.gridSampler}}si.gridSampler=new Ka;class tn{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new xe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Za{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(r){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),h=this.getMatrixCornerPoints(l);return new Us(c,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ie;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(l,o);let c=0;for(let f=0;f<4;f++){let m=l[(this.shift+f)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let h=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(r,o){let l=0;r.forEach((c,h,f)=>{let m=(c>>o-2<<1)+(c&1);l=(l<<3)+m}),l=((l&1)<<11)+(l>>1);for(let c=0;c<4;c++)if(k.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new ie}getCorrectedParameterData(r,o){let l,c;o?(l=7,c=2):(l=10,c=4);let h=l-c,f=new Int32Array(l);for(let E=l-1;E>=0;--E)f[E]=r&15,r>>=4;try{new hr(Xe.AZTEC_PARAM).decode(f,h)}catch{throw new ie}let m=0;for(let E=0;E<c;E++)m=(m<<4)+f[E];return m}getBullsEyeCorners(r){let o=r,l=r,c=r,h=r,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let v=this.getFirstDifferent(o,f,1,-1),N=this.getFirstDifferent(l,f,1,1),U=this.getFirstDifferent(c,f,-1,1),Y=this.getFirstDifferent(h,f,-1,-1);if(this.nbCenterLayers>2){let W=this.distancePoint(Y,v)*this.nbCenterLayers/(this.distancePoint(h,o)*(this.nbCenterLayers+2));if(W<.75||W>1.25||!this.isWhiteOrBlackRectangle(v,N,U,Y))break}o=v,l=N,c=U,h=Y,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;let m=new xe(o.getX()+.5,o.getY()-.5),E=new xe(l.getX()+.5,l.getY()+.5),x=new xe(c.getX()-.5,c.getY()+.5),A=new xe(h.getX()-.5,h.getY()-.5);return this.expandSquare([m,E,x,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,l,c;try{let m=new ri(this.image).detect();r=m[0],o=m[1],l=m[2],c=m[3]}catch{let E=this.image.getWidth()/2,x=this.image.getHeight()/2;r=this.getFirstDifferent(new tn(E+7,x-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new tn(E+7,x+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new tn(E-7,x+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new tn(E-7,x-7),!1,-1,-1).toResultPoint()}let h=ve.round((r.getX()+c.getX()+o.getX()+l.getX())/4),f=ve.round((r.getY()+c.getY()+o.getY()+l.getY())/4);try{let m=new ri(this.image,15,h,f).detect();r=m[0],o=m[1],l=m[2],c=m[3]}catch{r=this.getFirstDifferent(new tn(h+7,f-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new tn(h+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new tn(h-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new tn(h-7,f-7),!1,-1,-1).toResultPoint()}return h=ve.round((r.getX()+c.getX()+o.getX()+l.getX())/4),f=ve.round((r.getY()+c.getY()+o.getY()+l.getY())/4),new tn(h,f)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,l,c,h){let f=si.getInstance(),m=this.getDimension(),E=m/2-this.nbCenterLayers,x=m/2+this.nbCenterLayers;return f.sampleGrid(r,m,m,E,E,x,E,x,x,E,x,o.getX(),o.getY(),l.getX(),l.getY(),c.getX(),c.getY(),h.getX(),h.getY())}sampleLine(r,o,l){let c=0,h=this.distanceResultPoint(r,o),f=h/l,m=r.getX(),E=r.getY(),x=f*(o.getX()-r.getX())/h,A=f*(o.getY()-r.getY())/h;for(let v=0;v<l;v++)this.image.get(ve.round(m+v*x),ve.round(E+v*A))&&(c|=1<<l-v-1);return c}isWhiteOrBlackRectangle(r,o,l,c){let h=3;r=new tn(r.getX()-h,r.getY()+h),o=new tn(o.getX()-h,o.getY()-h),l=new tn(l.getX()+h,l.getY()-h),c=new tn(c.getX()+h,c.getY()+h);let f=this.getColor(c,r);if(f===0)return!1;let m=this.getColor(r,o);return m!==f||(m=this.getColor(o,l),m!==f)?!1:(m=this.getColor(l,c),m===f)}getColor(r,o){let l=this.distancePoint(r,o),c=(o.getX()-r.getX())/l,h=(o.getY()-r.getY())/l,f=0,m=r.getX(),E=r.getY(),x=this.image.get(r.getX(),r.getY()),A=Math.ceil(l);for(let N=0;N<A;N++)m+=c,E+=h,this.image.get(ve.round(m),ve.round(E))!==x&&f++;let v=f/l;return v>.1&&v<.9?0:v<=.1===x?1:-1}getFirstDifferent(r,o,l,c){let h=r.getX()+l,f=r.getY()+c;for(;this.isValid(h,f)&&this.image.get(h,f)===o;)h+=l,f+=c;for(h-=l,f-=c;this.isValid(h,f)&&this.image.get(h,f)===o;)h+=l;for(h-=l;this.isValid(h,f)&&this.image.get(h,f)===o;)f+=c;return f-=c,new tn(h,f)}expandSquare(r,o,l){let c=l/(2*o),h=r[0].getX()-r[2].getX(),f=r[0].getY()-r[2].getY(),m=(r[0].getX()+r[2].getX())/2,E=(r[0].getY()+r[2].getY())/2,x=new xe(m+c*h,E+c*f),A=new xe(m-c*h,E-c*f);h=r[1].getX()-r[3].getX(),f=r[1].getY()-r[3].getY(),m=(r[1].getX()+r[3].getX())/2,E=(r[1].getY()+r[3].getY())/2;let v=new xe(m+c*h,E+c*f),N=new xe(m-c*h,E-c*f);return[x,v,A,N]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=ve.round(r.getX()),l=ve.round(r.getY());return this.isValid(o,l)}distancePoint(r,o){return ve.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return ve.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class is{decode(r,o=null){let l=null,c=new Za(r.getBlackMatrix()),h=null,f=null;try{let A=c.detectMirror(!1);h=A.getPoints(),this.reportFoundResultPoints(o,h),f=new ft().decode(A)}catch(A){l=A}if(f==null)try{let A=c.detectMirror(!0);h=A.getPoints(),this.reportFoundResultPoints(o,h),f=new ft().decode(A)}catch(A){throw l??A}let m=new ct(f.getText(),f.getRawBytes(),f.getNumBits(),h,Ce.AZTEC,X.currentTimeMillis()),E=f.getByteSegments();E!=null&&m.putMetadata(Ht.BYTE_SEGMENTS,E);let x=f.getECLevel();return x!=null&&m.putMetadata(Ht.ERROR_CORRECTION_LEVEL,x),m}reportFoundResultPoints(r,o){if(r!=null){let l=r.get(re.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((c,h,f)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class zo extends Gn{constructor(r=500){super(new is,r)}}class St{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(re.TRY_HARDER)===!0&&r.isRotateSupported()){const h=r.rotateCounterClockwise(),f=this.doDecode(h,o),m=f.getResultMetadata();let E=270;m!==null&&m.get(Ht.ORIENTATION)===!0&&(E=E+m.get(Ht.ORIENTATION)%360),f.putMetadata(Ht.ORIENTATION,E);const x=f.getResultPoints();if(x!==null){const A=h.getHeight();for(let v=0;v<x.length;v++)x[v]=new xe(A-x[v].getY()-1,x[v].getX())}return f}else throw new ie}}reset(){}doDecode(r,o){const l=r.getWidth(),c=r.getHeight();let h=new H(l);const f=o&&o.get(re.TRY_HARDER)===!0,m=Math.max(1,c>>(f?8:5));let E;f?E=c:E=15;const x=Math.trunc(c/2);for(let A=0;A<E;A++){const v=Math.trunc((A+1)/2),N=(A&1)===0,U=x+m*(N?v:-v);if(U<0||U>=c)break;try{h=r.getBlackRow(U,h)}catch{continue}for(let Y=0;Y<2;Y++){if(Y===1&&(h.reverse(),o&&o.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const W=new Map;o.forEach((Z,ne)=>W.set(ne,Z)),W.delete(re.NEED_RESULT_POINT_CALLBACK),o=W}try{const W=this.decodeRow(U,h,o);if(Y===1){W.putMetadata(Ht.ORIENTATION,180);const Z=W.getResultPoints();Z!==null&&(Z[0]=new xe(l-Z[0].getX()-1,Z[0].getY()),Z[1]=new xe(l-Z[1].getX()-1,Z[1].getY()))}return W}catch{}}}throw new ie}static recordPattern(r,o,l){const c=l.length;for(let x=0;x<c;x++)l[x]=0;const h=r.getSize();if(o>=h)throw new ie;let f=!r.get(o),m=0,E=o;for(;E<h;){if(r.get(E)!==f)l[m]++;else{if(++m===c)break;l[m]=1,f=!f}E++}if(!(m===c||m===c-1&&E===h))throw new ie}static recordPatternInReverse(r,o,l){let c=l.length,h=r.get(o);for(;o>0&&c>=0;)r.get(--o)!==h&&(c--,h=!h);if(c>=0)throw new ie;St.recordPattern(r,o+1,l)}static patternMatchVariance(r,o,l){const c=r.length;let h=0,f=0;for(let x=0;x<c;x++)h+=r[x],f+=o[x];if(h<f)return Number.POSITIVE_INFINITY;const m=h/f;l*=m;let E=0;for(let x=0;x<c;x++){const A=r[x],v=o[x]*m,N=A>v?A-v:v-A;if(N>l)return Number.POSITIVE_INFINITY;E+=N}return E/h}}class Q extends St{static findStartPattern(r){const o=r.getSize(),l=r.getNextSet(0);let c=0,h=Int32Array.from([0,0,0,0,0,0]),f=l,m=!1;const E=6;for(let x=l;x<o;x++)if(r.get(x)!==m)h[c]++;else{if(c===E-1){let A=Q.MAX_AVG_VARIANCE,v=-1;for(let N=Q.CODE_START_A;N<=Q.CODE_START_C;N++){const U=St.patternMatchVariance(h,Q.CODE_PATTERNS[N],Q.MAX_INDIVIDUAL_VARIANCE);U<A&&(A=U,v=N)}if(v>=0&&r.isRange(Math.max(0,f-(x-f)/2),f,!1))return Int32Array.from([f,x,v]);f+=h[0]+h[1],h=h.slice(2,h.length-1),h[c-1]=0,h[c]=0,c--}else c++;h[c]=1,m=!m}throw new ie}static decodeCode(r,o,l){St.recordPattern(r,l,o);let c=Q.MAX_AVG_VARIANCE,h=-1;for(let f=0;f<Q.CODE_PATTERNS.length;f++){const m=Q.CODE_PATTERNS[f],E=this.patternMatchVariance(o,m,Q.MAX_INDIVIDUAL_VARIANCE);E<c&&(c=E,h=f)}if(h>=0)return h;throw new ie}decodeRow(r,o,l){const c=l&&l.get(re.ASSUME_GS1)===!0,h=Q.findStartPattern(o),f=h[2];let m=0;const E=new Uint8Array(20);E[m++]=f;let x;switch(f){case Q.CODE_START_A:x=Q.CODE_CODE_A;break;case Q.CODE_START_B:x=Q.CODE_CODE_B;break;case Q.CODE_START_C:x=Q.CODE_CODE_C;break;default:throw new R}let A=!1,v=!1,N="",U=h[0],Y=h[1];const W=Int32Array.from([0,0,0,0,0,0]);let Z=0,ne=0,fe=f,ge=0,ue=!0,Ze=!1,je=!1;for(;!A;){const nl=v;switch(v=!1,Z=ne,ne=Q.decodeCode(o,W,Y),E[m++]=ne,ne!==Q.CODE_STOP&&(ue=!0),ne!==Q.CODE_STOP&&(ge++,fe+=ge*ne),U=Y,Y+=W.reduce((rb,sb)=>rb+sb,0),ne){case Q.CODE_START_A:case Q.CODE_START_B:case Q.CODE_START_C:throw new R}switch(x){case Q.CODE_CODE_A:if(ne<64)je===Ze?N+=String.fromCharCode(32+ne):N+=String.fromCharCode(32+ne+128),je=!1;else if(ne<96)je===Ze?N+=String.fromCharCode(ne-64):N+=String.fromCharCode(ne+64),je=!1;else switch(ne!==Q.CODE_STOP&&(ue=!1),ne){case Q.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+="");break;case Q.CODE_FNC_2:case Q.CODE_FNC_3:break;case Q.CODE_FNC_4_A:!Ze&&je?(Ze=!0,je=!1):Ze&&je?(Ze=!1,je=!1):je=!0;break;case Q.CODE_SHIFT:v=!0,x=Q.CODE_CODE_B;break;case Q.CODE_CODE_B:x=Q.CODE_CODE_B;break;case Q.CODE_CODE_C:x=Q.CODE_CODE_C;break;case Q.CODE_STOP:A=!0;break}break;case Q.CODE_CODE_B:if(ne<96)je===Ze?N+=String.fromCharCode(32+ne):N+=String.fromCharCode(32+ne+128),je=!1;else switch(ne!==Q.CODE_STOP&&(ue=!1),ne){case Q.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+="");break;case Q.CODE_FNC_2:case Q.CODE_FNC_3:break;case Q.CODE_FNC_4_B:!Ze&&je?(Ze=!0,je=!1):Ze&&je?(Ze=!1,je=!1):je=!0;break;case Q.CODE_SHIFT:v=!0,x=Q.CODE_CODE_A;break;case Q.CODE_CODE_A:x=Q.CODE_CODE_A;break;case Q.CODE_CODE_C:x=Q.CODE_CODE_C;break;case Q.CODE_STOP:A=!0;break}break;case Q.CODE_CODE_C:if(ne<100)ne<10&&(N+="0"),N+=ne;else switch(ne!==Q.CODE_STOP&&(ue=!1),ne){case Q.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+="");break;case Q.CODE_CODE_A:x=Q.CODE_CODE_A;break;case Q.CODE_CODE_B:x=Q.CODE_CODE_B;break;case Q.CODE_STOP:A=!0;break}break}nl&&(x=x===Q.CODE_CODE_A?Q.CODE_CODE_B:Q.CODE_CODE_A)}const ci=Y-U;if(Y=o.getNextUnset(Y),!o.isRange(Y,Math.min(o.getSize(),Y+(Y-U)/2),!1))throw new ie;if(fe-=ge*Z,fe%103!==Z)throw new I;const mr=N.length;if(mr===0)throw new ie;mr>0&&ue&&(x===Q.CODE_CODE_C?N=N.substring(0,mr-2):N=N.substring(0,mr-1));const ui=(h[1]+h[0])/2,Nt=U+ci/2,Pn=E.length,Ni=new Uint8Array(Pn);for(let nl=0;nl<Pn;nl++)Ni[nl]=E[nl];const tl=[new xe(ui,r),new xe(Nt,r)];return new ct(N,Ni,0,tl,Ce.CODE_128,new Date().getTime())}}Q.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Q.MAX_AVG_VARIANCE=.25,Q.MAX_INDIVIDUAL_VARIANCE=.7,Q.CODE_SHIFT=98,Q.CODE_CODE_C=99,Q.CODE_CODE_B=100,Q.CODE_CODE_A=101,Q.CODE_FNC_1=102,Q.CODE_FNC_2=97,Q.CODE_FNC_3=96,Q.CODE_FNC_4_A=101,Q.CODE_FNC_4_B=100,Q.CODE_START_A=103,Q.CODE_START_B=104,Q.CODE_START_C=105,Q.CODE_STOP=106;class ye extends St{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,l){let c=this.counters;c.fill(0),this.decodeRowResult="";let h=ye.findAsteriskPattern(o,c),f=o.getNextSet(h[1]),m=o.getSize(),E,x;do{ye.recordPattern(o,f,c);let W=ye.toNarrowWidePattern(c);if(W<0)throw new ie;E=ye.patternToChar(W),this.decodeRowResult+=E,x=f;for(let Z of c)f+=Z;f=o.getNextSet(f)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let A=0;for(let W of c)A+=W;let v=f-x-A;if(f!==m&&v*2<A)throw new ie;if(this.usingCheckDigit){let W=this.decodeRowResult.length-1,Z=0;for(let ne=0;ne<W;ne++)Z+=ye.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ne));if(this.decodeRowResult.charAt(W)!==ye.ALPHABET_STRING.charAt(Z%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,W)}if(this.decodeRowResult.length===0)throw new ie;let N;this.extendedMode?N=ye.decodeExtended(this.decodeRowResult):N=this.decodeRowResult;let U=(h[1]+h[0])/2,Y=x+A/2;return new ct(N,null,0,[new xe(U,r),new xe(Y,r)],Ce.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let l=r.getSize(),c=r.getNextSet(0),h=0,f=c,m=!1,E=o.length;for(let x=c;x<l;x++)if(r.get(x)!==m)o[h]++;else{if(h===E-1){if(this.toNarrowWidePattern(o)===ye.ASTERISK_ENCODING&&r.isRange(Math.max(0,f-Math.floor((x-f)/2)),f,!1))return[f,x];f+=o[0]+o[1],o.copyWithin(0,2,2+h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,m=!m}throw new ie}static toNarrowWidePattern(r){let o=r.length,l=0,c;do{let h=2147483647;for(let E of r)E<h&&E>l&&(h=E);l=h,c=0;let f=0,m=0;for(let E=0;E<o;E++){let x=r[E];x>l&&(m|=1<<o-1-E,c++,f+=x)}if(c===3){for(let E=0;E<o&&c>0;E++){let x=r[E];if(x>l&&(c--,x*2>=f))return-1}return m}}while(c>3);return-1}static patternToChar(r){for(let o=0;o<ye.CHARACTER_ENCODINGS.length;o++)if(ye.CHARACTER_ENCODINGS[o]===r)return ye.ALPHABET_STRING.charAt(o);if(r===ye.ASTERISK_ENCODING)return"*";throw new ie}static decodeExtended(r){let o=r.length,l="";for(let c=0;c<o;c++){let h=r.charAt(c);if(h==="+"||h==="$"||h==="%"||h==="/"){let f=r.charAt(c+1),m="\0";switch(h){case"+":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)+32);else throw new R;break;case"$":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)-64);else throw new R;break;case"%":if(f>="A"&&f<="E")m=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")m=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")m=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")m="\0";else if(f==="V")m="@";else if(f==="W")m="`";else if(f==="X"||f==="Y"||f==="Z")m="";else throw new R;break;case"/":if(f>="A"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")m=":";else throw new R;break}l+=m,c++}else l+=h}return l}}ye.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ye.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ye.ASTERISK_ENCODING=148;class Ae extends St{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,l){let c=this.decodeStart(o),h=this.decodeEnd(o),f=new F;Ae.decodeMiddle(o,c[1],h[0],f);let m=f.toString(),E=null;l!=null&&(E=l.get(re.ALLOWED_LENGTHS)),E==null&&(E=Ae.DEFAULT_ALLOWED_LENGTHS);let x=m.length,A=!1,v=0;for(let Y of E){if(x===Y){A=!0;break}Y>v&&(v=Y)}if(!A&&x>v&&(A=!0),!A)throw new R;const N=[new xe(c[1],r),new xe(h[0],r)];return new ct(m,null,0,N,Ce.ITF,new Date().getTime())}static decodeMiddle(r,o,l,c){let h=new Int32Array(10),f=new Int32Array(5),m=new Int32Array(5);for(h.fill(0),f.fill(0),m.fill(0);o<l;){St.recordPattern(r,o,h);for(let x=0;x<5;x++){let A=2*x;f[x]=h[A],m[x]=h[A+1]}let E=Ae.decodeDigit(f);c.append(E.toString()),E=this.decodeDigit(m),c.append(E.toString()),h.forEach(function(x){o+=x})}}decodeStart(r){let o=Ae.skipWhiteSpace(r),l=Ae.findGuardPattern(r,o,Ae.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let c=o-1;l>0&&c>=0&&!r.get(c);c--)l--;if(l!==0)throw new ie}static skipWhiteSpace(r){const o=r.getSize(),l=r.getNextSet(0);if(l===o)throw new ie;return l}decodeEnd(r){r.reverse();try{let o=Ae.skipWhiteSpace(r),l;try{l=Ae.findGuardPattern(r,o,Ae.END_PATTERN_REVERSED[0])}catch(h){h instanceof ie&&(l=Ae.findGuardPattern(r,o,Ae.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let c=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-c,l}finally{r.reverse()}}static findGuardPattern(r,o,l){let c=l.length,h=new Int32Array(c),f=r.getSize(),m=!1,E=0,x=o;h.fill(0);for(let A=o;A<f;A++)if(r.get(A)!==m)h[E]++;else{if(E===c-1){if(St.patternMatchVariance(h,l,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE)return[x,A];x+=h[0]+h[1],X.arraycopy(h,2,h,0,E-1),h[E-1]=0,h[E]=0,E--}else E++;h[E]=1,m=!m}throw new ie}static decodeDigit(r){let o=Ae.MAX_AVG_VARIANCE,l=-1,c=Ae.PATTERNS.length;for(let h=0;h<c;h++){let f=Ae.PATTERNS[h],m=St.patternMatchVariance(r,f,Ae.MAX_INDIVIDUAL_VARIANCE);m<o?(o=m,l=h):m===o&&(l=-1)}if(l>=0)return l%10;throw new ie}}Ae.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ae.MAX_AVG_VARIANCE=.38,Ae.MAX_INDIVIDUAL_VARIANCE=.5,Ae.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ae.START_PATTERN=Int32Array.from([1,1,1,1]),Ae.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pe extends St{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,l,c=0,h=Int32Array.from([0,0,0]);for(;!o;){h=Int32Array.from([0,0,0]),l=Pe.findGuardPattern(r,c,!1,this.START_END_PATTERN,h);let f=l[0];c=l[1];let m=f-(c-f);m>=0&&(o=r.isRange(m,f,!1))}return l}static checkChecksum(r){return Pe.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return Pe.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let c=o-1;c>=0;c-=2){let h=r.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new R;l+=h}l*=3;for(let c=o-2;c>=0;c-=2){let h=r.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new R;l+=h}return(1e3-l)%10}static decodeEnd(r,o){return Pe.findGuardPattern(r,o,!1,Pe.START_END_PATTERN,new Int32Array(Pe.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,l,c){return this.findGuardPattern(r,o,l,c,new Int32Array(c.length))}static findGuardPattern(r,o,l,c,h){let f=r.getSize();o=l?r.getNextUnset(o):r.getNextSet(o);let m=0,E=o,x=c.length,A=l;for(let v=o;v<f;v++)if(r.get(v)!==A)h[m]++;else{if(m===x-1){if(St.patternMatchVariance(h,c,Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE)return Int32Array.from([E,v]);E+=h[0]+h[1];let N=h.slice(2,h.length-1);for(let U=0;U<m-1;U++)h[U]=N[U];h[m-1]=0,h[m]=0,m--}else m++;h[m]=1,A=!A}throw new ie}static decodeDigit(r,o,l,c){this.recordPattern(r,l,o);let h=this.MAX_AVG_VARIANCE,f=-1,m=c.length;for(let E=0;E<m;E++){let x=c[E],A=St.patternMatchVariance(o,x,Pe.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,f=E)}if(f>=0)return f;throw new ie}}Pe.MAX_AVG_VARIANCE=.48,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.START_END_PATTERN=Int32Array.from([1,1,1]),Pe.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pe.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pe.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class rt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(o,l,c),f=c.toString(),m=rt.parseExtensionString(f),E=[new xe((l[0]+l[1])/2,r),new xe(h,r)],x=new ct(f,null,0,E,Ce.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&x.putAllMetadata(m),x}decodeMiddle(r,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=r.getSize(),f=o[1],m=0;for(let x=0;x<5&&f<h;x++){let A=Pe.decodeDigit(r,c,f,Pe.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let v of c)f+=v;A>=10&&(m|=1<<4-x),x!==4&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(l.length!==5)throw new ie;let E=this.determineCheckDigit(m);if(rt.extensionChecksum(l.toString())!==E)throw new ie;return f}static extensionChecksum(r){let o=r.length,l=0;for(let c=o-2;c>=0;c-=2)l+=r.charAt(c).charCodeAt(0)-48;l*=3;for(let c=o-1;c>=0;c-=2)l+=r.charAt(c).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ie}static parseExtensionString(r){if(r.length!==5)return null;let o=rt.parseExtension5String(r);return o==null?null:new Map([[Ht.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(r.substring(1)),c=(l/100).toString(),h=l%100,f=h<10?"0"+h:h.toString();return o+c+"."+f}}class wt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(o,l,c),f=c.toString(),m=wt.parseExtensionString(f),E=[new xe((l[0]+l[1])/2,r),new xe(h,r)],x=new ct(f,null,0,E,Ce.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&x.putAllMetadata(m),x}decodeMiddle(r,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=r.getSize(),f=o[1],m=0;for(let E=0;E<2&&f<h;E++){let x=Pe.decodeDigit(r,c,f,Pe.L_AND_G_PATTERNS);l+=String.fromCharCode(48+x%10);for(let A of c)f+=A;x>=10&&(m|=1<<1-E),E!==1&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(l.length!==2)throw new ie;if(parseInt(l.toString())%4!==m)throw new ie;return f}static parseExtensionString(r){return r.length!==2?null:new Map([[Ht.ISSUE_NUMBER,parseInt(r)]])}}class vr{static decodeRow(r,o,l){let c=Pe.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new rt().decodeRow(r,o,c)}catch{return new wt().decodeRow(r,o,c)}}}vr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class st extends Pe{constructor(){super(),this.decodeRowStringBuffer="",st.L_AND_G_PATTERNS=st.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=st.L_PATTERNS[r-10],l=new Int32Array(o.length);for(let c=0;c<o.length;c++)l[c]=o[o.length-c-1];st.L_AND_G_PATTERNS[r]=l}}decodeRow(r,o,l){let c=st.findStartGuardPattern(o),h=l==null?null:l.get(re.NEED_RESULT_POINT_CALLBACK);if(h!=null){const ue=new xe((c[0]+c[1])/2,r);h.foundPossibleResultPoint(ue)}let f=this.decodeMiddle(o,c,this.decodeRowStringBuffer),m=f.rowOffset,E=f.resultString;if(h!=null){const ue=new xe(m,r);h.foundPossibleResultPoint(ue)}let x=this.decodeEnd(o,m);if(h!=null){const ue=new xe((x[0]+x[1])/2,r);h.foundPossibleResultPoint(ue)}let A=x[1],v=A+(A-x[0]);if(v>=o.getSize()||!o.isRange(A,v,!1))throw new ie;let N=E.toString();if(N.length<8)throw new R;if(!st.checkChecksum(N))throw new I;let U=(c[1]+c[0])/2,Y=(x[1]+x[0])/2,W=this.getBarcodeFormat(),Z=[new xe(U,r),new xe(Y,r)],ne=new ct(N,null,0,Z,W,new Date().getTime()),fe=0;try{let ue=vr.decodeRow(r,o,x[1]);ne.putMetadata(Ht.UPC_EAN_EXTENSION,ue.getText()),ne.putAllMetadata(ue.getResultMetadata()),ne.addResultPoints(ue.getResultPoints()),fe=ue.getText().length}catch{}let ge=l==null?null:l.get(re.ALLOWED_EAN_EXTENSIONS);if(ge!=null){let ue=!1;for(let Ze in ge)if(fe.toString()===Ze){ue=!0;break}if(!ue)throw new ie}return ne}decodeEnd(r,o){return st.findGuardPattern(r,o,!1,st.START_END_PATTERN,new Int32Array(st.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return st.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return st.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let c=o-1;c>=0;c-=2){let h=r.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new R;l+=h}l*=3;for(let c=o-2;c>=0;c-=2){let h=r.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new R;l+=h}return(1e3-l)%10}}class qt extends st{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=r.getSize(),f=o[1],m=0;for(let x=0;x<6&&f<h;x++){let A=st.decodeDigit(r,c,f,st.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let v of c)f+=v;A>=10&&(m|=1<<5-x)}l=qt.determineFirstDigit(l,m),f=st.findGuardPattern(r,f,!0,st.MIDDLE_PATTERN,new Int32Array(st.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&f<h;x++){let A=st.decodeDigit(r,c,f,st.L_PATTERNS);l+=String.fromCharCode(48+A);for(let v of c)f+=v}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return Ce.EAN_13}static determineFirstDigit(r,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new ie}}qt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class bc extends st{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=r.getSize(),f=o[1];for(let E=0;E<4&&f<h;E++){let x=st.decodeDigit(r,c,f,st.L_PATTERNS);l+=String.fromCharCode(48+x);for(let A of c)f+=A}f=st.findGuardPattern(r,f,!0,st.MIDDLE_PATTERN,new Int32Array(st.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<4&&f<h;E++){let x=st.decodeDigit(r,c,f,st.L_PATTERNS);l+=String.fromCharCode(48+x);for(let A of c)f+=A}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return Ce.EAN_8}}class Fs extends st{constructor(){super(...arguments),this.ean13Reader=new qt}getBarcodeFormat(){return Ce.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,l))}decodeMiddle(r,o,l){return this.ean13Reader.decodeMiddle(r,o,l)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let l=new ct(o.substring(1),null,null,r.getResultPoints(),Ce.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new ie}reset(){this.ean13Reader.reset()}}class Ln extends st{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,l){const c=this.decodeMiddleCounters.map(x=>x);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const h=r.getSize();let f=o[1],m=0;for(let x=0;x<6&&f<h;x++){const A=Ln.decodeDigit(r,c,f,Ln.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let v of c)f+=v;A>=10&&(m|=1<<5-x)}let E=Ln.determineNumSysAndCheckDigit(l,m);return{rowOffset:f,resultString:E}}decodeEnd(r,o){return Ln.findGuardPatternWithoutCounters(r,o,!0,Ln.MIDDLE_END_PATTERN)}checkChecksum(r){return st.checkChecksum(Ln.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c]){let h=String.fromCharCode(48+l),f=String.fromCharCode(48+c);return h+r+f}throw ie.getNotFoundInstance()}getBarcodeFormat(){return Ce.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(h=>h.charCodeAt(0)),l=new F;l.append(r.charAt(0));let c=o[5];switch(c){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(c),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(c);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Ln.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ln.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class vc extends St{constructor(r){super();let o=r==null?null:r.get(re.POSSIBLE_FORMATS),l=[];i(o)?(l.push(new qt),l.push(new Fs),l.push(new bc),l.push(new Ln)):(o.indexOf(Ce.EAN_13)>-1&&l.push(new qt),o.indexOf(Ce.UPC_A)>-1&&l.push(new Fs),o.indexOf(Ce.EAN_8)>-1&&l.push(new bc),o.indexOf(Ce.UPC_E)>-1&&l.push(new Ln)),this.readers=l}decodeRow(r,o,l){for(let c of this.readers)try{const h=c.decodeRow(r,o,l),f=h.getBarcodeFormat()===Ce.EAN_13&&h.getText().charAt(0)==="0",m=l==null?null:l.get(re.POSSIBLE_FORMATS),E=m==null||m.includes(Ce.UPC_A);if(f&&E){const x=h.getRawBytes(),A=new ct(h.getText().substring(1),x,x?x.length:null,h.getResultPoints(),Ce.UPC_A);return A.putAllMetadata(h.getResultMetadata()),A}return h}catch{}throw new ie}reset(){for(let r of this.readers)r.reset()}}class Sn extends St{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let l=0;l<o.length;l++)if(St.patternMatchVariance(r,o[l],Sn.MAX_INDIVIDUAL_VARIANCE)<Sn.MAX_AVG_VARIANCE)return l;throw new ie}static count(r){return ve.sum(new Int32Array(r))}static increment(r,o){let l=0,c=o[0];for(let h=1;h<r.length;h++)o[h]>c&&(c=o[h],l=h);r[l]++}static decrement(r,o){let l=0,c=o[0];for(let h=1;h<r.length;h++)o[h]<c&&(c=o[h],l=h);r[l]--}static isFinderPattern(r){let o=r[0]+r[1],l=o+r[2]+r[3],c=o/l;if(c>=Sn.MIN_FINDER_PATTERN_RATIO&&c<=Sn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let m of r)m>f&&(f=m),m<h&&(h=m);return f<10*h}return!1}}Sn.MAX_AVG_VARIANCE=.2,Sn.MAX_INDIVIDUAL_VARIANCE=.45,Sn.MIN_FINDER_PATTERN_RATIO=9.5/12,Sn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ai{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Ai))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ho{constructor(r,o,l,c,h){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new xe(l,h)),this.resultPoints.push(new xe(c,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Ho))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class Xi{constructor(){}static getRSSvalue(r,o,l){let c=0;for(let E of r)c+=E;let h=0,f=0,m=r.length;for(let E=0;E<m-1;E++){let x;for(x=1,f|=1<<E;x<r[E];x++,f&=~(1<<E)){let A=Xi.combins(c-x-1,m-E-2);if(l&&f===0&&c-x-(m-E-1)>=m-E-1&&(A-=Xi.combins(c-x-(m-E),m-E-2)),m-E-1>1){let v=0;for(let N=c-x-(m-E-2);N>o;N--)v+=Xi.combins(c-x-N-1,m-E-3);A-=v*(m-1-E)}else c-x>o&&A--;h+=A}c-=x}return h}static combins(r,o){let l,c;r-o>o?(c=o,l=r-o):(c=r-o,l=o);let h=1,f=1;for(let m=r;m>l;m--)h*=m,f<=c&&(h/=f,f++);for(;f<=c;)h/=f,f++;return h}}class Go{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let l=12*o,c=new H(l),h=0,m=r[0].getRightChar().getValue();for(let E=11;E>=0;--E)m&1<<E&&c.set(h),h++;for(let E=1;E<r.length;++E){let x=r[E],A=x.getLeftChar().getValue();for(let v=11;v>=0;--v)A&1<<v&&c.set(h),h++;if(x.getRightChar()!=null){let v=x.getRightChar().getValue();for(let N=11;N>=0;--N)v&1<<N&&c.set(h),h++}}return c}}class Ir{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Yo{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class bn extends Yo{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===bn.FNC1}}bn.FNC1="$";class Ti extends Yo{constructor(r,o,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ai extends Yo{constructor(r,o,l){if(super(r),o<0||o>10||l<0||l>10)throw new R;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ai.FNC1}isSecondDigitFNC1(){return this.secondDigit===ai.FNC1}isAnyFNC1(){return this.firstDigit===ai.FNC1||this.secondDigit===ai.FNC1}}ai.FNC1=10;class pe{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ie;let o=r.substring(0,2);for(let h of pe.TWO_DIGIT_DATA_LENGTH)if(h[0]===o)return h[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(2,h[2],r):pe.processFixedAI(2,h[1],r);if(r.length<3)throw new ie;let l=r.substring(0,3);for(let h of pe.THREE_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(3,h[2],r):pe.processFixedAI(3,h[1],r);for(let h of pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,h[2],r):pe.processFixedAI(4,h[1],r);if(r.length<4)throw new ie;let c=r.substring(0,4);for(let h of pe.FOUR_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,h[2],r):pe.processFixedAI(4,h[1],r);throw new ie}static processFixedAI(r,o,l){if(l.length<r)throw new ie;let c=l.substring(0,r);if(l.length<r+o)throw new ie;let h=l.substring(r,r+o),f=l.substring(r+o),m="("+c+")"+h,E=pe.parseFieldsInGeneralPurpose(f);return E==null?m:m+E}static processVariableAI(r,o,l){let c=l.substring(0,r),h;l.length<r+o?h=l.length:h=r+o;let f=l.substring(r,h),m=l.substring(h),E="("+c+")"+f,x=pe.parseFieldsInGeneralPurpose(m);return x==null?E:E+x}}pe.VARIABLE_LENGTH=[],pe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",pe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",pe.VARIABLE_LENGTH,20],["22",pe.VARIABLE_LENGTH,29],["30",pe.VARIABLE_LENGTH,8],["37",pe.VARIABLE_LENGTH,8],["90",pe.VARIABLE_LENGTH,30],["91",pe.VARIABLE_LENGTH,30],["92",pe.VARIABLE_LENGTH,30],["93",pe.VARIABLE_LENGTH,30],["94",pe.VARIABLE_LENGTH,30],["95",pe.VARIABLE_LENGTH,30],["96",pe.VARIABLE_LENGTH,30],["97",pe.VARIABLE_LENGTH,3],["98",pe.VARIABLE_LENGTH,30],["99",pe.VARIABLE_LENGTH,30]],pe.THREE_DIGIT_DATA_LENGTH=[["240",pe.VARIABLE_LENGTH,30],["241",pe.VARIABLE_LENGTH,30],["242",pe.VARIABLE_LENGTH,6],["250",pe.VARIABLE_LENGTH,30],["251",pe.VARIABLE_LENGTH,30],["253",pe.VARIABLE_LENGTH,17],["254",pe.VARIABLE_LENGTH,20],["400",pe.VARIABLE_LENGTH,30],["401",pe.VARIABLE_LENGTH,30],["402",17],["403",pe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",pe.VARIABLE_LENGTH,20],["421",pe.VARIABLE_LENGTH,15],["422",3],["423",pe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",pe.VARIABLE_LENGTH,15],["391",pe.VARIABLE_LENGTH,18],["392",pe.VARIABLE_LENGTH,15],["393",pe.VARIABLE_LENGTH,18],["703",pe.VARIABLE_LENGTH,30]],pe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",pe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",pe.VARIABLE_LENGTH,20],["8003",pe.VARIABLE_LENGTH,30],["8004",pe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",pe.VARIABLE_LENGTH,30],["8008",pe.VARIABLE_LENGTH,12],["8018",18],["8020",pe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",pe.VARIABLE_LENGTH,70],["8200",pe.VARIABLE_LENGTH,70]];class rs{constructor(r){this.buffer=new F,this.information=r}decodeAllCodes(r,o){let l=o,c=null;do{let h=this.decodeGeneralPurposeField(l,c),f=pe.parseFieldsInGeneralPurpose(h.getNewString());if(f!=null&&r.append(f),h.isRemaining()?c=""+h.getRemainingValue():c=null,l===h.getNewPosition())break;l=h.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(r,4);return h===0?new ai(this.information.getSize(),ai.FNC1,ai.FNC1):new ai(this.information.getSize(),h-1,ai.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),l=(o-8)/11,c=(o-8)%11;return new ai(r+7,l,c)}extractNumericValueFromBitArray(r,o){return rs.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,l){let c=0;for(let h=0;h<l;++h)r.get(o+h)&&(c|=1<<l-h-1);return c}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ti(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ti(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new Ti(this.current.getPosition(),this.buffer.toString()):o=new Ti(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ir(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new Ti(this.current.getPosition(),this.buffer.toString());return new Ir(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ir(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ti(this.current.getPosition(),this.buffer.toString());return new Ir(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ir(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ti(this.current.getPosition(),this.buffer.toString());return new Ir(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ir(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new bn(r+5,bn.FNC1);if(o>=5&&o<15)return new bn(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new bn(r+7,""+(l+1));if(l>=90&&l<116)return new bn(r+7,""+(l+7));let c=this.extractNumericValueFromBitArray(r,8),h;switch(c){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new R}return new bn(r+8,h)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new bn(r+5,bn.FNC1);if(o>=5&&o<15)return new bn(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new bn(r+6,""+(l+33));let c;switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new ii("Decoding invalid alphanumeric value: "+l)}return new bn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class qo{constructor(r){this.information=r,this.generalDecoder=new rs(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class vn extends qo{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,l)}encodeCompressedGtinWithoutAI(r,o,l){for(let c=0;c<4;++c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*c,10);h/100===0&&r.append("0"),h/10===0&&r.append("0"),r.append(h)}vn.appendCheckDigit(r,l)}static appendCheckDigit(r,o){let l=0;for(let c=0;c<13;c++){let h=r.charAt(c+o).charCodeAt(0)-48;l+=c&1?h:3*h}l=10-l%10,l===10&&(l=0),r.append(l)}}vn.GTIN_SIZE=40;class Nr extends vn{constructor(r){super(r)}parseInformation(){let r=new F;r.append("(01)");let o=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Nr.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,Nr.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,Nr.HEADER_SIZE+44)}}Nr.HEADER_SIZE=4;class Ja extends qo{constructor(r){super(r)}parseInformation(){let r=new F;return this.getGeneralDecoder().decodeAllCodes(r,Ja.HEADER_SIZE)}}Ja.HEADER_SIZE=5;class Xo extends vn{constructor(r){super(r)}encodeCompressedWeight(r,o,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(r,c);let h=this.checkWeight(c),f=1e5;for(let m=0;m<5;++m)h/f===0&&r.append("0"),f/=10;r.append(h)}}class Ci extends Xo{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Ci.HEADER_SIZE+Xo.GTIN_SIZE+Ci.WEIGHT_SIZE)throw new ie;let r=new F;return this.encodeCompressedGtin(r,Ci.HEADER_SIZE),this.encodeCompressedWeight(r,Ci.HEADER_SIZE+Xo.GTIN_SIZE,Ci.WEIGHT_SIZE),r.toString()}}Ci.HEADER_SIZE=5,Ci.WEIGHT_SIZE=15;class _0 extends Ci{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class Wo extends Ci{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Si extends vn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Si.HEADER_SIZE+vn.GTIN_SIZE)throw new ie;let r=new F;this.encodeCompressedGtin(r,Si.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Si.HEADER_SIZE+vn.GTIN_SIZE,Si.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Si.HEADER_SIZE+vn.GTIN_SIZE+Si.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Si.HEADER_SIZE=8,Si.LAST_DIGIT_SIZE=2;class xn extends vn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<xn.HEADER_SIZE+vn.GTIN_SIZE)throw new ie;let r=new F;this.encodeCompressedGtin(r,xn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(xn.HEADER_SIZE+vn.GTIN_SIZE,xn.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(xn.HEADER_SIZE+vn.GTIN_SIZE+xn.LAST_DIGIT_SIZE,xn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let c=this.getGeneralDecoder().decodeGeneralPurposeField(xn.HEADER_SIZE+vn.GTIN_SIZE+xn.LAST_DIGIT_SIZE+xn.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}xn.HEADER_SIZE=8,xn.LAST_DIGIT_SIZE=2,xn.FIRST_THREE_DIGITS_SIZE=10;class yt extends Xo{constructor(r,o,l){super(r),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=yt.HEADER_SIZE+yt.GTIN_SIZE+yt.WEIGHT_SIZE+yt.DATE_SIZE)throw new ie;let r=new F;return this.encodeCompressedGtin(r,yt.HEADER_SIZE),this.encodeCompressedWeight(r,yt.HEADER_SIZE+yt.GTIN_SIZE,yt.WEIGHT_SIZE),this.encodeCompressedDate(r,yt.HEADER_SIZE+yt.GTIN_SIZE+yt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,yt.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=l%32;l/=32;let h=l%12+1;l/=12;let f=l;f/10==0&&r.append("0"),r.append(f),h/10==0&&r.append("0"),r.append(h),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}yt.HEADER_SIZE=8,yt.WEIGHT_SIZE=20,yt.DATE_SIZE=16;function Rr(b){try{if(b.get(1))return new Nr(b);if(!b.get(2))return new Ja(b);switch(rs.extractNumericValueFromBitArray(b,1,4)){case 4:return new _0(b);case 5:return new Wo(b)}switch(rs.extractNumericValueFromBitArray(b,1,5)){case 12:return new Si(b);case 13:return new xn(b)}switch(rs.extractNumericValueFromBitArray(b,1,7)){case 56:return new yt(b,"310","11");case 57:return new yt(b,"320","11");case 58:return new yt(b,"310","13");case 59:return new yt(b,"320","13");case 60:return new yt(b,"310","15");case 61:return new yt(b,"320","15");case 62:return new yt(b,"310","17");case 63:return new yt(b,"320","17")}}catch(r){throw console.log(r),new ii("unknown decoder: "+b)}}class Wi{constructor(r,o,l,c){this.leftchar=r,this.rightchar=o,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof Wi?Wi.equalsOrNull(r.leftchar,o.leftchar)&&Wi.equalsOrNull(r.rightchar,o.rightchar)&&Wi.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:Wi.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ic{constructor(r,o,l){this.pairs=r,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof Ic?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let l;return r.forEach((c,h)=>{o.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class ce extends Sn{constructor(r){super(...arguments),this.pairs=new Array(ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,l){this.pairs.length=0,this.startFromEven=!1;try{return ce.constructResult(this.decodeRow2pairs(r,o))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,ce.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(h){if(h instanceof ie){if(!this.pairs.length)throw new ie;l=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new ie}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let l=o;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let f of r)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(r);h.push(c);try{return this.checkRows(h,l+1)}catch(f){this.verbose&&console.log(f)}}throw new ie}static isValidSequence(r){for(let o of ce.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let l=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=o[c]){l=!1;break}if(l)return!0}return!1}storeRow(r,o){let l=0,c=!1,h=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>r){h=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),l++}h||c||ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Ic(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let l of o)if(l.getPairs().length!==r.length){for(let c of l.getPairs())for(let h of r)if(Wi.equals(c,h))break}}static isPartialRow(r,o){for(let l of o){let c=!0;for(let h of r){let f=!1;for(let m of l.getPairs())if(h.equals(m)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=Go.buildBitArray(r),c=Rr(o).parseInformation(),h=r[0].getFinderPattern().getResultPoints(),f=r[r.length-1].getFinderPattern().getResultPoints(),m=[h[0],h[1],f[0],f[1]];return new ct(c,null,null,m,Ce.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let c=l.getChecksumPortion(),h=2;for(let m=1;m<this.pairs.size();++m){let E=this.pairs.get(m);c+=E.getLeftChar().getChecksumPortion(),h++;let x=E.getRightChar();x!=null&&(c+=x.getChecksumPortion(),h++)}return c%=211,211*(h-4)+c==o.getValue()}static getNextSecondBar(r,o){let l;return r.get(o)?(l=r.getNextUnset(o),l=r.getNextSet(l)):(l=r.getNextSet(o),l=r.getNextUnset(l)),l}retrieveNextPair(r,o,l){let c=o.length%2==0;this.startFromEven&&(c=!c);let h,f=!0,m=-1;do this.findNextPair(r,o,m),h=this.parseFoundFinderPattern(r,l,c),h==null?m=ce.getNextSecondBar(r,this.startEnd[0]):f=!1;while(f);let E=this.decodeDataCharacter(r,h,c,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ie;let x;try{x=this.decodeDataCharacter(r,h,c,!1)}catch(A){x=null,this.verbose&&console.log(A)}return new Wi(E,x,h,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=r.getSize(),f;l>=0?f=l:this.isEmptyPair(o)?f=0:f=o[o.length-1].getFinderPattern().getStartEnd()[1];let m=o.length%2!=0;this.startFromEven&&(m=!m);let E=!1;for(;f<h&&(E=!r.get(f),!!E);)f++;let x=0,A=f;for(let v=f;v<h;v++)if(r.get(v)!=E)c[x]++;else{if(x==3){if(m&&ce.reverseCounters(c),ce.isFinderPattern(c)){this.startEnd[0]=A,this.startEnd[1]=v;return}m&&ce.reverseCounters(c),A+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,x--}else x++;c[x]=1,E=!E}throw new ie}static reverseCounters(r){let o=r.length;for(let l=0;l<o/2;++l){let c=r[l];r[l]=r[o-l-1],r[o-l-1]=c}}parseFoundFinderPattern(r,o,l){let c,h,f;if(l){let x=this.startEnd[0]-1;for(;x>=0&&!r.get(x);)x--;x++,c=this.startEnd[0]-x,h=x,f=this.startEnd[1]}else h=this.startEnd[0],f=r.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let m=this.getDecodeFinderCounters();X.arraycopy(m,0,m,1,m.length-1),m[0]=c;let E;try{E=this.parseFinderValue(m,ce.FINDER_PATTERNS)}catch{return null}return new Ho(E,[h,f],h,f,o)}decodeDataCharacter(r,o,l,c){let h=this.getDataCharacterCounters();for(let Nt=0;Nt<h.length;Nt++)h[Nt]=0;if(c)ce.recordPatternInReverse(r,o.getStartEnd()[0],h);else{ce.recordPattern(r,o.getStartEnd()[1],h);for(let Nt=0,Pn=h.length-1;Nt<Pn;Nt++,Pn--){let Ni=h[Nt];h[Nt]=h[Pn],h[Pn]=Ni}}let f=17,m=ve.sum(new Int32Array(h))/f,E=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(m-E)/E>.3)throw new ie;let x=this.getOddCounts(),A=this.getEvenCounts(),v=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let Nt=0;Nt<h.length;Nt++){let Pn=1*h[Nt]/m,Ni=Pn+.5;if(Ni<1){if(Pn<.3)throw new ie;Ni=1}else if(Ni>8){if(Pn>8.7)throw new ie;Ni=8}let tl=Nt/2;Nt&1?(A[tl]=Ni,N[tl]=Pn-Ni):(x[tl]=Ni,v[tl]=Pn-Ni)}this.adjustOddEvenCounts(f);let U=4*o.getValue()+(l?0:2)+(c?0:1)-1,Y=0,W=0;for(let Nt=x.length-1;Nt>=0;Nt--){if(ce.isNotA1left(o,l,c)){let Pn=ce.WEIGHTS[U][2*Nt];W+=x[Nt]*Pn}Y+=x[Nt]}let Z=0;for(let Nt=A.length-1;Nt>=0;Nt--)if(ce.isNotA1left(o,l,c)){let Pn=ce.WEIGHTS[U][2*Nt+1];Z+=A[Nt]*Pn}let ne=W+Z;if(Y&1||Y>13||Y<4)throw new ie;let fe=(13-Y)/2,ge=ce.SYMBOL_WIDEST[fe],ue=9-ge,Ze=Xi.getRSSvalue(x,ge,!0),je=Xi.getRSSvalue(A,ue,!1),ci=ce.EVEN_TOTAL_SUBSET[fe],mr=ce.GSUM[fe],ui=Ze*ci+je+mr;return new Ai(ui,ne)}static isNotA1left(r,o,l){return!(r.getValue()==0&&o&&l)}adjustOddEvenCounts(r){let o=ve.sum(new Int32Array(this.getOddCounts())),l=ve.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1;o>13?h=!0:o<4&&(c=!0);let f=!1,m=!1;l>13?m=!0:l<4&&(f=!0);let E=o+l-r,x=(o&1)==1,A=(l&1)==0;if(E==1)if(x){if(A)throw new ie;h=!0}else{if(!A)throw new ie;m=!0}else if(E==-1)if(x){if(A)throw new ie;c=!0}else{if(!A)throw new ie;f=!0}else if(E==0){if(x){if(!A)throw new ie;o<l?(c=!0,m=!0):(h=!0,f=!0)}else if(A)throw new ie}else throw new ie;if(c){if(h)throw new ie;ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new ie;ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ce.SYMBOL_WIDEST=[7,5,4,3,1],ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ce.GSUM=[0,348,1388,2948,3988],ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ce.FINDER_PAT_A=0,ce.FINDER_PAT_B=1,ce.FINDER_PAT_C=2,ce.FINDER_PAT_D=3,ce.FINDER_PAT_E=4,ce.FINDER_PAT_F=5,ce.FINDER_PATTERN_SEQUENCES=[[ce.FINDER_PAT_A,ce.FINDER_PAT_A],[ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B],[ce.FINDER_PAT_A,ce.FINDER_PAT_C,ce.FINDER_PAT_B,ce.FINDER_PAT_D],[ce.FINDER_PAT_A,ce.FINDER_PAT_E,ce.FINDER_PAT_B,ce.FINDER_PAT_D,ce.FINDER_PAT_C],[ce.FINDER_PAT_A,ce.FINDER_PAT_E,ce.FINDER_PAT_B,ce.FINDER_PAT_D,ce.FINDER_PAT_D,ce.FINDER_PAT_F],[ce.FINDER_PAT_A,ce.FINDER_PAT_E,ce.FINDER_PAT_B,ce.FINDER_PAT_D,ce.FINDER_PAT_E,ce.FINDER_PAT_F,ce.FINDER_PAT_F],[ce.FINDER_PAT_A,ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B,ce.FINDER_PAT_C,ce.FINDER_PAT_C,ce.FINDER_PAT_D,ce.FINDER_PAT_D],[ce.FINDER_PAT_A,ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B,ce.FINDER_PAT_C,ce.FINDER_PAT_C,ce.FINDER_PAT_D,ce.FINDER_PAT_E,ce.FINDER_PAT_E],[ce.FINDER_PAT_A,ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B,ce.FINDER_PAT_C,ce.FINDER_PAT_C,ce.FINDER_PAT_D,ce.FINDER_PAT_E,ce.FINDER_PAT_F,ce.FINDER_PAT_F],[ce.FINDER_PAT_A,ce.FINDER_PAT_A,ce.FINDER_PAT_B,ce.FINDER_PAT_B,ce.FINDER_PAT_C,ce.FINDER_PAT_D,ce.FINDER_PAT_D,ce.FINDER_PAT_E,ce.FINDER_PAT_E,ce.FINDER_PAT_F,ce.FINDER_PAT_F]],ce.MAX_PAIRS=11;class Sh extends Ai{constructor(r,o,l){super(r,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class kt extends Sn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,l){const c=this.decodePair(o,!1,r,l);kt.addOrTally(this.possibleLeftPairs,c),o.reverse();let h=this.decodePair(o,!0,r,l);kt.addOrTally(this.possibleRightPairs,h),o.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&kt.checkChecksum(f,m))return kt.constructResult(f,m)}throw new ie}static addOrTally(r,o){if(o==null)return;let l=!1;for(let c of r)if(c.getValue()===o.getValue()){c.incrementCount(),l=!0;break}l||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let l=4537077*r.getValue()+o.getValue(),c=new String(l).toString(),h=new F;for(let x=13-c.length;x>0;x--)h.append("0");h.append(c);let f=0;for(let x=0;x<13;x++){let A=h.charAt(x).charCodeAt(0)-48;f+=x&1?A:3*A}f=10-f%10,f===10&&(f=0),h.append(f.toString());let m=r.getFinderPattern().getResultPoints(),E=o.getFinderPattern().getResultPoints();return new ct(h.toString(),null,0,[m[0],m[1],E[0],E[1]],Ce.RSS_14,new Date().getTime())}static checkChecksum(r,o){let l=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(r,o,l,c){try{let h=this.findFinderPattern(r,o),f=this.parseFoundFinderPattern(r,l,o,h),m=c==null?null:c.get(re.NEED_RESULT_POINT_CALLBACK);if(m!=null){let A=(h[0]+h[1])/2;o&&(A=r.getSize()-1-A),m.foundPossibleResultPoint(new xe(A,l))}let E=this.decodeDataCharacter(r,f,!0),x=this.decodeDataCharacter(r,f,!1);return new Sh(1597*E.getValue()+x.getValue(),E.getChecksumPortion()+4*x.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(r,o,l){let c=this.getDataCharacterCounters();for(let Z=0;Z<c.length;Z++)c[Z]=0;if(l)St.recordPatternInReverse(r,o.getStartEnd()[0],c);else{St.recordPattern(r,o.getStartEnd()[1]+1,c);for(let Z=0,ne=c.length-1;Z<ne;Z++,ne--){let fe=c[Z];c[Z]=c[ne],c[ne]=fe}}let h=l?16:15,f=ve.sum(new Int32Array(c))/h,m=this.getOddCounts(),E=this.getEvenCounts(),x=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let Z=0;Z<c.length;Z++){let ne=c[Z]/f,fe=Math.floor(ne+.5);fe<1?fe=1:fe>8&&(fe=8);let ge=Math.floor(Z/2);Z&1?(E[ge]=fe,A[ge]=ne-fe):(m[ge]=fe,x[ge]=ne-fe)}this.adjustOddEvenCounts(l,h);let v=0,N=0;for(let Z=m.length-1;Z>=0;Z--)N*=9,N+=m[Z],v+=m[Z];let U=0,Y=0;for(let Z=E.length-1;Z>=0;Z--)U*=9,U+=E[Z],Y+=E[Z];let W=N+3*U;if(l){if(v&1||v>12||v<4)throw new ie;let Z=(12-v)/2,ne=kt.OUTSIDE_ODD_WIDEST[Z],fe=9-ne,ge=Xi.getRSSvalue(m,ne,!1),ue=Xi.getRSSvalue(E,fe,!0),Ze=kt.OUTSIDE_EVEN_TOTAL_SUBSET[Z],je=kt.OUTSIDE_GSUM[Z];return new Ai(ge*Ze+ue+je,W)}else{if(Y&1||Y>10||Y<4)throw new ie;let Z=(10-Y)/2,ne=kt.INSIDE_ODD_WIDEST[Z],fe=9-ne,ge=Xi.getRSSvalue(m,ne,!0),ue=Xi.getRSSvalue(E,fe,!1),Ze=kt.INSIDE_ODD_TOTAL_SUBSET[Z],je=kt.INSIDE_GSUM[Z];return new Ai(ue*Ze+ge+je,W)}}findFinderPattern(r,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),h=!1,f=0;for(;f<c&&(h=!r.get(f),o!==h);)f++;let m=0,E=f;for(let x=f;x<c;x++)if(r.get(x)!==h)l[m]++;else{if(m===3){if(Sn.isFinderPattern(l))return[E,x];E+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,m--}else m++;l[m]=1,h=!h}throw new ie}parseFoundFinderPattern(r,o,l,c){let h=r.get(c[0]),f=c[0]-1;for(;f>=0&&h!==r.get(f);)f--;f++;const m=c[0]-f,E=this.getDecodeFinderCounters(),x=new Int32Array(E.length);X.arraycopy(E,0,x,1,E.length-1),x[0]=m;const A=this.parseFinderValue(x,kt.FINDER_PATTERNS);let v=f,N=c[1];return l&&(v=r.getSize()-1-v,N=r.getSize()-1-N),new Ho(A,[f,c[1]],v,N,o)}adjustOddEvenCounts(r,o){let l=ve.sum(new Int32Array(this.getOddCounts())),c=ve.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1,m=!1,E=!1;r?(l>12?f=!0:l<4&&(h=!0),c>12?E=!0:c<4&&(m=!0)):(l>11?f=!0:l<5&&(h=!0),c>10?E=!0:c<4&&(m=!0));let x=l+c-o,A=(l&1)===(r?1:0),v=(c&1)===1;if(x===1)if(A){if(v)throw new ie;f=!0}else{if(!v)throw new ie;E=!0}else if(x===-1)if(A){if(v)throw new ie;h=!0}else{if(!v)throw new ie;m=!0}else if(x===0){if(A){if(!v)throw new ie;l<c?(h=!0,E=!0):(f=!0,m=!0)}else if(v)throw new ie}else throw new ie;if(h){if(f)throw new ie;Sn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Sn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(E)throw new ie;Sn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&Sn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],kt.OUTSIDE_GSUM=[0,161,961,2015,2715],kt.INSIDE_GSUM=[0,336,1036,1516],kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],kt.INSIDE_ODD_WIDEST=[2,4,6,8],kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Mr extends St{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const l=r?r.get(re.POSSIBLE_FORMATS):null,c=r&&r.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ce.EAN_13)||l.includes(Ce.UPC_A)||l.includes(Ce.EAN_8)||l.includes(Ce.UPC_E))&&this.readers.push(new vc(r)),l.includes(Ce.CODE_39)&&this.readers.push(new ye(c)),l.includes(Ce.CODE_128)&&this.readers.push(new Q),l.includes(Ce.ITF)&&this.readers.push(new Ae),l.includes(Ce.RSS_14)&&this.readers.push(new kt),l.includes(Ce.RSS_EXPANDED)&&this.readers.push(new ce(this.verbose))):(this.readers.push(new vc(r)),this.readers.push(new ye),this.readers.push(new vc(r)),this.readers.push(new Q),this.readers.push(new Ae),this.readers.push(new kt),this.readers.push(new ce(this.verbose)))}decodeRow(r,o,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,o,l)}catch{}throw new ie}reset(){this.readers.forEach(r=>r.reset())}}class Nc extends Gn{constructor(r=500,o){super(new Mr(o),r,o)}}class ut{constructor(r,o,l){this.ecCodewords=r,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class at{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(r,o,l,c,h,f){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=h,this.ecBlocks=f;let m=0;const E=f.getECCodewords(),x=f.getECBlocks();for(let A of x)m+=A.getCount()*(A.getDataCodewords()+E);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if(r&1||o&1)throw new R;for(let l of qe.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===o)return l;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new qe(1,10,10,8,8,new ut(5,new at(1,3))),new qe(2,12,12,10,10,new ut(7,new at(1,5))),new qe(3,14,14,12,12,new ut(10,new at(1,8))),new qe(4,16,16,14,14,new ut(12,new at(1,12))),new qe(5,18,18,16,16,new ut(14,new at(1,18))),new qe(6,20,20,18,18,new ut(18,new at(1,22))),new qe(7,22,22,20,20,new ut(20,new at(1,30))),new qe(8,24,24,22,22,new ut(24,new at(1,36))),new qe(9,26,26,24,24,new ut(28,new at(1,44))),new qe(10,32,32,14,14,new ut(36,new at(1,62))),new qe(11,36,36,16,16,new ut(42,new at(1,86))),new qe(12,40,40,18,18,new ut(48,new at(1,114))),new qe(13,44,44,20,20,new ut(56,new at(1,144))),new qe(14,48,48,22,22,new ut(68,new at(1,174))),new qe(15,52,52,24,24,new ut(42,new at(2,102))),new qe(16,64,64,14,14,new ut(56,new at(2,140))),new qe(17,72,72,16,16,new ut(36,new at(4,92))),new qe(18,80,80,18,18,new ut(48,new at(4,114))),new qe(19,88,88,20,20,new ut(56,new at(4,144))),new qe(20,96,96,22,22,new ut(68,new at(4,174))),new qe(21,104,104,24,24,new ut(56,new at(6,136))),new qe(22,120,120,18,18,new ut(68,new at(6,175))),new qe(23,132,132,20,20,new ut(62,new at(8,163))),new qe(24,144,144,22,22,new ut(62,new at(8,156),new at(2,155))),new qe(25,8,18,6,16,new ut(7,new at(1,5))),new qe(26,8,32,6,14,new ut(11,new at(1,10))),new qe(27,12,26,10,24,new ut(14,new at(1,16))),new qe(28,12,36,10,16,new ut(18,new at(1,22))),new qe(29,16,36,14,16,new ut(24,new at(1,32))),new qe(30,16,48,14,22,new ut(28,new at(1,49)))]}}qe.VERSIONS=qe.buildVersions();class Rc{constructor(r){const o=r.getHeight();if(o<8||o>144||o&1)throw new R;this.version=Rc.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ge(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),l=r.getWidth();return qe.getVersionForDimensions(o,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,c=0;const h=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let m=!1,E=!1,x=!1,A=!1;do if(l===h&&c===0&&!m)r[o++]=this.readCorner1(h,f)&255,l-=2,c+=2,m=!0;else if(l===h-2&&c===0&&f&3&&!E)r[o++]=this.readCorner2(h,f)&255,l-=2,c+=2,E=!0;else if(l===h+4&&c===2&&!(f&7)&&!x)r[o++]=this.readCorner3(h,f)&255,l-=2,c+=2,x=!0;else if(l===h-2&&c===0&&(f&7)===4&&!A)r[o++]=this.readCorner4(h,f)&255,l-=2,c+=2,A=!0;else{do l<h&&c>=0&&!this.readMappingMatrix.get(c,l)&&(r[o++]=this.readUtah(l,c,h,f)&255),l-=2,c+=2;while(l>=0&&c<f);l+=1,c+=3;do l>=0&&c<f&&!this.readMappingMatrix.get(c,l)&&(r[o++]=this.readUtah(l,c,h,f)&255),l+=2,c-=2;while(l<h&&c>=0);l+=3,c+=1}while(l<h||c<f);if(o!==this.version.getTotalCodewords())throw new R;return r}readModule(r,o,l,c){return r<0&&(r+=l,o+=4-(l+4&7)),o<0&&(o+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,l,c){let h=0;return this.readModule(r-2,o-2,l,c)&&(h|=1),h<<=1,this.readModule(r-2,o-1,l,c)&&(h|=1),h<<=1,this.readModule(r-1,o-2,l,c)&&(h|=1),h<<=1,this.readModule(r-1,o-1,l,c)&&(h|=1),h<<=1,this.readModule(r-1,o,l,c)&&(h|=1),h<<=1,this.readModule(r,o-2,l,c)&&(h|=1),h<<=1,this.readModule(r,o-1,l,c)&&(h|=1),h<<=1,this.readModule(r,o,l,c)&&(h|=1),h}readCorner1(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,1,r,o)&&(l|=1),l<<=1,this.readModule(r-1,2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}readCorner2(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-4,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner3(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-3,r,o)&&(l|=1),l<<=1,this.readModule(1,o-2,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner4(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new T("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),f=o/c|0,m=l/h|0,E=f*c,x=m*h,A=new Ge(x,E);for(let v=0;v<f;++v){const N=v*c;for(let U=0;U<m;++U){const Y=U*h;for(let W=0;W<c;++W){const Z=v*(c+2)+1+W,ne=N+W;for(let fe=0;fe<h;++fe){const ge=U*(h+2)+1+fe;if(r.get(ge,Z)){const ue=Y+fe;A.set(ue,ne)}}}}}return A}}class Qi{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const l=o.getECBlocks();let c=0;const h=l.getECBlocks();for(let W of h)c+=W.getCount();const f=new Array(c);let m=0;for(let W of h)for(let Z=0;Z<W.getCount();Z++){const ne=W.getDataCodewords(),fe=l.getECCodewords()+ne;f[m++]=new Qi(ne,new Uint8Array(fe))}const x=f[0].codewords.length-l.getECCodewords(),A=x-1;let v=0;for(let W=0;W<A;W++)for(let Z=0;Z<m;Z++)f[Z].codewords[W]=r[v++];const N=o.getVersionNumber()===24,U=N?8:m;for(let W=0;W<U;W++)f[W].codewords[x-1]=r[v++];const Y=f[0].codewords.length;for(let W=x;W<Y;W++)for(let Z=0;Z<m;Z++){const ne=N?(Z+8)%m:Z,fe=N&&ne>7?W-1:W;f[ne].codewords[fe]=r[v++]}if(v!==r.length)throw new T;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class oi{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new T(""+r);let o=0,l=this.bitOffset,c=this.byteOffset;const h=this.bytes;if(l>0){const f=8-l,m=r<f?r:f,E=f-m,x=255>>8-m<<E;o=(h[c]&x)>>E,r-=m,l+=m,l===8&&(l=0,c++)}if(r>0){for(;r>=8;)o=o<<8|h[c]&255,c++,r-=8;if(r>0){const f=8-r,m=255>>f<<f;o=o<<r|(h[c]&m)>>f,l+=r}}return this.bitOffset=l,this.byteOffset=c,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Bt;(function(b){b[b.PAD_ENCODE=0]="PAD_ENCODE",b[b.ASCII_ENCODE=1]="ASCII_ENCODE",b[b.C40_ENCODE=2]="C40_ENCODE",b[b.TEXT_ENCODE=3]="TEXT_ENCODE",b[b.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",b[b.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",b[b.BASE256_ENCODE=6]="BASE256_ENCODE"})(Bt||(Bt={}));class li{static decode(r){const o=new oi(r),l=new F,c=new F,h=new Array;let f=Bt.ASCII_ENCODE;do if(f===Bt.ASCII_ENCODE)f=this.decodeAsciiSegment(o,l,c);else{switch(f){case Bt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Bt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Bt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Bt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Bt.BASE256_ENCODE:this.decodeBase256Segment(o,l,h);break;default:throw new R}f=Bt.ASCII_ENCODE}while(f!==Bt.PAD_ENCODE&&o.available()>0);return c.length()>0&&l.append(c.toString()),new qi(r,l.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(r,o,l){let c=!1;do{let h=r.readBits(8);if(h===0)throw new R;if(h<=128)return c&&(h+=128),o.append(String.fromCharCode(h-1)),Bt.ASCII_ENCODE;if(h===129)return Bt.PAD_ENCODE;if(h<=229){const f=h-130;f<10&&o.append("0"),o.append(""+f)}else switch(h){case 230:return Bt.C40_ENCODE;case 231:return Bt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Bt.ANSIX12_ENCODE;case 239:return Bt.TEXT_ENCODE;case 240:return Bt.EDIFACT_ENCODE;case 241:break;default:if(h!==254||r.available()!==0)throw new R;break}}while(r.available()>0);return Bt.ASCII_ENCODE}static decodeC40Segment(r,o){let l=!1;const c=[];let h=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),c);for(let m=0;m<3;m++){const E=c[m];switch(h){case 0:if(E<3)h=E+1;else if(E<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[E];l?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),l=!1):o.append(x)}else throw new R;break;case 1:l?(o.append(String.fromCharCode(E+128)),l=!1):o.append(String.fromCharCode(E)),h=0;break;case 2:if(E<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[E];l?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),l=!1):o.append(x)}else switch(E){case 27:o.append("");break;case 30:l=!0;break;default:throw new R}h=0;break;case 3:l?(o.append(String.fromCharCode(E+224)),l=!1):o.append(String.fromCharCode(E+96)),h=0;break;default:throw new R}}}while(r.available()>0)}static decodeTextSegment(r,o){let l=!1,c=[],h=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),c);for(let m=0;m<3;m++){const E=c[m];switch(h){case 0:if(E<3)h=E+1;else if(E<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[E];l?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),l=!1):o.append(x)}else throw new R;break;case 1:l?(o.append(String.fromCharCode(E+128)),l=!1):o.append(String.fromCharCode(E)),h=0;break;case 2:if(E<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[E];l?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),l=!1):o.append(x)}else switch(E){case 27:o.append("");break;case 30:l=!0;break;default:throw new R}h=0;break;case 3:if(E<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[E];l?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),l=!1):o.append(x),h=0}else throw new R;break;default:throw new R}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const l=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),l);for(let h=0;h<3;h++){const f=l[h];switch(f){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(f<14)o.append(String.fromCharCode(f+44));else if(f<40)o.append(String.fromCharCode(f+51));else throw new R;break}}}while(r.available()>0)}static parseTwoBytes(r,o,l){let c=(r<<8)+o-1,h=Math.floor(c/1600);l[0]=h,c-=h*1600,h=Math.floor(c/40),l[1]=h,l[2]=c-h*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let c=r.readBits(6);if(c===31){const h=8-r.getBitOffset();h!==8&&r.readBits(h);return}c&32||(c|=64),o.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,o,l){let c=1+r.getByteOffset();const h=this.unrandomize255State(r.readBits(8),c++);let f;if(h===0?f=r.available()/8|0:h<250?f=h:f=250*(h-249)+this.unrandomize255State(r.readBits(8),c++),f<0)throw new R;const m=new Uint8Array(f);for(let E=0;E<f;E++){if(r.available()<8)throw new R;m[E]=this.unrandomize255State(r.readBits(8),c++)}l.push(m);try{o.append(G.decode(m,j.ISO88591))}catch(E){throw new ii("Platform does not support required encoding: "+E.message)}}static unrandomize255State(r,o){const l=149*o%255+1,c=r-l;return c>=0?c:c+256}}li.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],li.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],li.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],li.TEXT_SHIFT2_SET_CHARS=li.C40_SHIFT2_SET_CHARS,li.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Mc{constructor(){this.rsDecoder=new hr(Xe.DATA_MATRIX_FIELD_256)}decode(r){const o=new Rc(r),l=o.getVersion(),c=o.readCodewords(),h=Qi.getDataBlocks(c,l);let f=0;for(let x of h)f+=x.getNumDataCodewords();const m=new Uint8Array(f),E=h.length;for(let x=0;x<E;x++){const A=h[x],v=A.getCodewords(),N=A.getNumDataCodewords();this.correctErrors(v,N);for(let U=0;U<N;U++)m[U*E+x]=v[U]}return li.decode(m)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new I}for(let c=0;c<o;c++)r[c]=l[c]}}class Oe{constructor(r){this.image=r,this.rectangleDetector=new ri(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ie;o=this.shiftToModuleCenter(o);const l=o[0],c=o[1],h=o[2],f=o[3];let m=this.transitionsBetween(l,f)+1,E=this.transitionsBetween(h,f)+1;(m&1)===1&&(m+=1),(E&1)===1&&(E+=1),4*m<7*E&&4*E<7*m&&(m=E=Math.max(m,E));let x=Oe.sampleGrid(this.image,l,c,h,f,m,E);return new Vs(x,[l,c,h,f])}static shiftPoint(r,o,l){let c=(o.getX()-r.getX())/(l+1),h=(o.getY()-r.getY())/(l+1);return new xe(r.getX()+c,r.getY()+h)}static moveAway(r,o,l){let c=r.getX(),h=r.getY();return c<o?c-=1:c+=1,h<l?h-=1:h+=1,new xe(c,h)}detectSolid1(r){let o=r[0],l=r[1],c=r[3],h=r[2],f=this.transitionsBetween(o,l),m=this.transitionsBetween(l,c),E=this.transitionsBetween(c,h),x=this.transitionsBetween(h,o),A=f,v=[h,o,l,c];return A>m&&(A=m,v[0]=o,v[1]=l,v[2]=c,v[3]=h),A>E&&(A=E,v[0]=l,v[1]=c,v[2]=h,v[3]=o),A>x&&(v[0]=c,v[1]=h,v[2]=o,v[3]=l),v}detectSolid2(r){let o=r[0],l=r[1],c=r[2],h=r[3],f=this.transitionsBetween(o,h),m=Oe.shiftPoint(l,c,(f+1)*4),E=Oe.shiftPoint(c,l,(f+1)*4),x=this.transitionsBetween(m,o),A=this.transitionsBetween(E,h);return x<A?(r[0]=o,r[1]=l,r[2]=c,r[3]=h):(r[0]=l,r[1]=c,r[2]=h,r[3]=o),r}correctTopRight(r){let o=r[0],l=r[1],c=r[2],h=r[3],f=this.transitionsBetween(o,h),m=this.transitionsBetween(l,h),E=Oe.shiftPoint(o,l,(m+1)*4),x=Oe.shiftPoint(c,l,(f+1)*4);f=this.transitionsBetween(E,h),m=this.transitionsBetween(x,h);let A=new xe(h.getX()+(c.getX()-l.getX())/(f+1),h.getY()+(c.getY()-l.getY())/(f+1)),v=new xe(h.getX()+(o.getX()-l.getX())/(m+1),h.getY()+(o.getY()-l.getY())/(m+1));if(!this.isValid(A))return this.isValid(v)?v:null;if(!this.isValid(v))return A;let N=this.transitionsBetween(E,A)+this.transitionsBetween(x,A),U=this.transitionsBetween(E,v)+this.transitionsBetween(x,v);return N>U?A:v}shiftToModuleCenter(r){let o=r[0],l=r[1],c=r[2],h=r[3],f=this.transitionsBetween(o,h)+1,m=this.transitionsBetween(c,h)+1,E=Oe.shiftPoint(o,l,m*4),x=Oe.shiftPoint(c,l,f*4);f=this.transitionsBetween(E,h)+1,m=this.transitionsBetween(x,h)+1,(f&1)===1&&(f+=1),(m&1)===1&&(m+=1);let A=(o.getX()+l.getX()+c.getX()+h.getX())/4,v=(o.getY()+l.getY()+c.getY()+h.getY())/4;o=Oe.moveAway(o,A,v),l=Oe.moveAway(l,A,v),c=Oe.moveAway(c,A,v),h=Oe.moveAway(h,A,v);let N,U;return E=Oe.shiftPoint(o,l,m*4),E=Oe.shiftPoint(E,h,f*4),N=Oe.shiftPoint(l,o,m*4),N=Oe.shiftPoint(N,c,f*4),x=Oe.shiftPoint(c,h,m*4),x=Oe.shiftPoint(x,l,f*4),U=Oe.shiftPoint(h,c,m*4),U=Oe.shiftPoint(U,o,f*4),[E,N,x,U]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,l,c,h,f,m){return si.getInstance().sampleGrid(r,f,m,.5,.5,f-.5,.5,f-.5,m-.5,.5,m-.5,o.getX(),o.getY(),h.getX(),h.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(r,o){let l=Math.trunc(r.getX()),c=Math.trunc(r.getY()),h=Math.trunc(o.getX()),f=Math.trunc(o.getY()),m=Math.abs(f-c)>Math.abs(h-l);if(m){let W=l;l=c,c=W,W=h,h=f,f=W}let E=Math.abs(h-l),x=Math.abs(f-c),A=-E/2,v=c<f?1:-1,N=l<h?1:-1,U=0,Y=this.image.get(m?c:l,m?l:c);for(let W=l,Z=c;W!==h;W+=N){let ne=this.image.get(m?Z:W,m?W:Z);if(ne!==Y&&(U++,Y=ne),A+=x,A>0){if(Z===f)break;Z+=v,A-=E}}return U}}class bi{constructor(){this.decoder=new Mc}decode(r,o=null){let l,c;if(o!=null&&o.has(re.PURE_BARCODE)){const x=bi.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(x),c=bi.NO_POINTS}else{const x=new Oe(r.getBlackMatrix()).detect();l=this.decoder.decode(x.getBits()),c=x.getPoints()}const h=l.getRawBytes(),f=new ct(l.getText(),h,8*h.length,c,Ce.DATA_MATRIX,X.currentTimeMillis()),m=l.getByteSegments();m!=null&&f.putMetadata(Ht.BYTE_SEGMENTS,m);const E=l.getECLevel();return E!=null&&f.putMetadata(Ht.ERROR_CORRECTION_LEVEL,E),f}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o==null||l==null)throw new ie;const c=this.moduleSize(o,r);let h=o[1];const f=l[1];let m=o[0];const x=(l[0]-m+1)/c,A=(f-h+1)/c;if(x<=0||A<=0)throw new ie;const v=c/2;h+=v,m+=v;const N=new Ge(x,A);for(let U=0;U<A;U++){const Y=h+U*c;for(let W=0;W<x;W++)r.get(m+W*c,Y)&&N.set(W,U)}return N}static moduleSize(r,o){const l=o.getWidth();let c=r[0];const h=r[1];for(;c<l&&o.get(c,h);)c++;if(c===l)throw new ie;const f=c-r[0];if(f===0)throw new ie;return f}}bi.NO_POINTS=[];class $a extends Gn{constructor(r=500){super(new bi,r)}}var Ki;(function(b){b[b.L=0]="L",b[b.M=1]="M",b[b.Q=2]="Q",b[b.H=3]="H"})(Ki||(Ki={}));class bt{constructor(r,o,l){this.value=r,this.stringValue=o,this.bits=l,bt.FOR_BITS.set(l,this),bt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new w(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof bt))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=bt.FOR_BITS.size)throw new T;return bt.FOR_BITS.get(r)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(Ki.L,"L",1),bt.M=new bt(Ki.M,"M",0),bt.Q=new bt(Ki.Q,"Q",3),bt.H=new bt(Ki.H,"H",2);class wn{constructor(r){this.errorCorrectionLevel=bt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return k.bitCount(r^o)}static decodeFormatInformation(r,o){const l=wn.doDecodeFormatInformation(r,o);return l!==null?l:wn.doDecodeFormatInformation(r^wn.FORMAT_INFO_MASK_QR,o^wn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let l=Number.MAX_SAFE_INTEGER,c=0;for(const h of wn.FORMAT_INFO_DECODE_LOOKUP){const f=h[0];if(f===r||f===o)return new wn(h[1]);let m=wn.numBitsDiffering(r,f);m<l&&(c=h[1],l=m),r!==o&&(m=wn.numBitsDiffering(o,f),m<l&&(c=h[1],l=m))}return l<=3?new wn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof wn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}wn.FORMAT_INFO_MASK_QR=21522,wn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class J{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const l of o)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class B{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Te{constructor(r,o,...l){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=l;let c=0;const h=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(const m of f)c+=m.getCount()*(m.getDataCodewords()+h);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new R;try{return this.getVersionForNumber((r-17)/4)}catch{throw new R}}static getVersionForNumber(r){if(r<1||r>40)throw new T;return Te.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<Te.VERSION_DECODE_INFO.length;c++){const h=Te.VERSION_DECODE_INFO[c];if(h===r)return Te.getVersionForNumber(c+7);const f=wn.numBitsDiffering(r,h);f<o&&(l=c+7,o=f)}return o<=3?Te.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new Ge(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const h=this.alignmentPatternCenters[c]-2;for(let f=0;f<l;f++)c===0&&(f===0||f===l-1)||c===l-1&&f===0||o.setRegion(this.alignmentPatternCenters[f]-2,h,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}Te.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Te.VERSIONS=[new Te(1,new Int32Array(0),new J(7,new B(1,19)),new J(10,new B(1,16)),new J(13,new B(1,13)),new J(17,new B(1,9))),new Te(2,Int32Array.from([6,18]),new J(10,new B(1,34)),new J(16,new B(1,28)),new J(22,new B(1,22)),new J(28,new B(1,16))),new Te(3,Int32Array.from([6,22]),new J(15,new B(1,55)),new J(26,new B(1,44)),new J(18,new B(2,17)),new J(22,new B(2,13))),new Te(4,Int32Array.from([6,26]),new J(20,new B(1,80)),new J(18,new B(2,32)),new J(26,new B(2,24)),new J(16,new B(4,9))),new Te(5,Int32Array.from([6,30]),new J(26,new B(1,108)),new J(24,new B(2,43)),new J(18,new B(2,15),new B(2,16)),new J(22,new B(2,11),new B(2,12))),new Te(6,Int32Array.from([6,34]),new J(18,new B(2,68)),new J(16,new B(4,27)),new J(24,new B(4,19)),new J(28,new B(4,15))),new Te(7,Int32Array.from([6,22,38]),new J(20,new B(2,78)),new J(18,new B(4,31)),new J(18,new B(2,14),new B(4,15)),new J(26,new B(4,13),new B(1,14))),new Te(8,Int32Array.from([6,24,42]),new J(24,new B(2,97)),new J(22,new B(2,38),new B(2,39)),new J(22,new B(4,18),new B(2,19)),new J(26,new B(4,14),new B(2,15))),new Te(9,Int32Array.from([6,26,46]),new J(30,new B(2,116)),new J(22,new B(3,36),new B(2,37)),new J(20,new B(4,16),new B(4,17)),new J(24,new B(4,12),new B(4,13))),new Te(10,Int32Array.from([6,28,50]),new J(18,new B(2,68),new B(2,69)),new J(26,new B(4,43),new B(1,44)),new J(24,new B(6,19),new B(2,20)),new J(28,new B(6,15),new B(2,16))),new Te(11,Int32Array.from([6,30,54]),new J(20,new B(4,81)),new J(30,new B(1,50),new B(4,51)),new J(28,new B(4,22),new B(4,23)),new J(24,new B(3,12),new B(8,13))),new Te(12,Int32Array.from([6,32,58]),new J(24,new B(2,92),new B(2,93)),new J(22,new B(6,36),new B(2,37)),new J(26,new B(4,20),new B(6,21)),new J(28,new B(7,14),new B(4,15))),new Te(13,Int32Array.from([6,34,62]),new J(26,new B(4,107)),new J(22,new B(8,37),new B(1,38)),new J(24,new B(8,20),new B(4,21)),new J(22,new B(12,11),new B(4,12))),new Te(14,Int32Array.from([6,26,46,66]),new J(30,new B(3,115),new B(1,116)),new J(24,new B(4,40),new B(5,41)),new J(20,new B(11,16),new B(5,17)),new J(24,new B(11,12),new B(5,13))),new Te(15,Int32Array.from([6,26,48,70]),new J(22,new B(5,87),new B(1,88)),new J(24,new B(5,41),new B(5,42)),new J(30,new B(5,24),new B(7,25)),new J(24,new B(11,12),new B(7,13))),new Te(16,Int32Array.from([6,26,50,74]),new J(24,new B(5,98),new B(1,99)),new J(28,new B(7,45),new B(3,46)),new J(24,new B(15,19),new B(2,20)),new J(30,new B(3,15),new B(13,16))),new Te(17,Int32Array.from([6,30,54,78]),new J(28,new B(1,107),new B(5,108)),new J(28,new B(10,46),new B(1,47)),new J(28,new B(1,22),new B(15,23)),new J(28,new B(2,14),new B(17,15))),new Te(18,Int32Array.from([6,30,56,82]),new J(30,new B(5,120),new B(1,121)),new J(26,new B(9,43),new B(4,44)),new J(28,new B(17,22),new B(1,23)),new J(28,new B(2,14),new B(19,15))),new Te(19,Int32Array.from([6,30,58,86]),new J(28,new B(3,113),new B(4,114)),new J(26,new B(3,44),new B(11,45)),new J(26,new B(17,21),new B(4,22)),new J(26,new B(9,13),new B(16,14))),new Te(20,Int32Array.from([6,34,62,90]),new J(28,new B(3,107),new B(5,108)),new J(26,new B(3,41),new B(13,42)),new J(30,new B(15,24),new B(5,25)),new J(28,new B(15,15),new B(10,16))),new Te(21,Int32Array.from([6,28,50,72,94]),new J(28,new B(4,116),new B(4,117)),new J(26,new B(17,42)),new J(28,new B(17,22),new B(6,23)),new J(30,new B(19,16),new B(6,17))),new Te(22,Int32Array.from([6,26,50,74,98]),new J(28,new B(2,111),new B(7,112)),new J(28,new B(17,46)),new J(30,new B(7,24),new B(16,25)),new J(24,new B(34,13))),new Te(23,Int32Array.from([6,30,54,78,102]),new J(30,new B(4,121),new B(5,122)),new J(28,new B(4,47),new B(14,48)),new J(30,new B(11,24),new B(14,25)),new J(30,new B(16,15),new B(14,16))),new Te(24,Int32Array.from([6,28,54,80,106]),new J(30,new B(6,117),new B(4,118)),new J(28,new B(6,45),new B(14,46)),new J(30,new B(11,24),new B(16,25)),new J(30,new B(30,16),new B(2,17))),new Te(25,Int32Array.from([6,32,58,84,110]),new J(26,new B(8,106),new B(4,107)),new J(28,new B(8,47),new B(13,48)),new J(30,new B(7,24),new B(22,25)),new J(30,new B(22,15),new B(13,16))),new Te(26,Int32Array.from([6,30,58,86,114]),new J(28,new B(10,114),new B(2,115)),new J(28,new B(19,46),new B(4,47)),new J(28,new B(28,22),new B(6,23)),new J(30,new B(33,16),new B(4,17))),new Te(27,Int32Array.from([6,34,62,90,118]),new J(30,new B(8,122),new B(4,123)),new J(28,new B(22,45),new B(3,46)),new J(30,new B(8,23),new B(26,24)),new J(30,new B(12,15),new B(28,16))),new Te(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new B(3,117),new B(10,118)),new J(28,new B(3,45),new B(23,46)),new J(30,new B(4,24),new B(31,25)),new J(30,new B(11,15),new B(31,16))),new Te(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new B(7,116),new B(7,117)),new J(28,new B(21,45),new B(7,46)),new J(30,new B(1,23),new B(37,24)),new J(30,new B(19,15),new B(26,16))),new Te(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new B(5,115),new B(10,116)),new J(28,new B(19,47),new B(10,48)),new J(30,new B(15,24),new B(25,25)),new J(30,new B(23,15),new B(25,16))),new Te(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new B(13,115),new B(3,116)),new J(28,new B(2,46),new B(29,47)),new J(30,new B(42,24),new B(1,25)),new J(30,new B(23,15),new B(28,16))),new Te(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new B(17,115)),new J(28,new B(10,46),new B(23,47)),new J(30,new B(10,24),new B(35,25)),new J(30,new B(19,15),new B(35,16))),new Te(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new B(17,115),new B(1,116)),new J(28,new B(14,46),new B(21,47)),new J(30,new B(29,24),new B(19,25)),new J(30,new B(11,15),new B(46,16))),new Te(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new B(13,115),new B(6,116)),new J(28,new B(14,46),new B(23,47)),new J(30,new B(44,24),new B(7,25)),new J(30,new B(59,16),new B(1,17))),new Te(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new B(12,121),new B(7,122)),new J(28,new B(12,47),new B(26,48)),new J(30,new B(39,24),new B(14,25)),new J(30,new B(22,15),new B(41,16))),new Te(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new B(6,121),new B(14,122)),new J(28,new B(6,47),new B(34,48)),new J(30,new B(46,24),new B(10,25)),new J(30,new B(2,15),new B(64,16))),new Te(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new B(17,122),new B(4,123)),new J(28,new B(29,46),new B(14,47)),new J(30,new B(49,24),new B(10,25)),new J(30,new B(24,15),new B(46,16))),new Te(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new B(4,122),new B(18,123)),new J(28,new B(13,46),new B(32,47)),new J(30,new B(48,24),new B(14,25)),new J(30,new B(42,15),new B(32,16))),new Te(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new B(20,117),new B(4,118)),new J(28,new B(40,47),new B(7,48)),new J(30,new B(43,24),new B(22,25)),new J(30,new B(10,15),new B(67,16))),new Te(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new B(19,118),new B(6,119)),new J(28,new B(18,47),new B(31,48)),new J(30,new B(34,24),new B(34,25)),new J(30,new B(20,15),new B(61,16)))];var on;(function(b){b[b.DATA_MASK_000=0]="DATA_MASK_000",b[b.DATA_MASK_001=1]="DATA_MASK_001",b[b.DATA_MASK_010=2]="DATA_MASK_010",b[b.DATA_MASK_011=3]="DATA_MASK_011",b[b.DATA_MASK_100=4]="DATA_MASK_100",b[b.DATA_MASK_101=5]="DATA_MASK_101",b[b.DATA_MASK_110=6]="DATA_MASK_110",b[b.DATA_MASK_111=7]="DATA_MASK_111"})(on||(on={}));class In{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let l=0;l<o;l++)for(let c=0;c<o;c++)this.isMasked(l,c)&&r.flip(c,l)}}In.values=new Map([[on.DATA_MASK_000,new In(on.DATA_MASK_000,(b,r)=>(b+r&1)===0)],[on.DATA_MASK_001,new In(on.DATA_MASK_001,(b,r)=>(b&1)===0)],[on.DATA_MASK_010,new In(on.DATA_MASK_010,(b,r)=>r%3===0)],[on.DATA_MASK_011,new In(on.DATA_MASK_011,(b,r)=>(b+r)%3===0)],[on.DATA_MASK_100,new In(on.DATA_MASK_100,(b,r)=>(Math.floor(b/2)+Math.floor(r/3)&1)===0)],[on.DATA_MASK_101,new In(on.DATA_MASK_101,(b,r)=>b*r%6===0)],[on.DATA_MASK_110,new In(on.DATA_MASK_110,(b,r)=>b*r%6<3)],[on.DATA_MASK_111,new In(on.DATA_MASK_111,(b,r)=>(b+r+b*r%3&1)===0)]]);class ss{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new R;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let h=0;h<6;h++)r=this.copyBit(h,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let h=5;h>=0;h--)r=this.copyBit(8,h,r);const o=this.bitMatrix.getHeight();let l=0;const c=o-7;for(let h=o-1;h>=c;h--)l=this.copyBit(8,h,l);for(let h=o-8;h<o;h++)l=this.copyBit(h,8,l);if(this.parsedFormatInfo=wn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return Te.getVersionForNumber(o);let l=0;const c=r-11;for(let f=5;f>=0;f--)for(let m=r-9;m>=c;m--)l=this.copyBit(m,f,l);let h=Te.decodeVersionInformation(l);if(h!==null&&h.getDimensionForVersion()===r)return this.parsedVersion=h,h;l=0;for(let f=5;f>=0;f--)for(let m=r-9;m>=c;m--)l=this.copyBit(f,m,l);if(h=Te.decodeVersionInformation(l),h!==null&&h.getDimensionForVersion()===r)return this.parsedVersion=h,h;throw new R}copyBit(r,o,l){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),l=In.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const h=o.buildFunctionPattern();let f=!0;const m=new Uint8Array(o.getTotalCodewords());let E=0,x=0,A=0;for(let v=c-1;v>0;v-=2){v===6&&v--;for(let N=0;N<c;N++){const U=f?c-1-N:N;for(let Y=0;Y<2;Y++)h.get(v-Y,U)||(A++,x<<=1,this.bitMatrix.get(v-Y,U)&&(x|=1),A===8&&(m[E++]=x,A=0,x=0))}f=!f}if(E!==o.getTotalCodewords())throw new R;return m}remask(){if(this.parsedFormatInfo===null)return;const r=In.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,l=r.getWidth();o<l;o++)for(let c=o+1,h=r.getHeight();c<h;c++)r.get(o,c)!==r.get(c,o)&&(r.flip(c,o),r.flip(o,c))}}class Qo{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,l){if(r.length!==o.getTotalCodewords())throw new T;const c=o.getECBlocksForLevel(l);let h=0;const f=c.getECBlocks();for(const Y of f)h+=Y.getCount();const m=new Array(h);let E=0;for(const Y of f)for(let W=0;W<Y.getCount();W++){const Z=Y.getDataCodewords(),ne=c.getECCodewordsPerBlock()+Z;m[E++]=new Qo(Z,new Uint8Array(ne))}const x=m[0].codewords.length;let A=m.length-1;for(;A>=0&&m[A].codewords.length!==x;)A--;A++;const v=x-c.getECCodewordsPerBlock();let N=0;for(let Y=0;Y<v;Y++)for(let W=0;W<E;W++)m[W].codewords[Y]=r[N++];for(let Y=A;Y<E;Y++)m[Y].codewords[v]=r[N++];const U=m[0].codewords.length;for(let Y=v;Y<U;Y++)for(let W=0;W<E;W++){const Z=W<A?Y:Y+1;m[W].codewords[Z]=r[N++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Kn;(function(b){b[b.TERMINATOR=0]="TERMINATOR",b[b.NUMERIC=1]="NUMERIC",b[b.ALPHANUMERIC=2]="ALPHANUMERIC",b[b.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",b[b.BYTE=4]="BYTE",b[b.ECI=5]="ECI",b[b.KANJI=6]="KANJI",b[b.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",b[b.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",b[b.HANZI=9]="HANZI"})(Kn||(Kn={}));class Se{constructor(r,o,l,c){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=c,Se.FOR_BITS.set(c,this),Se.FOR_VALUE.set(r,this)}static forBits(r){const o=Se.FOR_BITS.get(r);if(o===void 0)throw new T;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Se))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}Se.FOR_BITS=new Map,Se.FOR_VALUE=new Map,Se.TERMINATOR=new Se(Kn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Se.NUMERIC=new Se(Kn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Se.ALPHANUMERIC=new Se(Kn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Se.STRUCTURED_APPEND=new Se(Kn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Se.BYTE=new Se(Kn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Se.ECI=new Se(Kn.ECI,"ECI",Int32Array.from([0,0,0]),7),Se.KANJI=new Se(Kn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Se.FNC1_FIRST_POSITION=new Se(Kn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Se.FNC1_SECOND_POSITION=new Se(Kn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Se.HANZI=new Se(Kn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Dt{static decode(r,o,l,c){const h=new oi(r);let f=new F;const m=new Array;let E=-1,x=-1;try{let A=null,v=!1,N;do{if(h.available()<4)N=Se.TERMINATOR;else{const U=h.readBits(4);N=Se.forBits(U)}switch(N){case Se.TERMINATOR:break;case Se.FNC1_FIRST_POSITION:case Se.FNC1_SECOND_POSITION:v=!0;break;case Se.STRUCTURED_APPEND:if(h.available()<16)throw new R;E=h.readBits(8),x=h.readBits(8);break;case Se.ECI:const U=Dt.parseECIValue(h);if(A=M.getCharacterSetECIByValue(U),A===null)throw new R;break;case Se.HANZI:const Y=h.readBits(4),W=h.readBits(N.getCharacterCountBits(o));Y===Dt.GB2312_SUBSET&&Dt.decodeHanziSegment(h,f,W);break;default:const Z=h.readBits(N.getCharacterCountBits(o));switch(N){case Se.NUMERIC:Dt.decodeNumericSegment(h,f,Z);break;case Se.ALPHANUMERIC:Dt.decodeAlphanumericSegment(h,f,Z,v);break;case Se.BYTE:Dt.decodeByteSegment(h,f,Z,A,m,c);break;case Se.KANJI:Dt.decodeKanjiSegment(h,f,Z);break;default:throw new R}break}}while(N!==Se.TERMINATOR)}catch{throw new R}return new qi(r,f.toString(),m.length===0?null:m,l===null?null:l.toString(),E,x)}static decodeHanziSegment(r,o,l){if(l*13>r.available())throw new R;const c=new Uint8Array(2*l);let h=0;for(;l>0;){const f=r.readBits(13);let m=f/96<<8&4294967295|f%96;m<959?m+=41377:m+=42657,c[h]=m>>8&255,c[h+1]=m&255,h+=2,l--}try{o.append(G.decode(c,j.GB2312))}catch(f){throw new R(f)}}static decodeKanjiSegment(r,o,l){if(l*13>r.available())throw new R;const c=new Uint8Array(2*l);let h=0;for(;l>0;){const f=r.readBits(13);let m=f/192<<8&4294967295|f%192;m<7936?m+=33088:m+=49472,c[h]=m>>8,c[h+1]=m,h+=2,l--}try{o.append(G.decode(c,j.SHIFT_JIS))}catch(f){throw new R(f)}}static decodeByteSegment(r,o,l,c,h,f){if(8*l>r.available())throw new R;const m=new Uint8Array(l);for(let x=0;x<l;x++)m[x]=r.readBits(8);let E;c===null?E=j.guessEncoding(m,f):E=c.getName();try{o.append(G.decode(m,E))}catch(x){throw new R(x)}h.push(m)}static toAlphaNumericChar(r){if(r>=Dt.ALPHANUMERIC_CHARS.length)throw new R;return Dt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,l,c){const h=o.length();for(;l>1;){if(r.available()<11)throw new R;const f=r.readBits(11);o.append(Dt.toAlphaNumericChar(Math.floor(f/45))),o.append(Dt.toAlphaNumericChar(f%45)),l-=2}if(l===1){if(r.available()<6)throw new R;o.append(Dt.toAlphaNumericChar(r.readBits(6)))}if(c)for(let f=h;f<o.length();f++)o.charAt(f)==="%"&&(f<o.length()-1&&o.charAt(f+1)==="%"?o.deleteCharAt(f+1):o.setCharAt(f,""))}static decodeNumericSegment(r,o,l){for(;l>=3;){if(r.available()<10)throw new R;const c=r.readBits(10);if(c>=1e3)throw new R;o.append(Dt.toAlphaNumericChar(Math.floor(c/100))),o.append(Dt.toAlphaNumericChar(Math.floor(c/10)%10)),o.append(Dt.toAlphaNumericChar(c%10)),l-=3}if(l===2){if(r.available()<7)throw new R;const c=r.readBits(7);if(c>=100)throw new R;o.append(Dt.toAlphaNumericChar(Math.floor(c/10))),o.append(Dt.toAlphaNumericChar(c%10))}else if(l===1){if(r.available()<4)throw new R;const c=r.readBits(4);if(c>=10)throw new R;o.append(Dt.toAlphaNumericChar(c))}}static parseECIValue(r){const o=r.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=r.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=r.readBits(16);return(o&31)<<16&4294967295|l}throw new R}}Dt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Dt.GB2312_SUBSET=1;class Dc{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class js{constructor(){this.rsDecoder=new hr(Xe.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix(Ge.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const l=new ss(r);let c=null;try{return this.decodeBitMatrixParser(l,o)}catch(h){c=h}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const h=this.decodeBitMatrixParser(l,o);return h.setOther(new Dc(!0)),h}catch(h){throw c!==null?c:h}}decodeBitMatrixParser(r,o){const l=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),h=r.readCodewords(),f=Qo.getDataBlocks(h,l,c);let m=0;for(const A of f)m+=A.getNumDataCodewords();const E=new Uint8Array(m);let x=0;for(const A of f){const v=A.getCodewords(),N=A.getNumDataCodewords();this.correctErrors(v,N);for(let U=0;U<N;U++)E[x++]=v[U]}return Dt.decode(E,l,c,o)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new I}for(let c=0;c<o;c++)r[c]=l[c]}}class Oc extends xe{constructor(r,o,l){super(r,o),this.estimatedModuleSize=l}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const c=(this.getX()+o)/2,h=(this.getY()+r)/2,f=(this.estimatedModuleSize+l)/2;return new Oc(c,h,f)}}class Ko{constructor(r,o,l,c,h,f,m){this.image=r,this.startX=o,this.startY=l,this.width=c,this.height=h,this.moduleSize=f,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,l=this.width,c=r+l,h=this.startY+o/2,f=new Int32Array(3),m=this.image;for(let E=0;E<o;E++){const x=h+(E&1?-Math.floor((E+1)/2):Math.floor((E+1)/2));f[0]=0,f[1]=0,f[2]=0;let A=r;for(;A<c&&!m.get(A,x);)A++;let v=0;for(;A<c;){if(m.get(A,x))if(v===1)f[1]++;else if(v===2){if(this.foundPatternCross(f)){const N=this.handlePossibleCenter(f,x,A);if(N!==null)return N}f[0]=f[2],f[1]=1,f[2]=0,v=1}else f[++v]++;else v===1&&v++,f[v]++;A++}if(this.foundPatternCross(f)){const N=this.handlePossibleCenter(f,x,c);if(N!==null)return N}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,l=o/2;for(let c=0;c<3;c++)if(Math.abs(o-r[c])>=l)return!1;return!0}crossCheckVertical(r,o,l,c){const h=this.image,f=h.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let E=r;for(;E>=0&&h.get(o,E)&&m[1]<=l;)m[1]++,E--;if(E<0||m[1]>l)return NaN;for(;E>=0&&!h.get(o,E)&&m[0]<=l;)m[0]++,E--;if(m[0]>l)return NaN;for(E=r+1;E<f&&h.get(o,E)&&m[1]<=l;)m[1]++,E++;if(E===f||m[1]>l)return NaN;for(;E<f&&!h.get(o,E)&&m[2]<=l;)m[2]++,E++;if(m[2]>l)return NaN;const x=m[0]+m[1]+m[2];return 5*Math.abs(x-c)>=2*c?NaN:this.foundPatternCross(m)?Ko.centerFromEnd(m,E):NaN}handlePossibleCenter(r,o,l){const c=r[0]+r[1]+r[2],h=Ko.centerFromEnd(r,l),f=this.crossCheckVertical(o,h,2*r[1],c);if(!isNaN(f)){const m=(r[0]+r[1]+r[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(m,f,h))return x.combineEstimate(f,h,m);const E=new Oc(h,f,m);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null}}class Lc extends xe{constructor(r,o,l,c){super(r,o),this.estimatedModuleSize=l,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const c=this.count+1,h=(this.count*this.getX()+o)/c,f=(this.count*this.getY()+r)/c,m=(this.count*this.estimatedModuleSize+l)/c;return new Lc(h,f,m,c)}}class Dr{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ln{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(re.TRY_HARDER)!==void 0,l=r!=null&&r.get(re.PURE_BARCODE)!==void 0,c=this.image,h=c.getHeight(),f=c.getWidth();let m=Math.floor(3*h/(4*ln.MAX_MODULES));(m<ln.MIN_SKIP||o)&&(m=ln.MIN_SKIP);let E=!1;const x=new Int32Array(5);for(let v=m-1;v<h&&!E;v+=m){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let N=0;for(let U=0;U<f;U++)if(c.get(U,v))(N&1)===1&&N++,x[N]++;else if(N&1)x[N]++;else if(N===4)if(ln.foundPatternCross(x)){if(this.handlePossibleCenter(x,v,U,l)===!0)if(m=2,this.hasSkipped===!0)E=this.haveMultiplyConfirmedCenters();else{const W=this.findRowSkip();W>x[2]&&(v+=W-x[2]-m,U=f-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,N=3;continue}N=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,N=3;else x[++N]++;ln.foundPatternCross(x)&&this.handlePossibleCenter(x,v,f,l)===!0&&(m=x[0],this.hasSkipped&&(E=this.haveMultiplyConfirmedCenters()))}const A=this.selectBestPatterns();return xe.orderBestPatterns(A),new Dr(A)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let h=0;h<5;h++){const f=r[h];if(f===0)return!1;o+=f}if(o<7)return!1;const l=o/7,c=l/2;return Math.abs(l-r[0])<c&&Math.abs(l-r[1])<c&&Math.abs(3*l-r[2])<3*c&&Math.abs(l-r[3])<c&&Math.abs(l-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,l,c){const h=this.getCrossCheckStateCount();let f=0;const m=this.image;for(;r>=f&&o>=f&&m.get(o-f,r-f);)h[2]++,f++;if(r<f||o<f)return!1;for(;r>=f&&o>=f&&!m.get(o-f,r-f)&&h[1]<=l;)h[1]++,f++;if(r<f||o<f||h[1]>l)return!1;for(;r>=f&&o>=f&&m.get(o-f,r-f)&&h[0]<=l;)h[0]++,f++;if(h[0]>l)return!1;const E=m.getHeight(),x=m.getWidth();for(f=1;r+f<E&&o+f<x&&m.get(o+f,r+f);)h[2]++,f++;if(r+f>=E||o+f>=x)return!1;for(;r+f<E&&o+f<x&&!m.get(o+f,r+f)&&h[3]<l;)h[3]++,f++;if(r+f>=E||o+f>=x||h[3]>=l)return!1;for(;r+f<E&&o+f<x&&m.get(o+f,r+f)&&h[4]<l;)h[4]++,f++;if(h[4]>=l)return!1;const A=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(A-c)<2*c&&ln.foundPatternCross(h)}crossCheckVertical(r,o,l,c){const h=this.image,f=h.getHeight(),m=this.getCrossCheckStateCount();let E=r;for(;E>=0&&h.get(o,E);)m[2]++,E--;if(E<0)return NaN;for(;E>=0&&!h.get(o,E)&&m[1]<=l;)m[1]++,E--;if(E<0||m[1]>l)return NaN;for(;E>=0&&h.get(o,E)&&m[0]<=l;)m[0]++,E--;if(m[0]>l)return NaN;for(E=r+1;E<f&&h.get(o,E);)m[2]++,E++;if(E===f)return NaN;for(;E<f&&!h.get(o,E)&&m[3]<l;)m[3]++,E++;if(E===f||m[3]>=l)return NaN;for(;E<f&&h.get(o,E)&&m[4]<l;)m[4]++,E++;if(m[4]>=l)return NaN;const x=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(x-c)>=2*c?NaN:ln.foundPatternCross(m)?ln.centerFromEnd(m,E):NaN}crossCheckHorizontal(r,o,l,c){const h=this.image,f=h.getWidth(),m=this.getCrossCheckStateCount();let E=r;for(;E>=0&&h.get(E,o);)m[2]++,E--;if(E<0)return NaN;for(;E>=0&&!h.get(E,o)&&m[1]<=l;)m[1]++,E--;if(E<0||m[1]>l)return NaN;for(;E>=0&&h.get(E,o)&&m[0]<=l;)m[0]++,E--;if(m[0]>l)return NaN;for(E=r+1;E<f&&h.get(E,o);)m[2]++,E++;if(E===f)return NaN;for(;E<f&&!h.get(E,o)&&m[3]<l;)m[3]++,E++;if(E===f||m[3]>=l)return NaN;for(;E<f&&h.get(E,o)&&m[4]<l;)m[4]++,E++;if(m[4]>=l)return NaN;const x=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(x-c)>=c?NaN:ln.foundPatternCross(m)?ln.centerFromEnd(m,E):NaN}handlePossibleCenter(r,o,l,c){const h=r[0]+r[1]+r[2]+r[3]+r[4];let f=ln.centerFromEnd(r,l),m=this.crossCheckVertical(o,Math.floor(f),r[2],h);if(!isNaN(m)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(m),r[2],h),!isNaN(f)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(f),r[2],h)))){const E=h/7;let x=!1;const A=this.possibleCenters;for(let v=0,N=A.length;v<N;v++){const U=A[v];if(U.aboutEquals(E,m,f)){A[v]=U.combineEstimate(m,f,E),x=!0;break}}if(!x){const v=new Lc(f,m,E);A.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=ln.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const l=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=ln.CENTER_QUORUM&&(r++,o+=f.getEstimatedModuleSize());if(r<3)return!1;const c=o/l;let h=0;for(const f of this.possibleCenters)h+=Math.abs(f.getEstimatedModuleSize()-c);return h<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ie;const o=this.possibleCenters;let l;if(r>3){let c=0,h=0;for(const E of this.possibleCenters){const x=E.getEstimatedModuleSize();c+=x,h+=x*x}l=c/r;let f=Math.sqrt(h/r-l*l);o.sort((E,x)=>{const A=Math.abs(x.getEstimatedModuleSize()-l),v=Math.abs(E.getEstimatedModuleSize()-l);return A<v?-1:A>v?1:0});const m=Math.max(.2*l,f);for(let E=0;E<o.length&&o.length>3;E++){const x=o[E];Math.abs(x.getEstimatedModuleSize()-l)>m&&(o.splice(E,1),E--)}}if(o.length>3){let c=0;for(const h of o)c+=h.getEstimatedModuleSize();l=c/o.length,o.sort((h,f)=>{if(f.getCount()===h.getCount()){const m=Math.abs(f.getEstimatedModuleSize()-l),E=Math.abs(h.getEstimatedModuleSize()-l);return m<E?1:m>E?-1:0}else return f.getCount()-h.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}ln.CENTER_QUORUM=2,ln.MIN_SKIP=3,ln.MAX_MODULES=57;class as{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(re.NEED_RESULT_POINT_CALLBACK);const l=new ln(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const o=r.getTopLeft(),l=r.getTopRight(),c=r.getBottomLeft(),h=this.calculateModuleSize(o,l,c);if(h<1)throw new ie("No pattern found in proccess finder.");const f=as.computeDimension(o,l,c,h),m=Te.getProvisionalVersionForDimension(f),E=m.getDimensionForVersion()-7;let x=null;if(m.getAlignmentPatternCenters().length>0){const U=l.getX()-o.getX()+c.getX(),Y=l.getY()-o.getY()+c.getY(),W=1-3/E,Z=Math.floor(o.getX()+W*(U-o.getX())),ne=Math.floor(o.getY()+W*(Y-o.getY()));for(let fe=4;fe<=16;fe<<=1)try{x=this.findAlignmentInRegion(h,Z,ne,fe);break}catch(ge){if(!(ge instanceof ie))throw ge}}const A=as.createTransform(o,l,c,x,f),v=as.sampleGrid(this.image,A,f);let N;return x===null?N=[c,o,l]:N=[c,o,l,x],new Vs(v,N)}static createTransform(r,o,l,c,h){const f=h-3.5;let m,E,x,A;return c!==null?(m=c.getX(),E=c.getY(),x=f-3,A=x):(m=o.getX()-r.getX()+l.getX(),E=o.getY()-r.getY()+l.getY(),x=f,A=f),Yn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,x,A,3.5,f,r.getX(),r.getY(),o.getX(),o.getY(),m,E,l.getX(),l.getY())}static sampleGrid(r,o,l){return si.getInstance().sampleGridWithTransform(r,l,l,o)}static computeDimension(r,o,l,c){const h=ve.round(xe.distance(r,o)/c),f=ve.round(xe.distance(r,l)/c);let m=Math.floor((h+f)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new ie("Dimensions could be not found.")}return m}calculateModuleSize(r,o,l){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,l,c){let h=this.sizeOfBlackWhiteBlackRun(r,o,l,c),f=1,m=r-(l-r);m<0?(f=r/(r-m),m=0):m>=this.image.getWidth()&&(f=(this.image.getWidth()-1-r)/(m-r),m=this.image.getWidth()-1);let E=Math.floor(o-(c-o)*f);return f=1,E<0?(f=o/(o-E),E=0):E>=this.image.getHeight()&&(f=(this.image.getHeight()-1-o)/(E-o),E=this.image.getHeight()-1),m=Math.floor(r+(m-r)*f),h+=this.sizeOfBlackWhiteBlackRun(r,o,m,E),h-1}sizeOfBlackWhiteBlackRun(r,o,l,c){const h=Math.abs(c-o)>Math.abs(l-r);if(h){let U=r;r=o,o=U,U=l,l=c,c=U}const f=Math.abs(l-r),m=Math.abs(c-o);let E=-f/2;const x=r<l?1:-1,A=o<c?1:-1;let v=0;const N=l+x;for(let U=r,Y=o;U!==N;U+=x){const W=h?Y:U,Z=h?U:Y;if(v===1===this.image.get(W,Z)){if(v===2)return ve.distance(U,Y,r,o);v++}if(E+=m,E>0){if(Y===c)break;Y+=A,E-=f}}return v===2?ve.distance(l+x,c,r,o):NaN}findAlignmentInRegion(r,o,l,c){const h=Math.floor(c*r),f=Math.max(0,o-h),m=Math.min(this.image.getWidth()-1,o+h);if(m-f<r*3)throw new ie("Alignment top exceeds estimated module size.");const E=Math.max(0,l-h),x=Math.min(this.image.getHeight()-1,l+h);if(x-E<r*3)throw new ie("Alignment bottom exceeds estimated module size.");return new Ko(this.image,f,E,m-f,x-E,r,this.resultPointCallback).find()}}class vi{constructor(){this.decoder=new js}getDecoder(){return this.decoder}decode(r,o){let l,c;if(o!=null&&o.get(re.PURE_BARCODE)!==void 0){const E=vi.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(E,o),c=vi.NO_POINTS}else{const E=new as(r.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(E.getBits(),o),c=E.getPoints()}l.getOther()instanceof Dc&&l.getOther().applyMirroredCorrection(c);const h=new ct(l.getText(),l.getRawBytes(),void 0,c,Ce.QR_CODE,void 0),f=l.getByteSegments();f!==null&&h.putMetadata(Ht.BYTE_SEGMENTS,f);const m=l.getECLevel();return m!==null&&h.putMetadata(Ht.ERROR_CORRECTION_LEVEL,m),l.hasStructuredAppend()&&(h.putMetadata(Ht.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),h.putMetadata(Ht.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),h}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o===null||l===null)throw new ie;const c=this.moduleSize(o,r);let h=o[1],f=l[1],m=o[0],E=l[0];if(m>=E||h>=f)throw new ie;if(f-h!==E-m&&(E=m+(f-h),E>=r.getWidth()))throw new ie;const x=Math.round((E-m+1)/c),A=Math.round((f-h+1)/c);if(x<=0||A<=0)throw new ie;if(A!==x)throw new ie;const v=Math.floor(c/2);h+=v,m+=v;const N=m+Math.floor((x-1)*c)-E;if(N>0){if(N>v)throw new ie;m-=N}const U=h+Math.floor((A-1)*c)-f;if(U>0){if(U>v)throw new ie;h-=U}const Y=new Ge(x,A);for(let W=0;W<A;W++){const Z=h+Math.floor(W*c);for(let ne=0;ne<x;ne++)r.get(m+Math.floor(ne*c),Z)&&Y.set(ne,W)}return Y}static moduleSize(r,o){const l=o.getHeight(),c=o.getWidth();let h=r[0],f=r[1],m=!0,E=0;for(;h<c&&f<l;){if(m!==o.get(h,f)){if(++E===5)break;m=!m}h++,f++}if(h===c||f===l)throw new ie;return(h-r[0])/7}}vi.NO_POINTS=new Array;class Ie{PDF417Common(){}static getBitCountSum(r){return ve.sum(r)}static toIntArray(r){if(r==null||!r.length)return Ie.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let l=0;for(const c of r)o[l++]=c;return o}static getCodeword(r){const o=L.binarySearch(Ie.SYMBOL_TABLE,r&262143);return o<0?-1:(Ie.CODEWORD_TABLE[o]-1)%Ie.NUMBER_OF_CODEWORDS}}Ie.NUMBER_OF_CODEWORDS=929,Ie.MAX_CODEWORDS_IN_BARCODE=Ie.NUMBER_OF_CODEWORDS-1,Ie.MIN_ROWS_IN_BARCODE=3,Ie.MAX_ROWS_IN_BARCODE=90,Ie.MODULES_IN_CODEWORD=17,Ie.MODULES_IN_STOP_PATTERN=18,Ie.BARS_IN_MODULE=8,Ie.EMPTY_INT_ARRAY=new Int32Array([]),Ie.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ie.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class eo{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Le{static detectMultiple(r,o,l){let c=r.getBlackMatrix(),h=Le.detect(l,c);return h.length||(c=c.clone(),c.rotate180(),h=Le.detect(l,c)),new eo(c,h)}static detect(r,o){const l=new Array;let c=0,h=0,f=!1;for(;c<o.getHeight();){const m=Le.findVertices(o,c,h);if(m[0]==null&&m[3]==null){if(!f)break;f=!1,h=0;for(const E of l)E[1]!=null&&(c=Math.trunc(Math.max(c,E[1].getY()))),E[3]!=null&&(c=Math.max(c,Math.trunc(E[3].getY())));c+=Le.ROW_STEP;continue}if(f=!0,l.push(m),!r)break;m[2]!=null?(h=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(h=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return l}static findVertices(r,o,l){const c=r.getHeight(),h=r.getWidth(),f=new Array(8);return Le.copyToResult(f,Le.findRowsWithPattern(r,c,h,o,l,Le.START_PATTERN),Le.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY())),Le.copyToResult(f,Le.findRowsWithPattern(r,c,h,o,l,Le.STOP_PATTERN),Le.INDEXES_STOP_PATTERN),f}static copyToResult(r,o,l){for(let c=0;c<l.length;c++)r[l[c]]=o[c]}static findRowsWithPattern(r,o,l,c,h,f){const m=new Array(4);let E=!1;const x=new Int32Array(f.length);for(;c<o;c+=Le.ROW_STEP){let v=Le.findGuardPattern(r,h,c,l,!1,f,x);if(v!=null){for(;c>0;){const N=Le.findGuardPattern(r,h,--c,l,!1,f,x);if(N!=null)v=N;else{c++;break}}m[0]=new xe(v[0],c),m[1]=new xe(v[1],c),E=!0;break}}let A=c+1;if(E){let v=0,N=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;A<o;A++){const U=Le.findGuardPattern(r,N[0],A,l,!1,f,x);if(U!=null&&Math.abs(N[0]-U[0])<Le.MAX_PATTERN_DRIFT&&Math.abs(N[1]-U[1])<Le.MAX_PATTERN_DRIFT)N=U,v=0;else{if(v>Le.SKIPPED_ROW_COUNT_MAX)break;v++}}A-=v+1,m[2]=new xe(N[0],A),m[3]=new xe(N[1],A)}return A-c<Le.BARCODE_MIN_HEIGHT&&L.fill(m,null),m}static findGuardPattern(r,o,l,c,h,f,m){L.fillWithin(m,0,m.length,0);let E=o,x=0;for(;r.get(E,l)&&E>0&&x++<Le.MAX_PIXEL_DRIFT;)E--;let A=E,v=0,N=f.length;for(let U=h;A<c;A++)if(r.get(A,l)!==U)m[v]++;else{if(v===N-1){if(Le.patternMatchVariance(m,f,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE)return new Int32Array([E,A]);E+=m[0]+m[1],X.arraycopy(m,2,m,0,v-1),m[v-1]=0,m[v]=0,v--}else v++;m[v]=1,U=!U}return v===N-1&&Le.patternMatchVariance(m,f,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE?new Int32Array([E,A-1]):null}static patternMatchVariance(r,o,l){let c=r.length,h=0,f=0;for(let x=0;x<c;x++)h+=r[x],f+=o[x];if(h<f)return 1/0;let m=h/f;l*=m;let E=0;for(let x=0;x<c;x++){let A=r[x],v=o[x]*m,N=A>v?A-v:v-A;if(N>l)return 1/0;E+=N}return E/h}}Le.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Le.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Le.MAX_AVG_VARIANCE=.42,Le.MAX_INDIVIDUAL_VARIANCE=.8,Le.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Le.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Le.MAX_PIXEL_DRIFT=3,Le.MAX_PATTERN_DRIFT=5,Le.SKIPPED_ROW_COUNT_MAX=25,Le.ROW_STEP=5,Le.BARCODE_MIN_HEIGHT=10;class cn{constructor(r,o){if(o.length===0)throw new T;this.field=r;let l=o.length;if(l>1&&o[0]===0){let c=1;for(;c<l&&o[c]===0;)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),X.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let h of this.coefficients)c=this.field.add(c,h);return c}let o=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)o=this.field.add(this.field.multiply(r,o),this.coefficients[c]);return o}add(r){if(!this.field.equals(r.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){let f=o;o=l,l=f}let c=new Int32Array(l.length),h=l.length-o.length;X.arraycopy(l,0,c,0,h);for(let f=h;f<l.length;f++)c[f]=this.field.add(o[f-h],l[f]);return new cn(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new T("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof cn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new cn(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,c=r.coefficients,h=c.length,f=new Int32Array(l+h-1);for(let m=0;m<l;m++){let E=o[m];for(let x=0;x<h;x++)f[m+x]=this.field.add(f[m+x],this.field.multiply(E,c[x]))}return new cn(this.field,f)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let l=0;l<r;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new cn(this.field,o)}multiplyScalar(r){if(r===0)return new cn(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let c=0;c<o;c++)l[c]=this.field.multiply(this.coefficients[c],r);return new cn(this.field,l)}multiplyByMonomial(r,o){if(r<0)throw new T;if(o===0)return new cn(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+r);for(let h=0;h<l;h++)c[h]=this.field.multiply(this.coefficients[h],o);return new cn(this.field,c)}toString(){let r=new F;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(o===0||l!==1)&&r.append(l),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class Pc{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new T;return this.logTable[r]}inverse(r){if(r===0)throw new _i;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Ot extends Pc{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let c=0;c<r;c++)this.expTable[c]=l,l=l*o%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new cn(this,new Int32Array([0])),this.one=new cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new T;if(o===0)return this.zero;let l=new Int32Array(r+1);return l[0]=o,new cn(this,l)}}Ot.PDF417_GF=new Ot(Ie.NUMBER_OF_CODEWORDS,3);class bh{constructor(){this.field=Ot.PDF417_GF}decode(r,o,l){let c=new cn(this.field,r),h=new Int32Array(o),f=!1;for(let Y=o;Y>0;Y--){let W=c.evaluateAt(this.field.exp(Y));h[o-Y]=W,W!==0&&(f=!0)}if(!f)return 0;let m=this.field.getOne();if(l!=null)for(const Y of l){let W=this.field.exp(r.length-1-Y),Z=new cn(this.field,new Int32Array([this.field.subtract(0,W),1]));m=m.multiply(Z)}let E=new cn(this.field,h),x=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),E,o),A=x[0],v=x[1],N=this.findErrorLocations(A),U=this.findErrorMagnitudes(v,A,N);for(let Y=0;Y<N.length;Y++){let W=r.length-1-this.field.log(N[Y]);if(W<0)throw I.getChecksumInstance();r[W]=this.field.subtract(r[W],U[Y])}return N.length}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){let N=r;r=o,o=N}let c=r,h=o,f=this.field.getZero(),m=this.field.getOne();for(;h.getDegree()>=Math.round(l/2);){let N=c,U=f;if(c=h,f=m,c.isZero())throw I.getChecksumInstance();h=N;let Y=this.field.getZero(),W=c.getCoefficient(c.getDegree()),Z=this.field.inverse(W);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){let ne=h.getDegree()-c.getDegree(),fe=this.field.multiply(h.getCoefficient(h.getDegree()),Z);Y=Y.add(this.field.buildMonomial(ne,fe)),h=h.subtract(c.multiplyByMonomial(ne,fe))}m=Y.multiply(f).subtract(U).negative()}let E=m.getCoefficient(0);if(E===0)throw I.getChecksumInstance();let x=this.field.inverse(E),A=m.multiply(x),v=h.multiply(x);return[A,v]}findErrorLocations(r){let o=r.getDegree(),l=new Int32Array(o),c=0;for(let h=1;h<this.field.getSize()&&c<o;h++)r.evaluateAt(h)===0&&(l[c]=this.field.inverse(h),c++);if(c!==o)throw I.getChecksumInstance();return l}findErrorMagnitudes(r,o,l){let c=o.getDegree(),h=new Int32Array(c);for(let x=1;x<=c;x++)h[c-x]=this.field.multiply(x,o.getCoefficient(x));let f=new cn(this.field,h),m=l.length,E=new Int32Array(m);for(let x=0;x<m;x++){let A=this.field.inverse(l[x]),v=this.field.subtract(0,r.evaluateAt(A)),N=this.field.inverse(f.evaluateAt(A));E[x]=this.field.multiply(v,N)}return E}}class os{constructor(r,o,l,c,h){r instanceof os?this.constructor_2(r):this.constructor_1(r,o,l,c,h)}constructor_1(r,o,l,c,h){const f=o==null||l==null,m=c==null||h==null;if(f&&m)throw new ie;f?(o=new xe(0,c.getY()),l=new xe(0,h.getY())):m&&(c=new xe(r.getWidth()-1,o.getY()),h=new xe(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=o,this.bottomLeft=l,this.topRight=c,this.bottomRight=h,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),h.getX())),this.minY=Math.trunc(Math.min(o.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),h.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new os(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,l){let c=this.topLeft,h=this.bottomLeft,f=this.topRight,m=this.bottomRight;if(r>0){let E=l?this.topLeft:this.topRight,x=Math.trunc(E.getY()-r);x<0&&(x=0);let A=new xe(E.getX(),x);l?c=A:f=A}if(o>0){let E=l?this.bottomLeft:this.bottomRight,x=Math.trunc(E.getY()+o);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let A=new xe(E.getX(),x);l?h=A:m=A}return new os(this.image,c,h,f,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class vh{constructor(r,o,l,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class zs{constructor(){this.buffer=""}static form(r,o){let l=-1;function c(f,m,E,x,A,v){if(f==="%%")return"%";if(o[++l]===void 0)return;f=x?parseInt(x.substr(1)):void 0;let N=A?parseInt(A.substr(1)):void 0,U;switch(v){case"s":U=o[l];break;case"c":U=o[l][0];break;case"f":U=parseFloat(o[l]).toFixed(f);break;case"p":U=parseFloat(o[l]).toPrecision(f);break;case"e":U=parseFloat(o[l]).toExponential(f);break;case"x":U=parseInt(o[l]).toString(N||16);break;case"d":U=parseFloat(parseInt(o[l],N||10).toPrecision(f)).toFixed(0);break}U=typeof U=="object"?JSON.stringify(U):(+U).toString(N);let Y=parseInt(E),W=E&&E[0]+""=="0"?"0":" ";for(;U.length<Y;)U=m!==void 0?U+W:W+U;return U}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(h,c)}format(r,...o){this.buffer+=zs.form(r,o)}toString(){return this.buffer}}class Hs{constructor(r){this.boundingBox=new os(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let l=1;l<Hs.MAX_NEARBY_DISTANCE;l++){let c=this.imageRowToCodewordIndex(r)-l;if(c>=0&&(o=this.codewords[c],o!=null)||(c=this.imageRowToCodewordIndex(r)+l,c<this.codewords.length&&(o=this.codewords[c],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new zs;let o=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return r.toString()}}Hs.MAX_NEARBY_DISTANCE=5;class Or{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[l,c]of this.values.entries()){const h={getKey:()=>l,getValue:()=>c};h.getValue()>r?(r=h.getValue(),o=[],o.push(h.getKey())):h.getValue()===r&&o.push(h.getKey())}return Ie.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class dr extends Hs{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),E=-1,x=1,A=0;for(let v=f;v<m;v++){if(o[v]==null)continue;let N=o[v],U=N.getRowNumber()-E;if(U===0)A++;else if(U===1)x=Math.max(x,A),A=1,E=N.getRowNumber();else if(U<0||N.getRowNumber()>=r.getRowCount()||U>v)o[v]=null;else{let Y;x>2?Y=(x-2)*U:Y=U;let W=Y>=v;for(let Z=1;Z<=Y&&!W;Z++)W=o[v-Z]!=null;W?o[v]=null:(E=N.getRowNumber(),A=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=o.length)continue;o[c]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),E=-1;for(let x=h;x<f;x++){if(m[x]==null)continue;let A=m[x];A.setRowNumberAsRowIndicatorColumn();let v=A.getRowNumber()-E;v===0||(v===1?E=A.getRowNumber():A.getRowNumber()>=r.getRowCount()?m[x]=null:E=A.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new Or,l=new Or,c=new Or,h=new Or;for(let m of r){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let E=m.getValue()%30,x=m.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:l.setValue(E*3+1);break;case 1:h.setValue(E/3),c.setValue(E%3);break;case 2:o.setValue(E+1);break}}if(o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||h.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<Ie.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>Ie.MAX_ROWS_IN_BARCODE)return null;let f=new vh(o.getValue()[0],l.getValue()[0],c.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(r,f),f}removeIncorrectCodewords(r,o){for(let l=0;l<r.length;l++){let c=r[l];if(r[l]==null)continue;let h=c.getValue()%30,f=c.getRowNumber();if(f>o.getRowCount()){r[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:h*3+1!==o.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(h/3)!==o.getErrorCorrectionLevel()||h%3!==o.getRowCountLowerPart())&&(r[l]=null);break;case 2:h+1!==o.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Gs{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Ie.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let c=0;c<l.length;c++)l[c]!=null&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(o,c,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&o[l]!=null&&r[l].getRowNumber()===o[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let h=this.detectionResultColumns[c].getCodewords()[l];h!=null&&(h.setRowNumber(r[l].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let c=o[l].getRowNumber(),h=0;for(let f=this.barcodeColumnCount+1;f>0&&h<this.ADJUST_ROW_NUMBER_SKIP;f--){let m=this.detectionResultColumns[f].getCodewords()[l];m!=null&&(h=Gs.adjustRowNumberIfValid(c,h,m),m.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let c=o[l].getRowNumber(),h=0;for(let f=1;f<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;f++){let m=this.detectionResultColumns[f].getCodewords()[l];m!=null&&(h=Gs.adjustRowNumberIfValid(c,h,m),m.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,l){if(!this.detectionResultColumns[r-1])return;let c=l[o],h=this.detectionResultColumns[r-1].getCodewords(),f=h;this.detectionResultColumns[r+1]!=null&&(f=this.detectionResultColumns[r+1].getCodewords());let m=new Array(14);m[2]=h[o],m[3]=f[o],o>0&&(m[0]=l[o-1],m[4]=h[o-1],m[5]=f[o-1]),o>1&&(m[8]=l[o-2],m[10]=h[o-2],m[11]=f[o-2]),o<l.length-1&&(m[1]=l[o+1],m[6]=h[o+1],m[7]=f[o+1]),o<l.length-2&&(m[9]=l[o+2],m[12]=h[o+2],m[13]=f[o+2]);for(let E of m)if(Gs.adjustRowNumber(c,E))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new zs;for(let l=0;l<r.getCodewords().length;l++){o.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){o.format("    |   ");continue}let h=this.detectionResultColumns[c].getCodewords()[l];if(h==null){o.format("    |   ");continue}o.format(" %3d|%3d",h.getRowNumber(),h.getValue())}o.format("%n")}return o.toString()}}class to{constructor(r,o,l,c){this.rowNumber=to.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==to.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}to.BARCODE_ROW_UNKNOWN=-1;class un{static initialize(){for(let r=0;r<Ie.SYMBOL_TABLE.length;r++){let o=Ie.SYMBOL_TABLE[r],l=o&1;for(let c=0;c<Ie.BARS_IN_MODULE;c++){let h=0;for(;(o&1)===l;)h+=1,o>>=1;l=o&1,un.RATIOS_TABLE[r]||(un.RATIOS_TABLE[r]=new Array(Ie.BARS_IN_MODULE)),un.RATIOS_TABLE[r][Ie.BARS_IN_MODULE-c-1]=Math.fround(h/Ie.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=un.getDecodedCodewordValue(un.sampleBitCounts(r));return o!==-1?o:un.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=ve.sum(r),l=new Int32Array(Ie.BARS_IN_MODULE),c=0,h=0;for(let f=0;f<Ie.MODULES_IN_CODEWORD;f++){let m=o/(2*Ie.MODULES_IN_CODEWORD)+f*o/Ie.MODULES_IN_CODEWORD;h+r[c]<=m&&(h+=r[c],c++),l[c]++}return l}static getDecodedCodewordValue(r){let o=un.getBitValue(r);return Ie.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let l=0;l<r.length;l++)for(let c=0;c<r[l];c++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=ve.sum(r),l=new Array(Ie.BARS_IN_MODULE);if(o>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(r[f]/o);let c=Wt.MAX_VALUE,h=-1;this.bSymbolTableReady||un.initialize();for(let f=0;f<un.RATIOS_TABLE.length;f++){let m=0,E=un.RATIOS_TABLE[f];for(let x=0;x<Ie.BARS_IN_MODULE;x++){let A=Math.fround(E[x]-l[x]);if(m+=Math.fround(A*A),m>=c)break}m<c&&(c=m,h=Ie.SYMBOL_TABLE[f])}return h}}un.bSymbolTableReady=!1,un.RATIOS_TABLE=new Array(Ie.SYMBOL_TABLE.length).map(b=>new Array(Ie.BARS_IN_MODULE));class kc{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Zo{static parseLong(r,o=void 0){return parseInt(r,o)}}class no extends y{}no.kind="NullPointerException";class Ih{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,l){if(r==null)throw new no;if(o<0||o>r.length||l<0||o+l>r.length||o+l<0)throw new $;if(l===0)return;for(let c=0;c<l;c++)this.write(r[o+c])}flush(){}close(){}}class Jo extends y{}class A0 extends Ih{constructor(r=32){if(super(),this.count=0,r<0)throw new T("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Jo;l=k.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,l){if(o<0||o>r.length||l<0||o+l-r.length>0)throw new $;this.ensureCapacity(this.count+l),X.arraycopy(r,o,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var dt;(function(b){b[b.ALPHA=0]="ALPHA",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.PUNCT=3]="PUNCT",b[b.ALPHA_SHIFT=4]="ALPHA_SHIFT",b[b.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(dt||(dt={}));function Ys(){if(typeof window<"u")return window.BigInt||null;if(typeof Fc<"u")return Fc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let io;function gr(b){if(typeof io>"u"&&(io=Ys()),io===null)throw new Error("BigInt is not supported!");return io(b)}function Bc(){let b=[];b[0]=gr(1);let r=gr(900);b[1]=r;for(let o=2;o<16;o++)b[o]=b[o-1]*r;return b}class ee{static decode(r,o){let l=new F(""),c=M.ISO8859_1;l.enableDecoding(c);let h=1,f=r[h++],m=new kc;for(;h<r[0];){switch(f){case ee.TEXT_COMPACTION_MODE_LATCH:h=ee.textCompaction(r,h,l);break;case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:h=ee.byteCompaction(f,r,c,h,l);break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[h++]);break;case ee.NUMERIC_COMPACTION_MODE_LATCH:h=ee.numericCompaction(r,h,l);break;case ee.ECI_CHARSET:M.getCharacterSetECIByValue(r[h++]);break;case ee.ECI_GENERAL_PURPOSE:h+=2;break;case ee.ECI_USER_DEFINED:h++;break;case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=ee.decodeMacroBlock(r,h,m);break;case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:throw new R;default:h--,h=ee.textCompaction(r,h,l);break}if(h<r.length)f=r[h++];else throw R.getFormatInstance()}if(l.length()===0)throw R.getFormatInstance();let E=new qi(null,l.toString(),null,o);return E.setOther(m),E}static decodeMacroBlock(r,o,l){if(o+ee.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw R.getFormatInstance();let c=new Int32Array(ee.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<ee.NUMBER_OF_SEQUENCE_CODEWORDS;m++,o++)c[m]=r[o];l.setSegmentIndex(k.parseInt(ee.decodeBase900toBase10(c,ee.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new F;o=ee.textCompaction(r,o,h),l.setFileId(h.toString());let f=-1;for(r[o]===ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=o+1);o<r[0];)switch(r[o]){case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new F;o=ee.textCompaction(r,o+1,m),l.setFileName(m.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let E=new F;o=ee.textCompaction(r,o+1,E),l.setSender(E.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new F;o=ee.textCompaction(r,o+1,x),l.setAddressee(x.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let A=new F;o=ee.numericCompaction(r,o+1,A),l.setSegmentCount(k.parseInt(A.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let v=new F;o=ee.numericCompaction(r,o+1,v),l.setTimestamp(Zo.parseLong(v.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let N=new F;o=ee.numericCompaction(r,o+1,N),l.setChecksum(k.parseInt(N.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let U=new F;o=ee.numericCompaction(r,o+1,U),l.setFileSize(Zo.parseLong(U.toString()));break;default:throw R.getFormatInstance()}break;case ee.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(f!==-1){let m=o-f;l.isLastSegment()&&m--,l.setOptionalData(L.copyOfRange(r,f,f+m))}return o}static textCompaction(r,o,l){let c=new Int32Array((r[0]-o)*2),h=new Int32Array((r[0]-o)*2),f=0,m=!1;for(;o<r[0]&&!m;){let E=r[o++];if(E<ee.TEXT_COMPACTION_MODE_LATCH)c[f]=E/30,c[f+1]=E%30,f+=2;else switch(E){case ee.TEXT_COMPACTION_MODE_LATCH:c[f++]=ee.TEXT_COMPACTION_MODE_LATCH;break;case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:o--,m=!0;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,E=r[o++],h[f]=E,f++;break}}return ee.decodeTextCompaction(c,h,f,l),o}static decodeTextCompaction(r,o,l,c){let h=dt.ALPHA,f=dt.ALPHA,m=0;for(;m<l;){let E=r[m],x="";switch(h){case dt.ALPHA:if(E<26)x=String.fromCharCode(65+E);else switch(E){case 26:x=" ";break;case ee.LL:h=dt.LOWER;break;case ee.ML:h=dt.MIXED;break;case ee.PS:f=h,h=dt.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[m]);break;case ee.TEXT_COMPACTION_MODE_LATCH:h=dt.ALPHA;break}break;case dt.LOWER:if(E<26)x=String.fromCharCode(97+E);else switch(E){case 26:x=" ";break;case ee.AS:f=h,h=dt.ALPHA_SHIFT;break;case ee.ML:h=dt.MIXED;break;case ee.PS:f=h,h=dt.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[m]);break;case ee.TEXT_COMPACTION_MODE_LATCH:h=dt.ALPHA;break}break;case dt.MIXED:if(E<ee.PL)x=ee.MIXED_CHARS[E];else switch(E){case ee.PL:h=dt.PUNCT;break;case 26:x=" ";break;case ee.LL:h=dt.LOWER;break;case ee.AL:h=dt.ALPHA;break;case ee.PS:f=h,h=dt.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[m]);break;case ee.TEXT_COMPACTION_MODE_LATCH:h=dt.ALPHA;break}break;case dt.PUNCT:if(E<ee.PAL)x=ee.PUNCT_CHARS[E];else switch(E){case ee.PAL:h=dt.ALPHA;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[m]);break;case ee.TEXT_COMPACTION_MODE_LATCH:h=dt.ALPHA;break}break;case dt.ALPHA_SHIFT:if(h=f,E<26)x=String.fromCharCode(65+E);else switch(E){case 26:x=" ";break;case ee.TEXT_COMPACTION_MODE_LATCH:h=dt.ALPHA;break}break;case dt.PUNCT_SHIFT:if(h=f,E<ee.PAL)x=ee.PUNCT_CHARS[E];else switch(E){case ee.PAL:h=dt.ALPHA;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[m]);break;case ee.TEXT_COMPACTION_MODE_LATCH:h=dt.ALPHA;break}break}x!==""&&c.append(x),m++}}static byteCompaction(r,o,l,c,h){let f=new A0,m=0,E=0,x=!1;switch(r){case ee.BYTE_COMPACTION_MODE_LATCH:let A=new Int32Array(6),v=o[c++];for(;c<o[0]&&!x;)switch(A[m++]=v,E=900*E+v,v=o[c++],v){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:c--,x=!0;break;default:if(m%5===0&&m>0){for(let N=0;N<6;++N)f.write(Number(gr(E)>>gr(8*(5-N))));E=0,m=0}break}c===o[0]&&v<ee.TEXT_COMPACTION_MODE_LATCH&&(A[m++]=v);for(let N=0;N<m;N++)f.write(A[N]);break;case ee.BYTE_COMPACTION_MODE_LATCH_6:for(;c<o[0]&&!x;){let N=o[c++];if(N<ee.TEXT_COMPACTION_MODE_LATCH)m++,E=900*E+N;else switch(N){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:c--,x=!0;break}if(m%5===0&&m>0){for(let U=0;U<6;++U)f.write(Number(gr(E)>>gr(8*(5-U))));E=0,m=0}}break}return h.append(G.decode(f.toByteArray(),l)),c}static numericCompaction(r,o,l){let c=0,h=!1,f=new Int32Array(ee.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!h;){let m=r[o++];if(o===r[0]&&(h=!0),m<ee.TEXT_COMPACTION_MODE_LATCH)f[c]=m,c++;else switch(m){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:o--,h=!0;break}(c%ee.MAX_NUMERIC_CODEWORDS===0||m===ee.NUMERIC_COMPACTION_MODE_LATCH||h)&&c>0&&(l.append(ee.decodeBase900toBase10(f,c)),c=0)}return o}static decodeBase900toBase10(r,o){let l=gr(0);for(let h=0;h<o;h++)l+=ee.EXP900[o-h-1]*gr(r[h]);let c=l.toString();if(c.charAt(0)!=="1")throw new R;return c.substring(1)}}ee.TEXT_COMPACTION_MODE_LATCH=900,ee.BYTE_COMPACTION_MODE_LATCH=901,ee.NUMERIC_COMPACTION_MODE_LATCH=902,ee.BYTE_COMPACTION_MODE_LATCH_6=924,ee.ECI_USER_DEFINED=925,ee.ECI_GENERAL_PURPOSE=926,ee.ECI_CHARSET=927,ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ee.MACRO_PDF417_TERMINATOR=922,ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ee.MAX_NUMERIC_CODEWORDS=15,ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ee.PL=25,ee.LL=27,ee.AS=27,ee.ML=28,ee.AL=28,ee.PS=29,ee.PAL=29,ee.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ee.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ee.EXP900=Ys()?Bc():[],ee.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Fe{constructor(){}static decode(r,o,l,c,h,f,m){let E=new os(r,o,l,c,h),x=null,A=null,v;for(let Y=!0;;Y=!1){if(o!=null&&(x=Fe.getRowIndicatorColumn(r,E,o,!0,f,m)),c!=null&&(A=Fe.getRowIndicatorColumn(r,E,c,!1,f,m)),v=Fe.merge(x,A),v==null)throw ie.getNotFoundInstance();let W=v.getBoundingBox();if(Y&&W!=null&&(W.getMinY()<E.getMinY()||W.getMaxY()>E.getMaxY()))E=W;else break}v.setBoundingBox(E);let N=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,x),v.setDetectionResultColumn(N,A);let U=x!=null;for(let Y=1;Y<=N;Y++){let W=U?Y:N-Y;if(v.getDetectionResultColumn(W)!==void 0)continue;let Z;W===0||W===N?Z=new dr(E,W===0):Z=new Hs(E),v.setDetectionResultColumn(W,Z);let ne=-1,fe=ne;for(let ge=E.getMinY();ge<=E.getMaxY();ge++){if(ne=Fe.getStartColumn(v,W,ge,U),ne<0||ne>E.getMaxX()){if(fe===-1)continue;ne=fe}let ue=Fe.detectCodeword(r,E.getMinX(),E.getMaxX(),U,ne,ge,f,m);ue!=null&&(Z.setCodeword(ge,ue),fe=ne,f=Math.min(f,ue.getWidth()),m=Math.max(m,ue.getWidth()))}}return Fe.createDecoderResult(v)}static merge(r,o){if(r==null&&o==null)return null;let l=Fe.getBarcodeMetadata(r,o);if(l==null)return null;let c=os.merge(Fe.adjustBoundingBox(r),Fe.adjustBoundingBox(o));return new Gs(l,c)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let l=Fe.getMax(o),c=0;for(let m of o)if(c+=l-m,m>0)break;let h=r.getCodewords();for(let m=0;c>0&&h[m]==null;m++)c--;let f=0;for(let m=o.length-1;m>=0&&(f+=l-o[m],!(o[m]>0));m--);for(let m=h.length-1;f>0&&h[m]==null;m--)f--;return r.getBoundingBox().addMissingRows(c,f,r.isLeft())}static getMax(r){let o=-1;for(let l of r)o=Math.max(o,l);return o}static getBarcodeMetadata(r,o){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let c;return o==null||(c=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(r,o,l,c,h,f){let m=new dr(o,c);for(let E=0;E<2;E++){let x=E===0?1:-1,A=Math.trunc(Math.trunc(l.getX()));for(let v=Math.trunc(Math.trunc(l.getY()));v<=o.getMaxY()&&v>=o.getMinY();v+=x){let N=Fe.detectCodeword(r,0,r.getWidth(),c,A,v,h,f);N!=null&&(m.setCodeword(v,N),c?A=N.getStartX():A=N.getEndX())}}return m}static adjustCodewordCount(r,o){let l=o[0][1],c=l.getValue(),h=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Fe.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(h<1||h>Ie.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();l.setValue(h)}else c[0]!==h&&l.setValue(h)}static createDecoderResult(r){let o=Fe.createBarcodeMatrix(r);Fe.adjustCodewordCount(r,o);let l=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),h=[],f=new Array;for(let E=0;E<r.getBarcodeRowCount();E++)for(let x=0;x<r.getBarcodeColumnCount();x++){let A=o[E][x+1].getValue(),v=E*r.getBarcodeColumnCount()+x;A.length===0?l.push(v):A.length===1?c[v]=A[0]:(f.push(v),h.push(A))}let m=new Array(h.length);for(let E=0;E<m.length;E++)m[E]=h[E];return Fe.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,Ie.toIntArray(l),Ie.toIntArray(f),m)}static createDecoderResultFromAmbiguousValues(r,o,l,c,h){let f=new Int32Array(c.length),m=100;for(;m-- >0;){for(let E=0;E<f.length;E++)o[c[E]]=h[E][f[E]];try{return Fe.decodeCodewords(o,r,l)}catch(E){if(!(E instanceof I))throw E}if(f.length===0)throw I.getChecksumInstance();for(let E=0;E<f.length;E++)if(f[E]<h[E].length-1){f[E]++;break}else if(f[E]=0,E===f.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<o.length;c++)for(let h=0;h<o[c].length;h++)o[c][h]=new Or;let l=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let h of c.getCodewords())if(h!=null){let f=h.getRowNumber();if(f>=0){if(f>=o.length)continue;o[f][l].setValue(h.getValue())}}}l++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,l,c){let h=c?1:-1,f=null;if(Fe.isValidBarcodeColumn(r,o-h)&&(f=r.getDetectionResultColumn(o-h).getCodeword(l)),f!=null)return c?f.getEndX():f.getStartX();if(f=r.getDetectionResultColumn(o).getCodewordNearby(l),f!=null)return c?f.getStartX():f.getEndX();if(Fe.isValidBarcodeColumn(r,o-h)&&(f=r.getDetectionResultColumn(o-h).getCodewordNearby(l)),f!=null)return c?f.getEndX():f.getStartX();let m=0;for(;Fe.isValidBarcodeColumn(r,o-h);){o-=h;for(let E of r.getDetectionResultColumn(o).getCodewords())if(E!=null)return(c?E.getEndX():E.getStartX())+h*m*(E.getEndX()-E.getStartX());m++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,l,c,h,f,m,E){h=Fe.adjustCodewordStartColumn(r,o,l,c,h,f);let x=Fe.getModuleBitCount(r,o,l,c,h,f);if(x==null)return null;let A,v=ve.sum(x);if(c)A=h+v;else{for(let Y=0;Y<x.length/2;Y++){let W=x[Y];x[Y]=x[x.length-1-Y],x[x.length-1-Y]=W}A=h,h=A-v}if(!Fe.checkCodewordSkew(v,m,E))return null;let N=un.getDecodedValue(x),U=Ie.getCodeword(N);return U===-1?null:new to(h,A,Fe.getCodewordBucketNumber(N),U)}static getModuleBitCount(r,o,l,c,h,f){let m=h,E=new Int32Array(8),x=0,A=c?1:-1,v=c;for(;(c?m<l:m>=o)&&x<E.length;)r.get(m,f)===v?(E[x]++,m+=A):(x++,v=!v);return x===E.length||m===(c?l:o)&&x===E.length-1?E:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,l,c,h,f){let m=h,E=c?-1:1;for(let x=0;x<2;x++){for(;(c?m>=o:m<l)&&c===r.get(m,f);){if(Math.abs(h-m)>Fe.CODEWORD_SKEW_SIZE)return h;m+=E}E=-E,c=!c}return m}static checkCodewordSkew(r,o,l){return o-Fe.CODEWORD_SKEW_SIZE<=r&&r<=l+Fe.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,l){if(r.length===0)throw R.getFormatInstance();let c=1<<o+1,h=Fe.correctErrors(r,l,c);Fe.verifyCodewordCount(r,c);let f=ee.decode(r,""+o);return f.setErrorsCorrected(h),f.setErasures(l.length),f}static correctErrors(r,o,l){if(o!=null&&o.length>l/2+Fe.MAX_ERRORS||l<0||l>Fe.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return Fe.errorCorrection.decode(r,l,o)}static verifyCodewordCount(r,o){if(r.length<4)throw R.getFormatInstance();let l=r[0];if(l>r.length)throw R.getFormatInstance();if(l===0)if(o<r.length)r[0]=r.length-o;else throw R.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),l=0,c=o.length-1;for(;!((r&1)!==l&&(l=r&1,c--,c<0));)o[c]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Fe.getCodewordBucketNumber(Fe.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new zs;for(let l=0;l<r.length;l++){o.format("Row %2d: ",l);for(let c=0;c<r[l].length;c++){let h=r[l][c];h.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}o.format("%n")}return o.toString()}}Fe.CODEWORD_SKEW_SIZE=2,Fe.MAX_ERRORS=3,Fe.MAX_EC_CODEWORDS=512,Fe.errorCorrection=new bh;class Qt{decode(r,o=null){let l=Qt.decode(r,o,!1);if(l==null||l.length===0||l[0]==null)throw ie.getNotFoundInstance();return l[0]}decodeMultiple(r,o=null){try{return Qt.decode(r,o,!0)}catch(l){throw l instanceof R||l instanceof I?ie.getNotFoundInstance():l}}static decode(r,o,l){const c=new Array,h=Le.detectMultiple(r,o,l);for(const f of h.getPoints()){const m=Fe.decode(h.getBits(),f[4],f[5],f[6],f[7],Qt.getMinCodewordWidth(f),Qt.getMaxCodewordWidth(f)),E=new ct(m.getText(),m.getRawBytes(),void 0,f,Ce.PDF_417);E.putMetadata(Ht.ERROR_CORRECTION_LEVEL,m.getECLevel());const x=m.getOther();x!=null&&E.putMetadata(Ht.PDF417_EXTRA_METADATA,x),c.push(E)}return c.map(f=>f)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?k.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Qt.getMaxWidth(r[0],r[4]),Qt.getMaxWidth(r[6],r[2])*Ie.MODULES_IN_CODEWORD/Ie.MODULES_IN_STOP_PATTERN),Math.max(Qt.getMaxWidth(r[1],r[5]),Qt.getMaxWidth(r[7],r[3])*Ie.MODULES_IN_CODEWORD/Ie.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Qt.getMinWidth(r[0],r[4]),Qt.getMinWidth(r[6],r[2])*Ie.MODULES_IN_CODEWORD/Ie.MODULES_IN_STOP_PATTERN),Math.min(Qt.getMinWidth(r[1],r[5]),Qt.getMinWidth(r[7],r[3])*Ie.MODULES_IN_CODEWORD/Ie.MODULES_IN_STOP_PATTERN)))}reset(){}}class ro extends y{}ro.kind="ReaderException";class Vc{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!i(r)&&r.get(re.TRY_HARDER)===!0,l=i(r)?null:r.get(re.POSSIBLE_FORMATS),c=new Array;if(!i(l)){const h=l.some(f=>f===Ce.UPC_A||f===Ce.UPC_E||f===Ce.EAN_13||f===Ce.EAN_8||f===Ce.CODABAR||f===Ce.CODE_39||f===Ce.CODE_93||f===Ce.CODE_128||f===Ce.ITF||f===Ce.RSS_14||f===Ce.RSS_EXPANDED);h&&!o&&c.push(new Mr(r,this.verbose)),l.includes(Ce.QR_CODE)&&c.push(new vi),l.includes(Ce.DATA_MATRIX)&&c.push(new bi),l.includes(Ce.AZTEC)&&c.push(new is),l.includes(Ce.PDF_417)&&c.push(new Qt),h&&o&&c.push(new Mr(r,this.verbose))}c.length===0&&(o||c.push(new Mr(r,this.verbose)),c.push(new vi),c.push(new bi),c.push(new is),c.push(new Qt),o&&c.push(new Mr(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new ro("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(l){if(l instanceof ro)continue}throw new ie("No MultiFormat Readers were able to detect the code.")}}class ls extends Gn{constructor(r=null,o=500){const l=new Vc;l.setHints(r),super(l,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Nh extends Gn{constructor(r=500){super(new Qt,r)}}class Rh extends Gn{constructor(r=500){super(new vi,r)}}var $o;(function(b){b[b.ERROR_CORRECTION=0]="ERROR_CORRECTION",b[b.CHARACTER_SET=1]="CHARACTER_SET",b[b.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",b[b.MIN_SIZE=3]="MIN_SIZE",b[b.MAX_SIZE=4]="MAX_SIZE",b[b.MARGIN=5]="MARGIN",b[b.PDF417_COMPACT=6]="PDF417_COMPACT",b[b.PDF417_COMPACTION=7]="PDF417_COMPACTION",b[b.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",b[b.AZTEC_LAYERS=9]="AZTEC_LAYERS",b[b.QR_VERSION=10]="QR_VERSION"})($o||($o={}));var Kt=$o;class qs{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Cn(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let l=o[o.length-1];const c=this.field;for(let h=o.length;h<=r;h++){const f=l.multiply(new Cn(c,Int32Array.from([1,c.exp(h-1+c.getGeneratorBase())])));o.push(f),l=f}}return o[r]}encode(r,o){if(o===0)throw new T("No error correction bytes");const l=r.length-o;if(l<=0)throw new T("No data bytes provided");const c=this.buildGenerator(o),h=new Int32Array(l);X.arraycopy(r,0,h,0,l);let f=new Cn(this.field,h);f=f.multiplyByMonomial(o,1);const E=f.divide(c)[1].getCoefficients(),x=o-E.length;for(let A=0;A<x;A++)r[l+A]=0;X.arraycopy(E,0,r,l+x,E.length)}}class Ke{constructor(){}static applyMaskPenaltyRule1(r){return Ke.applyMaskPenaltyRule1Internal(r,!0)+Ke.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const l=r.getArray(),c=r.getWidth(),h=r.getHeight();for(let f=0;f<h-1;f++){const m=l[f];for(let E=0;E<c-1;E++){const x=m[E];x===m[E+1]&&x===l[f+1][E]&&x===l[f+1][E+1]&&o++}}return Ke.N2*o}static applyMaskPenaltyRule3(r){let o=0;const l=r.getArray(),c=r.getWidth(),h=r.getHeight();for(let f=0;f<h;f++)for(let m=0;m<c;m++){const E=l[f];m+6<c&&E[m]===1&&E[m+1]===0&&E[m+2]===1&&E[m+3]===1&&E[m+4]===1&&E[m+5]===0&&E[m+6]===1&&(Ke.isWhiteHorizontal(E,m-4,m)||Ke.isWhiteHorizontal(E,m+7,m+11))&&o++,f+6<h&&l[f][m]===1&&l[f+1][m]===0&&l[f+2][m]===1&&l[f+3][m]===1&&l[f+4][m]===1&&l[f+5][m]===0&&l[f+6][m]===1&&(Ke.isWhiteVertical(l,m,f-4,f)||Ke.isWhiteVertical(l,m,f+7,f+11))&&o++}return o*Ke.N3}static isWhiteHorizontal(r,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let c=o;c<l;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,o,l,c){l=Math.max(l,0),c=Math.min(c,r.length);for(let h=l;h<c;h++)if(r[h][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const l=r.getArray(),c=r.getWidth(),h=r.getHeight();for(let E=0;E<h;E++){const x=l[E];for(let A=0;A<c;A++)x[A]===1&&o++}const f=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-f)*10/f)*Ke.N4}static getDataMaskBit(r,o,l){let c,h;switch(r){case 0:c=l+o&1;break;case 1:c=l&1;break;case 2:c=o%3;break;case 3:c=(l+o)%3;break;case 4:c=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:h=l*o,c=(h&1)+h%3;break;case 6:h=l*o,c=(h&1)+h%3&1;break;case 7:h=l*o,c=h%3+(l+o&1)&1;break;default:throw new T("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,o){let l=0;const c=o?r.getHeight():r.getWidth(),h=o?r.getWidth():r.getHeight(),f=r.getArray();for(let m=0;m<c;m++){let E=0,x=-1;for(let A=0;A<h;A++){const v=o?f[m][A]:f[A][m];v===x?E++:(E>=5&&(l+=Ke.N1+(E-5)),E=1,x=v)}E>=5&&(l+=Ke.N1+(E-5))}return l}}Ke.N1=3,Ke.N2=3,Ke.N3=40,Ke.N4=10;class so{constructor(r,o){this.width=r,this.height=o;const l=new Array(o);for(let c=0;c!==o;c++)l[c]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,l){this.bytes[o][r]=l}setBoolean(r,o,l){this.bytes[o][r]=l?1:0}clear(r){for(const o of this.bytes)L.fill(o,r)}equals(r){if(!(r instanceof so))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,c=this.height;l<c;++l){const h=this.bytes[l],f=o.bytes[l];for(let m=0,E=this.width;m<E;++m)if(h[m]!==f[m])return!1}return!0}toString(){const r=new F;for(let o=0,l=this.height;o<l;++o){const c=this.bytes[o];for(let h=0,f=this.width;h<f;++h)switch(c[h]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Lr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new F;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Lr.NUM_MASK_PATTERNS}}Lr.NUM_MASK_PATTERNS=8;class ot extends y{}ot.kind="WriterException";class g{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,l,c,h){g.clearMatrix(h),g.embedBasicPatterns(l,h),g.embedTypeInfo(o,c,h),g.maybeEmbedVersionInfo(l,h),g.embedDataBits(r,c,h)}static embedBasicPatterns(r,o){g.embedPositionDetectionPatternsAndSeparators(o),g.embedDarkDotAtLeftBottomCorner(o),g.maybeEmbedPositionAdjustmentPatterns(r,o),g.embedTimingPatterns(o)}static embedTypeInfo(r,o,l){const c=new H;g.makeTypeInfoBits(r,o,c);for(let h=0,f=c.getSize();h<f;++h){const m=c.get(c.getSize()-1-h),E=g.TYPE_INFO_COORDINATES[h],x=E[0],A=E[1];if(l.setBoolean(x,A,m),h<8){const v=l.getWidth()-h-1;l.setBoolean(v,8,m)}else{const N=l.getHeight()-7+(h-8);l.setBoolean(8,N,m)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const l=new H;g.makeVersionInfoBits(r,l);let c=6*3-1;for(let h=0;h<6;++h)for(let f=0;f<3;++f){const m=l.get(c);c--,o.setBoolean(h,o.getHeight()-11+f,m),o.setBoolean(o.getHeight()-11+f,h,m)}}static embedDataBits(r,o,l){let c=0,h=-1,f=l.getWidth()-1,m=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);m>=0&&m<l.getHeight();){for(let E=0;E<2;++E){const x=f-E;if(!g.isEmpty(l.get(x,m)))continue;let A;c<r.getSize()?(A=r.get(c),++c):A=!1,o!==255&&Ke.getDataMaskBit(o,x,m)&&(A=!A),l.setBoolean(x,m,A)}m+=h}h=-h,m+=h,f-=2}if(c!==r.getSize())throw new ot("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-k.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new T("0 polynomial");const l=g.findMSBSet(o);for(r<<=l-1;g.findMSBSet(r)>=l;)r^=o<<g.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,o,l){if(!Lr.isValidMaskPattern(o))throw new ot("Invalid mask pattern");const c=r.getBits()<<3|o;l.appendBits(c,5);const h=g.calculateBCHCode(c,g.TYPE_INFO_POLY);l.appendBits(h,10);const f=new H;if(f.appendBits(g.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new ot("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const l=g.calculateBCHCode(r.getVersionNumber(),g.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new ot("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const l=(o+1)%2;g.isEmpty(r.get(o,6))&&r.setNumber(o,6,l),g.isEmpty(r.get(6,o))&&r.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new ot;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,l){for(let c=0;c<8;++c){if(!g.isEmpty(l.get(r+c,o)))throw new ot;l.setNumber(r+c,o,0)}}static embedVerticalSeparationPattern(r,o,l){for(let c=0;c<7;++c){if(!g.isEmpty(l.get(r,o+c)))throw new ot;l.setNumber(r,o+c,0)}}static embedPositionAdjustmentPattern(r,o,l){for(let c=0;c<5;++c){const h=g.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)l.setNumber(r+f,o+c,h[f])}}static embedPositionDetectionPattern(r,o,l){for(let c=0;c<7;++c){const h=g.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)l.setNumber(r+f,o+c,h[f])}}static embedPositionDetectionPatternsAndSeparators(r){const o=g.POSITION_DETECTION_PATTERN[0].length;g.embedPositionDetectionPattern(0,0,r),g.embedPositionDetectionPattern(r.getWidth()-o,0,r),g.embedPositionDetectionPattern(0,r.getWidth()-o,r);const l=8;g.embedHorizontalSeparationPattern(0,l-1,r),g.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),g.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const c=7;g.embedVerticalSeparationPattern(c,0,r),g.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),g.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,c=g.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let h=0,f=c.length;h!==f;h++){const m=c[h];if(m>=0)for(let E=0;E!==f;E++){const x=c[E];x>=0&&g.isEmpty(o.get(x,m))&&g.embedPositionAdjustmentPattern(x-2,m-2,o)}}}}g.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),g.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),g.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),g.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),g.VERSION_INFO_POLY=7973,g.TYPE_INFO_POLY=1335,g.TYPE_INFO_MASK_PATTERN=21522;class _{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class C{constructor(){}static calculateMaskPenalty(r){return Ke.applyMaskPenaltyRule1(r)+Ke.applyMaskPenaltyRule2(r)+Ke.applyMaskPenaltyRule3(r)+Ke.applyMaskPenaltyRule4(r)}static encode(r,o,l=null){let c=C.DEFAULT_BYTE_MODE_ENCODING;const h=l!==null&&l.get(Kt.CHARACTER_SET)!==void 0;h&&(c=l.get(Kt.CHARACTER_SET).toString());const f=this.chooseMode(r,c),m=new H;if(f===Se.BYTE&&(h||C.DEFAULT_BYTE_MODE_ENCODING!==c)){const ge=M.getCharacterSetECIByName(c);ge!==void 0&&this.appendECI(ge,m)}this.appendModeInfo(f,m);const E=new H;this.appendBytes(r,f,E,c);let x;if(l!==null&&l.get(Kt.QR_VERSION)!==void 0){const ge=Number.parseInt(l.get(Kt.QR_VERSION).toString(),10);x=Te.getVersionForNumber(ge);const ue=this.calculateBitsNeeded(f,m,E,x);if(!this.willFit(ue,x,o))throw new ot("Data too big for requested version")}else x=this.recommendVersion(o,f,m,E);const A=new H;A.appendBitArray(m);const v=f===Se.BYTE?E.getSizeInBytes():r.length;this.appendLengthInfo(v,x,f,A),A.appendBitArray(E);const N=x.getECBlocksForLevel(o),U=x.getTotalCodewords()-N.getTotalECCodewords();this.terminateBits(U,A);const Y=this.interleaveWithECBytes(A,x.getTotalCodewords(),U,N.getNumBlocks()),W=new Lr;W.setECLevel(o),W.setMode(f),W.setVersion(x);const Z=x.getDimensionForVersion(),ne=new so(Z,Z),fe=this.chooseMaskPattern(Y,o,x,ne);return W.setMaskPattern(fe),g.buildMatrix(Y,o,x,fe,ne),W.setMatrix(ne),W}static recommendVersion(r,o,l,c){const h=this.calculateBitsNeeded(o,l,c,Te.getVersionForNumber(1)),f=this.chooseVersion(h,r),m=this.calculateBitsNeeded(o,l,c,f);return this.chooseVersion(m,r)}static calculateBitsNeeded(r,o,l,c){return o.getSize()+r.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(r){return r<C.ALPHANUMERIC_TABLE.length?C.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(M.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return Se.KANJI;let l=!1,c=!1;for(let h=0,f=r.length;h<f;++h){const m=r.charAt(h);if(C.isDigit(m))l=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return Se.BYTE}return c?Se.ALPHANUMERIC:l?Se.NUMERIC:Se.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=G.encode(r,M.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let c=0;c<l;c+=2){const h=o[c]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(r,o,l,c){let h=Number.MAX_SAFE_INTEGER,f=-1;for(let m=0;m<Lr.NUM_MASK_PATTERNS;m++){g.buildMatrix(r,o,l,m,c);let E=this.calculateMaskPenalty(c);E<h&&(h=E,f=m)}return f}static chooseVersion(r,o){for(let l=1;l<=40;l++){const c=Te.getVersionForNumber(l);if(C.willFit(r,c,o))return c}throw new ot("Data too big")}static willFit(r,o,l){const c=o.getTotalCodewords(),f=o.getECBlocksForLevel(l).getTotalECCodewords(),m=c-f,E=(r+7)/8;return m>=E}static terminateBits(r,o){const l=r*8;if(o.getSize()>l)throw new ot("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let f=0;f<4&&o.getSize()<l;++f)o.appendBit(!1);const c=o.getSize()&7;if(c>0)for(let f=c;f<8;f++)o.appendBit(!1);const h=r-o.getSizeInBytes();for(let f=0;f<h;++f)o.appendBits(f&1?17:236,8);if(o.getSize()!==l)throw new ot("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,l,c,h,f){if(c>=l)throw new ot("Block ID too large");const m=r%l,E=l-m,x=Math.floor(r/l),A=x+1,v=Math.floor(o/l),N=v+1,U=x-v,Y=A-N;if(U!==Y)throw new ot("EC bytes mismatch");if(l!==E+m)throw new ot("RS blocks mismatch");if(r!==(v+U)*E+(N+Y)*m)throw new ot("Total bytes mismatch");c<E?(h[0]=v,f[0]=U):(h[0]=N,f[0]=Y)}static interleaveWithECBytes(r,o,l,c){if(r.getSizeInBytes()!==l)throw new ot("Number of bits and data bytes does not match");let h=0,f=0,m=0;const E=new Array;for(let A=0;A<c;++A){const v=new Int32Array(1),N=new Int32Array(1);C.getNumDataBytesAndNumECBytesForBlockID(o,l,c,A,v,N);const U=v[0],Y=new Uint8Array(U);r.toBytes(8*h,Y,0,U);const W=C.generateECBytes(Y,N[0]);E.push(new _(Y,W)),f=Math.max(f,U),m=Math.max(m,W.length),h+=v[0]}if(l!==h)throw new ot("Data bytes does not match offset");const x=new H;for(let A=0;A<f;++A)for(const v of E){const N=v.getDataBytes();A<N.length&&x.appendBits(N[A],8)}for(let A=0;A<m;++A)for(const v of E){const N=v.getErrorCorrectionBytes();A<N.length&&x.appendBits(N[A],8)}if(o!==x.getSizeInBytes())throw new ot("Interleaving error: "+o+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(r,o){const l=r.length,c=new Int32Array(l+o);for(let f=0;f<l;f++)c[f]=r[f]&255;new qs(Xe.QR_CODE_FIELD_256).encode(c,o);const h=new Uint8Array(o);for(let f=0;f<o;f++)h[f]=c[l+f];return h}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,l,c){const h=l.getCharacterCountBits(o);if(r>=1<<h)throw new ot(r+" is bigger than "+((1<<h)-1));c.appendBits(r,h)}static appendBytes(r,o,l,c){switch(o){case Se.NUMERIC:C.appendNumericBytes(r,l);break;case Se.ALPHANUMERIC:C.appendAlphanumericBytes(r,l);break;case Se.BYTE:C.append8BitBytes(r,l,c);break;case Se.KANJI:C.appendKanjiBytes(r,l);break;default:throw new ot("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=C.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const l=r.length;let c=0;for(;c<l;){const h=C.getDigit(r.charAt(c));if(c+2<l){const f=C.getDigit(r.charAt(c+1)),m=C.getDigit(r.charAt(c+2));o.appendBits(h*100+f*10+m,10),c+=3}else if(c+1<l){const f=C.getDigit(r.charAt(c+1));o.appendBits(h*10+f,7),c+=2}else o.appendBits(h,4),c++}}static appendAlphanumericBytes(r,o){const l=r.length;let c=0;for(;c<l;){const h=C.getAlphanumericCode(r.charCodeAt(c));if(h===-1)throw new ot;if(c+1<l){const f=C.getAlphanumericCode(r.charCodeAt(c+1));if(f===-1)throw new ot;o.appendBits(h*45+f,11),c+=2}else o.appendBits(h,6),c++}}static append8BitBytes(r,o,l){let c;try{c=G.encode(r,l)}catch(h){throw new ot(h)}for(let h=0,f=c.length;h!==f;h++){const m=c[h];o.appendBits(m,8)}}static appendKanjiBytes(r,o){let l;try{l=G.encode(r,M.SJIS)}catch(h){throw new ot(h)}const c=l.length;for(let h=0;h<c;h+=2){const f=l[h]&255,m=l[h+1]&255,E=f<<8&4294967295|m;let x=-1;if(E>=33088&&E<=40956?x=E-33088:E>=57408&&E<=60351&&(x=E-49472),x===-1)throw new ot("Invalid byte sequence");const A=(x>>8)*192+(x&255);o.appendBits(A,13)}}static appendECI(r,o){o.appendBits(Se.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}C.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),C.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class P{write(r,o,l,c=null){if(r.length===0)throw new T("Found empty contents");if(o<0||l<0)throw new T("Requested dimensions are too small: "+o+"x"+l);let h=bt.L,f=P.QUIET_ZONE_SIZE;c!==null&&(c.get(Kt.ERROR_CORRECTION)!==void 0&&(h=bt.fromString(c.get(Kt.ERROR_CORRECTION).toString())),c.get(Kt.MARGIN)!==void 0&&(f=Number.parseInt(c.get(Kt.MARGIN).toString(),10)));const m=C.encode(r,h,c);return this.renderResult(m,o,l,f)}writeToDom(r,o,l,c,h=null){typeof r=="string"&&(r=document.querySelector(r));const f=this.write(o,l,c,h);r&&r.appendChild(f)}renderResult(r,o,l,c){const h=r.getMatrix();if(h===null)throw new ii;const f=h.getWidth(),m=h.getHeight(),E=f+c*2,x=m+c*2,A=Math.max(o,E),v=Math.max(l,x),N=Math.min(Math.floor(A/E),Math.floor(v/x)),U=Math.floor((A-f*N)/2),Y=Math.floor((v-m*N)/2),W=this.createSVGElement(A,v);for(let Z=0,ne=Y;Z<m;Z++,ne+=N)for(let fe=0,ge=U;fe<f;fe++,ge+=N)if(h.get(fe,Z)===1){const ue=this.createSvgRectElement(ge,ne,N,N);W.appendChild(ue)}return W}createSVGElement(r,o){const l=document.createElementNS(P.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(r,o,l,c){const h=document.createElementNS(P.SVG_NS,"rect");return h.setAttributeNS(null,"x",r.toString()),h.setAttributeNS(null,"y",o.toString()),h.setAttributeNS(null,"height",l.toString()),h.setAttributeNS(null,"width",c.toString()),h.setAttributeNS(null,"fill","#000000"),h}}P.QUIET_ZONE_SIZE=4,P.SVG_NS="http://www.w3.org/2000/svg";class K{encode(r,o,l,c,h){if(r.length===0)throw new T("Found empty contents");if(o!==Ce.QR_CODE)throw new T("Can only encode QR_CODE, but got "+o);if(l<0||c<0)throw new T(`Requested dimensions are too small: ${l}x${c}`);let f=bt.L,m=K.QUIET_ZONE_SIZE;h!==null&&(h.get(Kt.ERROR_CORRECTION)!==void 0&&(f=bt.fromString(h.get(Kt.ERROR_CORRECTION).toString())),h.get(Kt.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Kt.MARGIN).toString(),10)));const E=C.encode(r,f,h);return K.renderResult(E,l,c,m)}static renderResult(r,o,l,c){const h=r.getMatrix();if(h===null)throw new ii;const f=h.getWidth(),m=h.getHeight(),E=f+c*2,x=m+c*2,A=Math.max(o,E),v=Math.max(l,x),N=Math.min(Math.floor(A/E),Math.floor(v/x)),U=Math.floor((A-f*N)/2),Y=Math.floor((v-m*N)/2),W=new Ge(A,v);for(let Z=0,ne=Y;Z<m;Z++,ne+=N)for(let fe=0,ge=U;fe<f;fe++,ge+=N)h.get(fe,Z)===1&&W.setRegion(ge,ne,N,N);return W}}K.QUIET_ZONE_SIZE=4;class te{encode(r,o,l,c,h){let f;switch(o){case Ce.QR_CODE:f=new K;break;default:throw new T("No encoder available for format "+o)}return f.encode(r,o,l,c,h)}}class he extends Ne{constructor(r,o,l,c,h,f,m,E){if(super(f,m),this.yuvData=r,this.dataWidth=o,this.dataHeight=l,this.left=c,this.top=h,c+f>o||h+m>l)throw new T("Crop rectangle does not fit within image data.");E&&this.reverseHorizontal(f,m)}getRow(r,o){if(r<0||r>=this.getHeight())throw new T("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const c=(r+this.top)*this.dataWidth+this.left;return X.arraycopy(this.yuvData,c,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=r*o,c=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return X.arraycopy(this.yuvData,h,c,0,l),c;for(let f=0;f<o;f++){const m=f*r;X.arraycopy(this.yuvData,h,c,m,r),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,o,l,c){return new he(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,l,c,!1)}renderThumbnail(){const r=this.getWidth()/he.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/he.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*o),c=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let f=0;f<o;f++){const m=f*r;for(let E=0;E<r;E++){const x=c[h+E*he.THUMBNAIL_SCALE_FACTOR]&255;l[m+E]=4278190080|x*65793}h+=this.dataWidth*he.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/he.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/he.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const l=this.yuvData;for(let c=0,h=this.top*this.dataWidth+this.left;c<o;c++,h+=this.dataWidth){const f=h+r/2;for(let m=h,E=h+r-1;m<f;m++,E--){const x=l[m];l[m]=l[E],l[E]=x}}}invert(){return new Ye(this)}}he.THUMBNAIL_SCALE_FACTOR=2;class Be extends Ne{constructor(r,o,l,c,h,f,m){if(super(o,l),this.dataWidth=c,this.dataHeight=h,this.left=f,this.top=m,r.BYTES_PER_ELEMENT===4){const E=o*l,x=new Uint8ClampedArray(E);for(let A=0;A<E;A++){const v=r[A],N=v>>16&255,U=v>>7&510,Y=v&255;x[A]=(N+U+Y)/4&255}this.luminances=x}else this.luminances=r;if(c===void 0&&(this.dataWidth=o),h===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new T("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const c=(r+this.top)*this.dataWidth+this.left;return X.arraycopy(this.luminances,c,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=r*o,c=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return X.arraycopy(this.luminances,h,c,0,l),c;for(let f=0;f<o;f++){const m=f*r;X.arraycopy(this.luminances,h,c,m,r),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,o,l,c){return new Be(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new Ye(this)}}class Zt extends M{static forName(r){return this.getCharacterSetECIByName(r)}}class gt{}gt.ISO_8859_1=M.ISO8859_1;class nn{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class Ii{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class cs{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Zn extends cs{constructor(r,o,l){super(r),this.value=o,this.bitCount=l}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new Zn(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Zn(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+k.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Zi extends Zn{constructor(r,o,l){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(r,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(r,o){return new Zi(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function el(b,r,o){return new Zi(b,r,o)}function us(b,r,o){return new Zn(b,r,o)}const eb=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xs=0,Mh=1,Ji=2,d2=3,Pr=4,tb=new Zn(null,0,0),T0=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function nb(b){for(let r of b)L.fill(r,-1);return b[Xs][Pr]=0,b[Mh][Pr]=0,b[Mh][Xs]=28,b[d2][Pr]=0,b[Ji][Pr]=0,b[Ji][Xs]=15,b}const g2=nb(L.createInt32Array(6,6));class kr{constructor(r,o,l,c){this.token=r,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let l=this.bitCount,c=this.token;if(r!==this.mode){let f=T0[this.mode][r];c=us(c,f&65535,f>>16),l+=f>>16}let h=r===Ji?4:5;return c=us(c,o,h),new kr(c,r,0,l+h)}shiftAndAppend(r,o){let l=this.token,c=this.mode===Ji?4:5;return l=us(l,g2[this.mode][r],c),l=us(l,o,5),new kr(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let o=this.token,l=this.mode,c=this.bitCount;if(this.mode===Pr||this.mode===Ji){let m=T0[l][Xs];o=us(o,m&65535,m>>16),c+=m>>16,l=Xs}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new kr(o,l,this.binaryShiftByteCount+1,c+h);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(r+1)),f}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=el(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new kr(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(T0[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=kr.calculateBinaryShiftCost(r)-kr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())o.unshift(c);let l=new H;for(const c of o)c.appendTo(l,r);return l}toString(){return j.format("%s bits=%d bytes=%d",eb[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}kr.INITIAL_STATE=new kr(tb,Xs,0,0);function ib(b){const r=j.getCharCode(" "),o=j.getCharCode("."),l=j.getCharCode(",");b[Xs][r]=1;const c=j.getCharCode("Z"),h=j.getCharCode("A");for(let N=h;N<=c;N++)b[Xs][N]=N-h+2;b[Mh][r]=1;const f=j.getCharCode("z"),m=j.getCharCode("a");for(let N=m;N<=f;N++)b[Mh][N]=N-m+2;b[Ji][r]=1;const E=j.getCharCode("9"),x=j.getCharCode("0");for(let N=x;N<=E;N++)b[Ji][N]=N-x+2;b[Ji][l]=12,b[Ji][o]=13;const A=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let N=0;N<A.length;N++)b[d2][j.getCharCode(A[N])]=N;const v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let N=0;N<v.length;N++)j.getCharCode(v[N])>0&&(b[Pr][j.getCharCode(v[N])]=N);return b}const C0=ib(L.createInt32Array(5,256));class Uc{constructor(r){this.text=r}encode(){const r=j.getCharCode(" "),o=j.getCharCode(`
`);let l=Ii.singletonList(kr.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let f,m=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case j.getCharCode("\r"):f=m===o?2:0;break;case j.getCharCode("."):f=m===r?3:0;break;case j.getCharCode(","):f=m===r?4:0;break;case j.getCharCode(":"):f=m===r?5:0;break;default:f=0}f>0?(l=Uc.updateStateListForPair(l,h,f),h++):l=this.updateStateListForChar(l,h)}return Ii.min(l,(h,f)=>h.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const l=[];for(let c of r)this.updateStateForChar(c,o,l);return Uc.simplifyStates(l)}updateStateForChar(r,o,l){let c=this.text[o]&255,h=C0[r.getMode()][c]>0,f=null;for(let m=0;m<=Pr;m++){let E=C0[m][c];if(E>0){if(f==null&&(f=r.endBinaryShift(o)),!h||m===r.getMode()||m===Ji){const x=f.latchAndAppend(m,E);l.push(x)}if(!h&&g2[r.getMode()][m]>=0){const x=f.shiftAndAppend(m,E);l.push(x)}}}if(r.getBinaryShiftByteCount()>0||C0[r.getMode()][c]===0){let m=r.addBinaryShiftChar(o);l.push(m)}}static updateStateListForPair(r,o,l){const c=[];for(let h of r)this.updateStateForPair(h,o,l,c);return this.simplifyStates(c)}static updateStateForPair(r,o,l,c){let h=r.endBinaryShift(o);if(c.push(h.latchAndAppend(Pr,l)),r.getMode()!==Pr&&c.push(h.shiftAndAppend(Pr,l)),l===3||l===4){let f=h.latchAndAppend(Ji,16-l).latchAndAppend(Ji,1);c.push(f)}if(r.getBinaryShiftByteCount()>0){let f=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);c.push(f)}}static simplifyStates(r){let o=[];for(const l of r){let c=!0;for(const h of o){if(h.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(h)&&(o=o.filter(f=>f!==h))}c&&o.push(l)}return o}}class ht{constructor(){}static encodeBytes(r){return ht.encode(r,ht.DEFAULT_EC_PERCENT,ht.DEFAULT_AZTEC_LAYERS)}static encode(r,o,l){let c=new Uc(r).encode(),h=k.truncDivision(c.getSize()*o,100)+11,f=c.getSize()+h,m,E,x,A,v;if(l!==ht.DEFAULT_AZTEC_LAYERS){if(m=l<0,E=Math.abs(l),E>(m?ht.MAX_NB_BITS_COMPACT:ht.MAX_NB_BITS))throw new T(j.format("Illegal value %s for layers",l));x=ht.totalBitsInLayer(E,m),A=ht.WORD_SIZE[E];let ue=x-x%A;if(v=ht.stuffBits(c,A),v.getSize()+h>ue)throw new T("Data to large for user specified layer");if(m&&v.getSize()>A*64)throw new T("Data to large for user specified layer")}else{A=0,v=null;for(let ue=0;;ue++){if(ue>ht.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(m=ue<=3,E=m?ue+1:ue,x=ht.totalBitsInLayer(E,m),f>x)continue;(v==null||A!==ht.WORD_SIZE[E])&&(A=ht.WORD_SIZE[E],v=ht.stuffBits(c,A));let Ze=x-x%A;if(!(m&&v.getSize()>A*64)&&v.getSize()+h<=Ze)break}}let N=ht.generateCheckWords(v,x,A),U=v.getSize()/A,Y=ht.generateModeMessage(m,E,U),W=(m?11:14)+E*4,Z=new Int32Array(W),ne;if(m){ne=W;for(let ue=0;ue<Z.length;ue++)Z[ue]=ue}else{ne=W+1+2*k.truncDivision(k.truncDivision(W,2)-1,15);let ue=k.truncDivision(W,2),Ze=k.truncDivision(ne,2);for(let je=0;je<ue;je++){let ci=je+k.truncDivision(je,15);Z[ue-je-1]=Ze-ci-1,Z[ue+je]=Ze+ci+1}}let fe=new Ge(ne);for(let ue=0,Ze=0;ue<E;ue++){let je=(E-ue)*4+(m?9:12);for(let ci=0;ci<je;ci++){let mr=ci*2;for(let ui=0;ui<2;ui++)N.get(Ze+mr+ui)&&fe.set(Z[ue*2+ui],Z[ue*2+ci]),N.get(Ze+je*2+mr+ui)&&fe.set(Z[ue*2+ci],Z[W-1-ue*2-ui]),N.get(Ze+je*4+mr+ui)&&fe.set(Z[W-1-ue*2-ui],Z[W-1-ue*2-ci]),N.get(Ze+je*6+mr+ui)&&fe.set(Z[W-1-ue*2-ci],Z[ue*2+ui])}Ze+=je*8}if(ht.drawModeMessage(fe,m,ne,Y),m)ht.drawBullsEye(fe,k.truncDivision(ne,2),5);else{ht.drawBullsEye(fe,k.truncDivision(ne,2),7);for(let ue=0,Ze=0;ue<k.truncDivision(W,2)-1;ue+=15,Ze+=16)for(let je=k.truncDivision(ne,2)&1;je<ne;je+=2)fe.set(k.truncDivision(ne,2)-Ze,je),fe.set(k.truncDivision(ne,2)+Ze,je),fe.set(je,k.truncDivision(ne,2)-Ze),fe.set(je,k.truncDivision(ne,2)+Ze)}let ge=new nn;return ge.setCompact(m),ge.setSize(ne),ge.setLayers(E),ge.setCodeWords(U),ge.setMatrix(fe),ge}static drawBullsEye(r,o,l){for(let c=0;c<l;c+=2)for(let h=o-c;h<=o+c;h++)r.set(h,o-c),r.set(h,o+c),r.set(o-c,h),r.set(o+c,h);r.set(o-l,o-l),r.set(o-l+1,o-l),r.set(o-l,o-l+1),r.set(o+l,o-l),r.set(o+l,o-l+1),r.set(o+l,o+l-1)}static generateModeMessage(r,o,l){let c=new H;return r?(c.appendBits(o-1,2),c.appendBits(l-1,6),c=ht.generateCheckWords(c,28,4)):(c.appendBits(o-1,5),c.appendBits(l-1,11),c=ht.generateCheckWords(c,40,4)),c}static drawModeMessage(r,o,l,c){let h=k.truncDivision(l,2);if(o)for(let f=0;f<7;f++){let m=h-3+f;c.get(f)&&r.set(m,h-5),c.get(f+7)&&r.set(h+5,m),c.get(20-f)&&r.set(m,h+5),c.get(27-f)&&r.set(h-5,m)}else for(let f=0;f<10;f++){let m=h-5+f+k.truncDivision(f,5);c.get(f)&&r.set(m,h-7),c.get(f+10)&&r.set(h+7,m),c.get(29-f)&&r.set(m,h+7),c.get(39-f)&&r.set(h-7,m)}}static generateCheckWords(r,o,l){let c=r.getSize()/l,h=new qs(ht.getGF(l)),f=k.truncDivision(o,l),m=ht.bitsToWords(r,l,f);h.encode(m,f-c);let E=o%l,x=new H;x.appendBits(0,E);for(const A of Array.from(m))x.appendBits(A,l);return x}static bitsToWords(r,o,l){let c=new Int32Array(l),h,f;for(h=0,f=r.getSize()/o;h<f;h++){let m=0;for(let E=0;E<o;E++)m|=r.get(h*o+E)?1<<o-E-1:0;c[h]=m}return c}static getGF(r){switch(r){case 4:return Xe.AZTEC_PARAM;case 6:return Xe.AZTEC_DATA_6;case 8:return Xe.AZTEC_DATA_8;case 10:return Xe.AZTEC_DATA_10;case 12:return Xe.AZTEC_DATA_12;default:throw new T("Unsupported word size "+r)}}static stuffBits(r,o){let l=new H,c=r.getSize(),h=(1<<o)-2;for(let f=0;f<c;f+=o){let m=0;for(let E=0;E<o;E++)(f+E>=c||r.get(f+E))&&(m|=1<<o-1-E);(m&h)===h?(l.appendBits(m&h,o),f--):m&h?l.appendBits(m,o):(l.appendBits(m|1,o),f--)}return l}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}ht.DEFAULT_EC_PERCENT=33,ht.DEFAULT_AZTEC_LAYERS=0,ht.MAX_NB_BITS=32,ht.MAX_NB_BITS_COMPACT=4,ht.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Dh{encode(r,o,l,c){return this.encodeWithHints(r,o,l,c,null)}encodeWithHints(r,o,l,c,h){let f=gt.ISO_8859_1,m=ht.DEFAULT_EC_PERCENT,E=ht.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(Kt.CHARACTER_SET)&&(f=Zt.forName(h.get(Kt.CHARACTER_SET).toString())),h.has(Kt.ERROR_CORRECTION)&&(m=k.parseInt(h.get(Kt.ERROR_CORRECTION).toString())),h.has(Kt.AZTEC_LAYERS)&&(E=k.parseInt(h.get(Kt.AZTEC_LAYERS).toString()))),Dh.encodeLayers(r,o,l,c,f,m,E)}static encodeLayers(r,o,l,c,h,f,m){if(o!==Ce.AZTEC)throw new T("Can only encode AZTEC, but got "+o);let E=ht.encode(j.getBytes(r,h),f,m);return Dh.renderResult(E,l,c)}static renderResult(r,o,l){let c=r.getMatrix();if(c==null)throw new ii;let h=c.getWidth(),f=c.getHeight(),m=Math.max(o,h),E=Math.max(l,f),x=Math.min(m/h,E/f),A=(m-h*x)/2,v=(E-f*x)/2,N=new Ge(m,E);for(let U=0,Y=v;U<f;U++,Y+=x)for(let W=0,Z=A;W<h;W++,Z+=x)c.get(W,U)&&N.setRegion(Z,Y,x,x);return N}}n.AbstractExpandedDecoder=qo,n.ArgumentException=w,n.ArithmeticException=_i,n.AztecCode=nn,n.AztecCodeReader=is,n.AztecCodeWriter=Dh,n.AztecDecoder=ft,n.AztecDetector=Za,n.AztecDetectorResult=Us,n.AztecEncoder=ht,n.AztecHighLevelEncoder=Uc,n.AztecPoint=tn,n.BarcodeFormat=Ce,n.Binarizer=q,n.BinaryBitmap=S,n.BitArray=H,n.BitMatrix=Ge,n.BitSource=oi,n.BrowserAztecCodeReader=zo,n.BrowserBarcodeReader=Nc,n.BrowserCodeReader=Gn,n.BrowserDatamatrixCodeReader=$a,n.BrowserMultiFormatReader=ls,n.BrowserPDF417Reader=Nh,n.BrowserQRCodeReader=Rh,n.BrowserQRCodeSvgWriter=P,n.CharacterSetECI=M,n.ChecksumException=I,n.Code128Reader=Q,n.Code39Reader=ye,n.DataMatrixDecodedBitStreamParser=li,n.DataMatrixReader=bi,n.DecodeHintType=re,n.DecoderResult=qi,n.DefaultGridSampler=Ka,n.DetectorResult=Vs,n.EAN13Reader=qt,n.EncodeHintType=Kt,n.Exception=y,n.FormatException=R,n.GenericGF=Xe,n.GenericGFPoly=Cn,n.GlobalHistogramBinarizer=de,n.GridSampler=fr,n.GridSamplerInstance=si,n.HTMLCanvasElementLuminanceSource=nt,n.HybridBinarizer=me,n.ITFReader=Ae,n.IllegalArgumentException=T,n.IllegalStateException=ii,n.InvertedLuminanceSource=Ye,n.LuminanceSource=Ne,n.MathUtils=ve,n.MultiFormatOneDReader=Mr,n.MultiFormatReader=Vc,n.MultiFormatWriter=te,n.NotFoundException=ie,n.OneDReader=St,n.PDF417DecodedBitStreamParser=ee,n.PDF417DecoderErrorCorrection=bh,n.PDF417Reader=Qt,n.PDF417ResultMetadata=kc,n.PerspectiveTransform=Yn,n.PlanarYUVLuminanceSource=he,n.QRCodeByteMatrix=so,n.QRCodeDataMask=In,n.QRCodeDecodedBitStreamParser=Dt,n.QRCodeDecoderErrorCorrectionLevel=bt,n.QRCodeDecoderFormatInformation=wn,n.QRCodeEncoder=C,n.QRCodeEncoderQRCode=Lr,n.QRCodeMaskUtil=Ke,n.QRCodeMatrixUtil=g,n.QRCodeMode=Se,n.QRCodeReader=vi,n.QRCodeVersion=Te,n.QRCodeWriter=K,n.RGBLuminanceSource=Be,n.RSS14Reader=kt,n.RSSExpandedReader=ce,n.ReaderException=ro,n.ReedSolomonDecoder=hr,n.ReedSolomonEncoder=qs,n.ReedSolomonException=ur,n.Result=ct,n.ResultMetadataType=Ht,n.ResultPoint=xe,n.StringUtils=j,n.UnsupportedOperationException=z,n.VideoInputDevice=Yi,n.WhiteRectangleDetector=ri,n.WriterException=ot,n.ZXingArrays=L,n.ZXingCharset=Zt,n.ZXingInteger=k,n.ZXingStandardCharsets=gt,n.ZXingStringBuilder=F,n.ZXingStringEncoding=G,n.ZXingSystem=X,n.createAbstractExpandedDecoder=Rr,Object.defineProperty(n,"__esModule",{value:!0})})})(im,im.exports);var Ut=im.exports;const sO=am(Ut),aO=ab({__proto__:null,default:sO},[Ut]);var Ix=function(){function t(e,n,i){if(this.formatMap=new Map([[_e.QR_CODE,Ut.BarcodeFormat.QR_CODE],[_e.AZTEC,Ut.BarcodeFormat.AZTEC],[_e.CODABAR,Ut.BarcodeFormat.CODABAR],[_e.CODE_39,Ut.BarcodeFormat.CODE_39],[_e.CODE_93,Ut.BarcodeFormat.CODE_93],[_e.CODE_128,Ut.BarcodeFormat.CODE_128],[_e.DATA_MATRIX,Ut.BarcodeFormat.DATA_MATRIX],[_e.MAXICODE,Ut.BarcodeFormat.MAXICODE],[_e.ITF,Ut.BarcodeFormat.ITF],[_e.EAN_13,Ut.BarcodeFormat.EAN_13],[_e.EAN_8,Ut.BarcodeFormat.EAN_8],[_e.PDF_417,Ut.BarcodeFormat.PDF_417],[_e.RSS_14,Ut.BarcodeFormat.RSS_14],[_e.RSS_EXPANDED,Ut.BarcodeFormat.RSS_EXPANDED],[_e.UPC_A,Ut.BarcodeFormat.UPC_A],[_e.UPC_E,Ut.BarcodeFormat.UPC_E],[_e.UPC_EAN_EXTENSION,Ut.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!aO)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var s=this.createZXingFormats(e),a=new Map;a.set(Ut.DecodeHintType.POSSIBLE_FORMATS,s),a.set(Ut.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,s){try{i(n.decode(e))}catch(a){s(a)}})},t.prototype.decode=function(e){var n=new Ut.MultiFormatReader(this.verbose,this.hints),i=new Ut.HTMLCanvasElementLuminanceSource(e),s=new Ut.BinaryBitmap(new Ut.HybridBinarizer(i)),a=n.decode(s);return{text:a.text,format:VS.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,s){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,s=e;i<s.length;i++){var a=s[i];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),oO=function(t,e,n,i){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(w){try{y(i.next(w))}catch(T){u(T)}}function p(w){try{y(i.throw(w))}catch(T){u(T)}}function y(w){w.done?a(w.value):s(w.value).then(d,p)}y((i=i.apply(t,e||[])).next())})},lO=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(y){return function(w){return p([y,w])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(i=1,s&&(a=y[0]&2?s.return:y[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,y[1])).done)return a;switch(s=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],s=0}finally{i=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Nx=function(){function t(e,n,i){if(this.formatMap=new Map([[_e.QR_CODE,"qr_code"],[_e.AZTEC,"aztec"],[_e.CODABAR,"codabar"],[_e.CODE_39,"code_39"],[_e.CODE_93,"code_93"],[_e.CODE_128,"code_128"],[_e.DATA_MATRIX,"data_matrix"],[_e.ITF,"itf"],[_e.EAN_13,"ean_13"],[_e.EAN_8,"ean_8"],[_e.PDF_417,"pdf417"],[_e.UPC_A,"upc_a"],[_e.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return oO(this,void 0,void 0,function(){var n,i;return lO(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:VS.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,s=0,a=e;s<a.length;s++){var u=a[s],d=u.boundingBox.width*u.boundingBox.height;d>i&&(i=d,n=u)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,s=e;i<s.length;i++){var a=s[i];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,s){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Rx=function(t,e,n,i){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(w){try{y(i.next(w))}catch(T){u(T)}}function p(w){try{y(i.throw(w))}catch(T){u(T)}}function y(w){w.done?a(w.value):s(w.value).then(d,p)}y((i=i.apply(t,e||[])).next())})},Mx=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(y){return function(w){return p([y,w])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(i=1,s&&(a=y[0]&2?s.return:y[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,y[1])).done)return a;switch(s=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],s=0}finally{i=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},cO=function(){function t(e,n,i,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Nx.isSupported()?(this.primaryDecoder=new Nx(e,i,s),this.secondaryDecoder=new Ix(e,i,s)):this.primaryDecoder=new Ix(e,i,s)}return t.prototype.decodeAsync=function(e){return Rx(this,void 0,void 0,function(){var n;return Mx(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Rx(this,void 0,void 0,function(){var n,i;return Mx(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(i=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var s=i[n];e+=s}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),c2=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),vd=function(t,e,n,i){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(w){try{y(i.next(w))}catch(T){u(T)}}function p(w){try{y(i.throw(w))}catch(T){u(T)}}function y(w){w.done?a(w.value):s(w.value).then(d,p)}y((i=i.apply(t,e||[])).next())})},Id=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(y){return function(w){return p([y,w])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(i=1,s&&(a=y[0]&2?s.return:y[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,y[1])).done)return a;switch(s=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],s=0}finally{i=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},zS=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),uO=function(t){c2(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var s={advanced:[i]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(zS),hO=function(t){c2(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(uO),fO=function(t){c2(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(zS),dO=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new hO(this.track)},t.prototype.torchFeature=function(){return new fO(this.track)},t}(),gO=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,s),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,s){return vd(this,void 0,void 0,function(){var a,u;return Id(this,function(d){switch(d.label){case 0:return a=new t(e,n,s),i.aspectRatio?(u={aspectRatio:i.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:d.sent(),d.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return vd(this,void 0,void 0,function(){return Id(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var s=e.mediaStream.getVideoTracks(),a=s.length,u=0;e.mediaStream.getVideoTracks().forEach(function(d){e.mediaStream.removeTrack(d),d.stop(),++u,u>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new dO(this.getFirstTrackOrFail())},t}(),mO=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return vd(this,void 0,void 0,function(){return Id(this,function(s){return[2,gO.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return vd(this,void 0,void 0,function(){var n,i;return Id(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=s.sent(),[2,new t(i)]}})})},t}(),Dx=function(t,e,n,i){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(w){try{y(i.next(w))}catch(T){u(T)}}function p(w){try{y(i.throw(w))}catch(T){u(T)}}function y(w){w.done?a(w.value):s(w.value).then(d,p)}y((i=i.apply(t,e||[])).next())})},Ox=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(y){return function(w){return p([y,w])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(i=1,s&&(a=y[0]&2?s.return:y[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,y[1])).done)return a;switch(s=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],s=0}finally{i=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},pO=function(){function t(){}return t.failIfNotSupported=function(){return Dx(this,void 0,void 0,function(){return Ox(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Dx(this,void 0,void 0,function(){return Ox(this,function(n){return[2,mO.create(e)]})})},t}(),yO=function(t,e,n,i){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(w){try{y(i.next(w))}catch(T){u(T)}}function p(w){try{y(i.throw(w))}catch(T){u(T)}}function y(w){w.done?a(w.value):s(w.value).then(d,p)}y((i=i.apply(t,e||[])).next())})},EO=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(y){return function(w){return p([y,w])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(i=1,s&&(a=y[0]&2?s.return:y[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,y[1])).done)return a;switch(s=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],s=0}finally{i=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},xO=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=vl.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=vl.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return yO(this,void 0,void 0,function(){var e,n,i,s,a,u,d;return EO(this,function(p){switch(p.label){case 0:return e=function(y){for(var w=y.getVideoTracks(),T=0,S=w;T<S.length;T++){var I=S[T];I.enabled=!1,I.stop(),y.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=p.sent(),s=[],a=0,u=i;a<u.length;a++)d=u[a],d.kind==="videoinput"&&s.push({id:d.deviceId,label:d.label});return e(n),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(a){for(var u=[],d=0,p=a;d<p.length;d++){var y=p[d];y.kind==="video"&&u.push({id:y.id,label:y.label})}e(u)},s=MediaStreamTrack;s.getSources(i)})},t}(),$t;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})($t||($t={}));var wO=function(){function t(){this.state=$t.NOT_STARTED,this.onGoingTransactionNewState=$t.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===$t.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=$t.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===$t.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=$t.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==$t.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case $t.UNKNOWN:throw"Transition from unknown is not allowed";case $t.NOT_STARTED:this.failIfNewStateIs(e,[$t.PAUSED]);break;case $t.SCANNING:break;case $t.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,s=n;i<s.length;i++){var a=s[i];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),_O=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===$t.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==$t.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===$t.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===$t.PAUSED},t}(),AO=function(){function t(){}return t.create=function(){return new _O(new wO)},t}(),TO=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ri=function(t){TO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Er),CO=function(){function t(e,n){this.logger=n,this.fps=Ri.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ri.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?jS.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Vr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Lx=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new FS(this.verbose),this.qrcode=new cO(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=AO.create()}return t.prototype.start=function(e,n,i,s){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;s?u=s:u=this.verbose?this.logger.log:function(){};var d=CO.create(n,this.logger);this.clearElement();var p=!1;d.videoConstraints&&(d.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=p,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Ri.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var T=this,S=this.stateManagerProxy.startTransition($t.SCANNING);return new Promise(function(I,q){var X=y?d.videoConstraints:T.createVideoConstraints(e);if(!X){S.cancel(),q("videoConstraints should be defined");return}var $={};(!y||d.aspectRatio)&&($.aspectRatio=d.aspectRatio);var V={onRenderSurfaceReady:function(L,k){T.setupUi(L,k,d),T.isScanning=!0,T.foreverScan(d,i,u)}};pO.failIfNotSupported().then(function(L){L.create(X).then(function(k){return k.render(a.element,$,V).then(function(H){T.renderedCamera=H,S.execute(),I(null)}).catch(function(H){S.cancel(),q(H)})}).catch(function(k){S.cancel(),q(vl.errorGettingUserMedia(k))})}).catch(function(L){S.cancel(),q(vl.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition($t.PAUSED),this.showPausedState(),(Vr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition($t.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition($t.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var a=document.getElementById(Ri.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),i(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Vr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,a){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var u=new Image;u.onload=function(){var d=u.width,p=u.height,y=document.getElementById(i.elementId),w=y.clientWidth?y.clientWidth:Ri.DEFAULT_WIDTH,T=Math.max(y.clientHeight?y.clientHeight:p,Ri.FILE_SCAN_MIN_HEIGHT),S=i.computeCanvasDrawConfig(d,p,w,T);if(n){var I=i.createCanvasElement(w,T,"qr-canvas-visible");I.style.display="inline-block",y.appendChild(I);var q=I.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=w,q.canvas.height=T,q.drawImage(u,0,0,d,p,S.x,S.y,S.width,S.height)}var X=Ri.FILE_SCAN_HIDDEN_CANVAS_PADDING,$=Math.max(u.width,S.width),V=Math.max(u.height,S.height),L=$+2*X,k=V+2*X,H=i.createCanvasElement(L,k);y.appendChild(H);var oe=H.getContext("2d");if(!oe)throw"Unable to get 2d context from canvas";oe.canvas.width=L,oe.canvas.height=k,oe.drawImage(u,0,0,d,p,X,X,$,V);try{i.qrcode.decodeRobustlyAsync(H).then(function(re){s(bx.createFromQrcodeResult(re))}).catch(a)}catch(re){a("QR code parse error, error = ".concat(re))}},u.onerror=a,u.onabort=a,u.onstalled=a,u.onsuspend=a,u.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return xO.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!jS.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[_e.QR_CODE,_e.AZTEC,_e.CODABAR,_e.CODE_39,_e.CODE_93,_e.CODE_128,_e.DATA_MATRIX,_e.MAXICODE,_e.ITF,_e.EAN_13,_e.EAN_8,_e.PDF_417,_e.RSS_14,_e.RSS_EXPANDED,_e.UPC_A,_e.UPC_E,_e.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],s=0,a=e.formatsToSupport;s<a.length;s++){var u=a[s];iO(u)?i.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Vr(e))return!0;if(!Vr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Vr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Vr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var s=this,a=i.qrbox;this.validateQrboxConfig(a);var u=this.toQrdimensions(e,n,a),d=function(y){if(y<Ri.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ri.MIN_QR_BOX_SIZE,"px.")},p=function(y){return y>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=e),y};d(u.width),d(u.height),u.width=p(u.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var s=Vr(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(s);var a=this.toQrdimensions(e,n,s);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=i.isShadedBoxEnabled()&&a.height<=n,d={x:0,y:0,width:e,height:n},p=u?this.getShadedRegionBounds(e,n,a):d,y=this.createCanvasElement(p.width,p.height),w={willReadFrequently:!0},T=y.getContext("2d",w);T.canvas.width=p.width,T.canvas.height=p.height,this.element.append(y),u&&this.possiblyInsertShadingElement(this.element,e,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=T,this.canvasElement=y},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=vl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,bx.createFromQrcodeResult(s)),i.possiblyUpdateShaders(!0),!0}).catch(function(s){i.possiblyUpdateShaders(!1);var a=vl.codeParseError(s);return n(a,US.createFrom(a)),!1})},t.prototype.foreverScan=function(e,n,i){var s=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),u=a.videoWidth/a.clientWidth,d=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*u,y=this.qrRegion.height*d,w=this.qrRegion.x*u,T=this.qrRegion.y*d;this.context.drawImage(a,w,T,p,y,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,n,i)},s.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(I){!I&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,i).finally(function(){S()})):S()}).catch(function(I){s.logger.logError("Error happend while scanning context",I),S()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",s={user:!0,environment:!0},a="exact",u=function(q){if(q in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(q,"'")},d=Object.keys(e);if(d.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(d.length," keys");var p=Object.keys(e)[0];if(p!==n&&p!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(p===n){var y=e.facingMode;if(typeof y=="string"){if(u(y))return{facingMode:y}}else if(typeof y=="object")if(a in y){if(u(y["".concat(a)]))return{facingMode:{exact:y["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var w=typeof y;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var T=e.deviceId;if(typeof T=="string")return{deviceId:T};if(typeof T=="object"){if(a in T)return{deviceId:{exact:T["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var S=typeof T;throw"Invalid type of 'deviceId' = ".concat(S)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},t.prototype.computeCanvasDrawConfig=function(e,n,i,s){if(e<=i&&n<=s){var a=(i-e)/2,u=(s-n)/2;return{x:a,y:u,width:e,height:n}}else{var d=e,p=n;return e>i&&(n=i/e*n,e=i),n>s&&(e=s/n*e,n=s),this.logger.log("Image downsampled from "+"".concat(d,"X").concat(p)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Ri.BORDER_SHADER_MATCH_COLOR:Ri.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var s=e,a=n,u=document.createElement("canvas");return u.style.width="".concat(s,"px"),u.style.height="".concat(a,"px"),u.style.display="none",u.id=Vr(i)?"qr-canvas":i,u},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,s){if(!(n-s.width<1||i-s.height<1)){var a=document.createElement("div");a.style.position="absolute";var u=(n-s.width)/2,d=(i-s.height)/2;if(a.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Ri.SHADED_REGION_ELEMENT_ID),n-s.width<11||i-s.height<11)this.hasBorderShaders=!1;else{var p=5,y=40;this.insertShaderBorders(a,y,p,-p,null,0,!0),this.insertShaderBorders(a,y,p,-p,null,0,!1),this.insertShaderBorders(a,y,p,null,-p,0,!0),this.insertShaderBorders(a,y,p,null,-p,0,!1),this.insertShaderBorders(a,p,y+p,-p,null,-p,!0),this.insertShaderBorders(a,p,y+p,null,-p,-p,!0),this.insertShaderBorders(a,p,y+p,-p,null,-p,!1),this.insertShaderBorders(a,p,y+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,n,i,s,a,u,d){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Ri.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(n,"px"),p.style.height="".concat(i,"px"),s!==null&&(p.style.top="".concat(s,"px")),a!==null&&(p.style.bottom="".concat(a,"px")),d?p.style.left="".concat(u,"px"):p.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),u2="data:image/svg+xml;base64,",SO=u2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",bO=u2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Px=u2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",vO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",kx=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),IO=function(){function t(){this.data=kx.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=kx.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),NO=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=vx.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(s);var a=document.createElement("a");a.innerText=vx.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),RO=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Px,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=vO,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Px,this.infoIcon.style.opacity="0.6")},t}(),MO=function(){function t(){var e=this;this.infoDiv=new NO,this.infoIcon=new RO(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),DO=function(t,e,n,i){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(w){try{y(i.next(w))}catch(T){u(T)}}function p(w){try{y(i.throw(w))}catch(T){u(T)}}function y(w){w.done?a(w.value):s(w.value).then(d,p)}y((i=i.apply(t,e||[])).next())})},OO=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(y){return function(w){return p([y,w])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(i=1,s&&(a=y[0]&2?s.return:y[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,y[1])).done)return a;switch(s=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],s=0}finally{i=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Bx=function(){function t(){}return t.hasPermissions=function(){return DO(this,void 0,void 0,function(){var e,n,i,s;return OO(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=a.sent(),n=0,i=e;n<i.length;n++)if(s=i[n],s.kind==="videoinput"&&s.label)return[2,!0];return[2,!1]}})})},t}(),Ks=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var i=n[e];if(t.isCameraScanType(i))return!0}return!1},t.isCameraScanType=function(e){return e===ja.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===ja.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Er.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Er.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,s=e;i<s.length;i++){var a=s[i];if(!Er.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return e},t}(),Pi=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Ts=function(){function t(){}return t.createElement=function(e,n){var i=document.createElement(e);return i.id=n,i.classList.add(Pi.ALL_ELEMENT_CLASS),e==="button"&&i.setAttribute("type","button"),i},t}(),HS=function(t,e,n,i){function s(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(w){try{y(i.next(w))}catch(T){u(T)}}function p(w){try{y(i.throw(w))}catch(T){u(T)}}function y(w){w.done?a(w.value):s(w.value).then(d,p)}y((i=i.apply(t,e||[])).next())})},GS=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(y){return function(w){return p([y,w])}}function p(y){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(i=1,s&&(a=y[0]&2?s.return:y[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,y[1])).done)return a;switch(s=0,a&&(y=[y[0]&2,a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(y[0]===6&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(w){y=[6,w],s=0}finally{i=a=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Vx=function(){function t(e,n,i){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=i}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return HS(this,void 0,void 0,function(){var e,n;return GS(this,function(i){switch(i.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=i.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?Tt.torchOffButton():Tt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var i=e?Tt.torchOnFailedMessage():Tt.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),LO=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Ts.createElement("button",Pi.TORCH_BUTTON_ID),this.torchController=new Vx(e,this,n)}return t.prototype.render=function(e,n){var i=this;this.torchButton.innerText=Tt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var s=this;this.torchButton.addEventListener("click",function(a){return HS(i,void 0,void 0,function(){return GS(this,function(u){switch(u.label){case 0:return[4,s.torchController.flipState()];case 1:return u.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(Pi.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(Pi.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(Pi.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(Pi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Vx(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=Tt.torchOnButton(),this.torchController.reset()},t.create=function(e,n,i,s){var a=new t(n,s);return a.render(e,i),a},t}(),PO=function(){function t(e,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=Ts.createElement("button",Pi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(d){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=Ts.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(d){if(!(d==null||d.target==null)){var p=d.target;if(!(p.files&&p.files.length===0)){var y=p.files,w=y[0],T=w.name;a.setImageNameToButton(T),i(w)}}});var u=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(u),this.fileBasedScanRegion.addEventListener("dragenter",function(d){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),d.stopPropagation(),d.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(d){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),d.stopPropagation(),d.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(d){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),d.stopPropagation(),d.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(d){d.stopPropagation(),d.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var p=d.dataTransfer;if(p){var y=p.files;if(!y||y.length===0)return;for(var w=!1,T=0;T<y.length;++T){var S=y.item(T);if(S){var I=/image.*/;if(S.type.match(I)){w=!0;var q=S.name;a.setImageNameToButton(q),i(S),u.innerText=Tt.dragAndDropMessage();break}}}w||(u.innerText=Tt.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Tt.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var i=e.substring(0,8),s=e.length,a=e.substring(s-8,s);e="".concat(i,"....").concat(a)}var u=Tt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=u},t.prototype.setInitialValueToButton=function(){var e=Tt.fileSelectionChooseImage()+" - "+Tt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,i){var s=new t(e,n,i);return s},t}(),kO=function(){function t(e){this.selectElement=Ts.createElement("select",Pi.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var s=Tt.selectCamera();n.innerText="".concat(s," (").concat(this.cameras.length,")  ")}for(var a=1,u=0,d=this.cameras;u<d.length;u++){var p=d[u],y=p.id,w=p.label==null?y:p.label;(!w||w==="")&&(w=[Tt.anonymousCameraPrefix(),a++].join(" "));var T=document.createElement("option");T.value=y,T.innerText=w,this.options.push(T),this.selectElement.appendChild(T)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,i=this.options;n<i.length;n++){var s=i[n];if(s.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var i=new t(n);return i.render(e),i},t}(),BO=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ts.createElement("input",Pi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=Tt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=Tt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,i,s){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var i=new t;return i.render(e,n),i},t}(),Mi;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Mi||(Mi={}));function VO(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function UO(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var FO=function(){function t(e,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Ks(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new FS(this.verbose),this.persistedDataManager=new IO,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(a,u){if(e)e(a,u);else{if(i.lastMatchFound===a)return;i.lastMatchFound=a,i.setHeaderMessage(Tt.lastMatch(a),Mi.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,u){n&&n(a,u)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new Lx(this.getScanRegionId(),UO(this.config,this.verbose))},t.prototype.pause=function(e){(Vr(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var i=document.getElementById(e.elementId);i&&(i.innerHTML="",e.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,s){if(!e.html5Qrcode){i();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(a){if(!e.html5Qrcode){i();return}e.html5Qrcode.clear(),n(),i()}).catch(function(a){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",a),s(a)}):(e.html5Qrcode.clear(),n(),i())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Er.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Er.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Er.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Er.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Er.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Er.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Er.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),Ks.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),a=this.getDashboardId();s.id=a,s.style.width="100%",e.appendChild(s),this.setupInitialDashboard(s)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var i=new MO;i.renderInto(n);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",n.appendChild(s)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,i){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(Tt.cameraPermissionRequesting());var a=function(){i||s.createPermissionButton(e,n)};Lx.getCameras().then(function(u){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),u&&u.length>0?(e.removeChild(n),s.renderCameraSelection(u)):(s.setHeaderMessage(Tt.noCameraFound(),Mi.STATUS_WARNING),a())}).catch(function(u){s.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:a(),s.setHeaderMessage(u,Mi.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var i=this,s=Ts.createElement("button",this.getCameraPermissionButtonId());s.innerText=Tt.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,i.createCameraListUi(e,n,s)}),n.appendChild(s)},t.prototype.createPermissionsUi=function(e,n){var i=this;if(Ks.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Bx.hasPermissions().then(function(s){s?i.createCameraListUi(e,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,n))}).catch(function(s){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Ks.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var s=document.createElement("div");s.style.textAlign="center",i.appendChild(s),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,s),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=Ks.isFileScanType(this.currentScanType),i=this,s=function(a){if(!i.html5Qrcode)throw"html5Qrcode not defined";Ks.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(Tt.loadingImage()),i.html5Qrcode.scanFileV2(a,!0).then(function(u){i.resetHeaderMessage(),i.qrCodeSuccessCallback(u.decodedText,u)}).catch(function(u){i.setHeaderMessage(u,Mi.STATUS_WARNING),i.qrCodeErrorCallback(u,US.createFrom(u))}))};this.fileSelectionUi=PO.create(e,n,s)},t.prototype.renderCameraSelection=function(e){var n=this,i=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var a=BO.create(s,!1),u=function(X){var $=X.zoomFeature();if($.isSupported()){a.setOnCameraZoomValueChangeCallback(function(L){$.apply(L)});var V=1;n.config.defaultZoomValueIfSupported&&(V=n.config.defaultZoomValueIfSupported),V=rO(V,$.min(),$.max()),a.setValues($.min(),$.max(),V,$.step()),a.show()}},d=kO.create(s,e),p=document.createElement("span"),y=Ts.createElement("button",Pi.CAMERA_START_BUTTON_ID);y.innerText=Tt.scanButtonStartScanningText(),p.appendChild(y);var w=Ts.createElement("button",Pi.CAMERA_STOP_BUTTON_ID);w.innerText=Tt.scanButtonStopScanningText(),w.style.display="none",w.disabled=!0,p.appendChild(w);var T,S=function(X){if(!X.torchFeature().isSupported()){T&&T.hide();return}T?T.updateTorchCapability(X.torchFeature()):T=LO.create(p,X.torchFeature(),{display:"none",marginLeft:"5px"},function($){i.setHeaderMessage($,Mi.STATUS_WARNING)}),T.show()};s.appendChild(p);var I=function(X){X||(y.style.display="none"),y.innerText=Tt.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,X&&(y.style.display="inline-block")};if(y.addEventListener("click",function(X){y.innerText=Tt.scanButtonScanningStarting(),d.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var $=d.getValue();i.persistedDataManager.setLastUsedCameraId($),i.html5Qrcode.start($,VO(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(V){w.disabled=!1,w.style.display="inline-block",I(!1);var L=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&S(L),n.config.showZoomSliderIfSupported===!0&&u(L)}).catch(function(V){i.showHideScanTypeSwapLink(!0),d.enable(),I(!0),i.setHeaderMessage(V,Mi.STATUS_WARNING)})}),d.hasSingleItem()&&y.click(),w.addEventListener("click",function(X){if(!i.html5Qrcode)throw"html5Qrcode not defined";w.disabled=!0,i.html5Qrcode.stop().then(function($){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),d.enable(),y.disabled=!1,w.style.display="none",y.style.display="inline-block",T&&(T.reset(),T.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),i.insertCameraScanImageToScanRegion()}).catch(function($){w.disabled=!1,i.setHeaderMessage($,Mi.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var q=i.persistedDataManager.getLastUsedCameraId();d.hasValue(q)?(d.setValue(q),y.click()):i.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=Tt.textIfCameraScanSelected(),i=Tt.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var u=Ts.createElement("span",this.getDashboardSectionSwapLinkId());u.style.textDecoration="underline",u.style.cursor="pointer",u.innerText=Ks.isCameraScanType(this.currentScanType)?n:i,u.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Ks.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),u.innerText=i,e.currentScanType=ja.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),u.innerText=n,e.currentScanType=ja.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),a.appendChild(u),s.appendChild(a)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Bx.hasPermissions().then(function(i){if(i){var s=document.getElementById(n.getCameraPermissionButtonId());if(!s)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=Mi.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=e,i.style.display="block",n){case Mi.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Mi.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Mi.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=SO,this.cameraScanImage.alt=Tt.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=bO,this.fileScanImage.alt=Tt.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Pi.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Pi.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zO=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),Ux=t=>{const e=zO(t);return e.charAt(0).toUpperCase()+e.slice(1)},YS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),HO=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=ze.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:u,...d},p)=>ze.createElement("svg",{ref:p,...GO,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:YS("lucide",s),...!a&&!HO(d)&&{"aria-hidden":"true"},...d},[...u.map(([y,w])=>ze.createElement(y,w)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=(t,e)=>{const n=ze.forwardRef(({className:i,...s},a)=>ze.createElement(YO,{ref:a,iconNode:e,className:YS(`lucide-${jO(Ux(t))}`,`lucide-${t}`,i),...s}));return n.displayName=Ux(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],XO=ti("camera",qO);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rm=ti("check",WO);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],KO=ti("download",QO);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],JO=ti("file-down",ZO);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Rf=ti("heart",$O);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],sm=ti("message-square",e5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],n5=ti("pen",t5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],r5=ti("plus",i5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Fx=ti("qr-code",s5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],h2=ti("search",a5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],f2=ti("trash-2",o5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qS=ti("user-check",l5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],XS=ti("user-x",c5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],su=ti("users",u5);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dl=ti("x",h5),WS=6048e5,f5=864e5,jx=Symbol.for("constructDateFrom");function za(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&jx in t?t[jx](e):t instanceof Date?new t.constructor(e):new Date(e)}function Sr(t,e){return za(e||t,t)}let d5={};function w0(){return d5}function $u(t,e){var d,p,y,w;const n=w0(),i=(e==null?void 0:e.weekStartsOn)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((w=(y=n.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,s=Sr(t,e==null?void 0:e.in),a=s.getDay(),u=(a<i?7:0)+a-i;return s.setDate(s.getDate()-u),s.setHours(0,0,0,0),s}function Nd(t,e){return $u(t,{...e,weekStartsOn:1})}function QS(t,e){const n=Sr(t,e==null?void 0:e.in),i=n.getFullYear(),s=za(n,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const a=Nd(s),u=za(n,0);u.setFullYear(i,0,4),u.setHours(0,0,0,0);const d=Nd(u);return n.getTime()>=a.getTime()?i+1:n.getTime()>=d.getTime()?i:i-1}function zx(t){const e=Sr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function g5(t,...e){const n=za.bind(null,e.find(i=>typeof i=="object"));return e.map(n)}function Hx(t,e){const n=Sr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function m5(t,e,n){const[i,s]=g5(n==null?void 0:n.in,t,e),a=Hx(i),u=Hx(s),d=+a-zx(a),p=+u-zx(u);return Math.round((d-p)/f5)}function p5(t,e){const n=QS(t,e),i=za(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Nd(i)}function y5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function E5(t){return!(!y5(t)&&typeof t!="number"||isNaN(+Sr(t)))}function x5(t,e){const n=Sr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const w5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_5=(t,e,n)=>{let i;const s=w5[t];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Ul(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const A5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},T5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},C5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},S5={date:Ul({formats:A5,defaultWidth:"full"}),time:Ul({formats:T5,defaultWidth:"full"}),dateTime:Ul({formats:C5,defaultWidth:"full"})},b5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},v5=(t,e,n,i)=>b5[t];function Fr(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let s;if(i==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):u;s=t.formattingValues[d]||t.formattingValues[u]}else{const u=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[d]||t.values[u]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const I5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},N5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},R5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},M5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},D5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},O5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},L5=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},P5={ordinalNumber:L5,era:Fr({values:I5,defaultWidth:"wide"}),quarter:Fr({values:N5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fr({values:R5,defaultWidth:"wide"}),day:Fr({values:M5,defaultWidth:"wide"}),dayPeriod:Fr({values:D5,defaultWidth:"wide",formattingValues:O5,defaultFormattingWidth:"wide"})};function jr(t){return(e,n={})=>{const i=n.width,s=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const u=a[0],d=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(d)?B5(d,T=>T.test(u)):k5(d,T=>T.test(u));let y;y=t.valueCallback?t.valueCallback(p):p,y=n.valueCallback?n.valueCallback(y):y;const w=e.slice(u.length);return{value:y,rest:w}}}function k5(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function B5(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function KS(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const s=i[0],a=e.match(t.parsePattern);if(!a)return null;let u=t.valueCallback?t.valueCallback(a[0]):a[0];u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}const V5=/^(\d+)(th|st|nd|rd)?/i,U5=/\d+/i,F5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j5={any:[/^b/i,/^(a|c)/i]},z5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},H5={any:[/1/i,/2/i,/3/i,/4/i]},G5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Y5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},q5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},X5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},W5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Q5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},K5={ordinalNumber:KS({matchPattern:V5,parsePattern:U5,valueCallback:t=>parseInt(t,10)}),era:jr({matchPatterns:F5,defaultMatchWidth:"wide",parsePatterns:j5,defaultParseWidth:"any"}),quarter:jr({matchPatterns:z5,defaultMatchWidth:"wide",parsePatterns:H5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:jr({matchPatterns:G5,defaultMatchWidth:"wide",parsePatterns:Y5,defaultParseWidth:"any"}),day:jr({matchPatterns:q5,defaultMatchWidth:"wide",parsePatterns:X5,defaultParseWidth:"any"}),dayPeriod:jr({matchPatterns:W5,defaultMatchWidth:"any",parsePatterns:Q5,defaultParseWidth:"any"})},Z5={code:"en-US",formatDistance:_5,formatLong:S5,formatRelative:v5,localize:P5,match:K5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function J5(t,e){const n=Sr(t,e==null?void 0:e.in);return m5(n,x5(n))+1}function $5(t,e){const n=Sr(t,e==null?void 0:e.in),i=+Nd(n)-+p5(n);return Math.round(i/WS)+1}function ZS(t,e){var w,T,S,I;const n=Sr(t,e==null?void 0:e.in),i=n.getFullYear(),s=w0(),a=(e==null?void 0:e.firstWeekContainsDate)??((T=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:T.firstWeekContainsDate)??s.firstWeekContainsDate??((I=(S=s.locale)==null?void 0:S.options)==null?void 0:I.firstWeekContainsDate)??1,u=za((e==null?void 0:e.in)||t,0);u.setFullYear(i+1,0,a),u.setHours(0,0,0,0);const d=$u(u,e),p=za((e==null?void 0:e.in)||t,0);p.setFullYear(i,0,a),p.setHours(0,0,0,0);const y=$u(p,e);return+n>=+d?i+1:+n>=+y?i:i-1}function e9(t,e){var d,p,y,w;const n=w0(),i=(e==null?void 0:e.firstWeekContainsDate)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??n.firstWeekContainsDate??((w=(y=n.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??1,s=ZS(t,e),a=za((e==null?void 0:e.in)||t,0);return a.setFullYear(s,0,i),a.setHours(0,0,0,0),$u(a,e)}function t9(t,e){const n=Sr(t,e==null?void 0:e.in),i=+$u(n,e)-+e9(n,e);return Math.round(i/WS)+1}function _t(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const Zs={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return _t(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):_t(n+1,2)},d(t,e){return _t(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return _t(t.getHours()%12||12,e.length)},H(t,e){return _t(t.getHours(),e.length)},m(t,e){return _t(t.getMinutes(),e.length)},s(t,e){return _t(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),s=Math.trunc(i*Math.pow(10,n-3));return _t(s,e.length)}},sl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Gx={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),s=i>0?i:1-i;return n.ordinalNumber(s,{unit:"year"})}return Zs.y(t,e)},Y:function(t,e,n,i){const s=ZS(t,i),a=s>0?s:1-s;if(e==="YY"){const u=a%100;return _t(u,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):_t(a,e.length)},R:function(t,e){const n=QS(t);return _t(n,e.length)},u:function(t,e){const n=t.getFullYear();return _t(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return _t(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return _t(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return Zs.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return _t(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const s=t9(t,i);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):_t(s,e.length)},I:function(t,e,n){const i=$5(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):_t(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Zs.d(t,e)},D:function(t,e,n){const i=J5(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):_t(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const s=t.getDay(),a=(s-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return _t(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const s=t.getDay(),a=(s-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return _t(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),s=i===0?7:i;switch(e){case"i":return String(s);case"ii":return _t(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let s;switch(i===12?s=sl.noon:i===0?s=sl.midnight:s=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let s;switch(i>=17?s=sl.evening:i>=12?s=sl.afternoon:i>=4?s=sl.morning:s=sl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Zs.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Zs.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):_t(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):_t(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Zs.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Zs.s(t,e)},S:function(t,e){return Zs.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return qx(i);case"XXXX":case"XX":return go(i);case"XXXXX":case"XXX":default:return go(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return qx(i);case"xxxx":case"xx":return go(i);case"xxxxx":case"xxx":default:return go(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Yx(i,":");case"OOOO":default:return"GMT"+go(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Yx(i,":");case"zzzz":default:return"GMT"+go(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return _t(i,e.length)},T:function(t,e,n){return _t(+t,e.length)}};function Yx(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),s=Math.trunc(i/60),a=i%60;return a===0?n+String(s):n+String(s)+e+_t(a,2)}function qx(t,e){return t%60===0?(t>0?"-":"+")+_t(Math.abs(t)/60,2):go(t,e)}function go(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),s=_t(Math.trunc(i/60),2),a=_t(i%60,2);return n+s+e+a}const Xx=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},JS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},n9=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],s=n[2];if(!s)return Xx(t,e);let a;switch(i){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Xx(i,e)).replace("{{time}}",JS(s,e))},i9={p:JS,P:n9},r9=/^D+$/,s9=/^Y+$/,a9=["D","DD","YY","YYYY"];function o9(t){return r9.test(t)}function l9(t){return s9.test(t)}function c9(t,e,n){const i=u9(t,e,n);if(console.warn(i),a9.includes(t))throw new RangeError(i)}function u9(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const h9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,f9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,d9=/^'([^]*?)'?$/,g9=/''/g,m9=/[a-zA-Z]/;function vu(t,e,n){var w,T,S,I,q,X,$,V;const i=w0(),s=(n==null?void 0:n.locale)??i.locale??Z5,a=(n==null?void 0:n.firstWeekContainsDate)??((T=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:T.firstWeekContainsDate)??i.firstWeekContainsDate??((I=(S=i.locale)==null?void 0:S.options)==null?void 0:I.firstWeekContainsDate)??1,u=(n==null?void 0:n.weekStartsOn)??((X=(q=n==null?void 0:n.locale)==null?void 0:q.options)==null?void 0:X.weekStartsOn)??i.weekStartsOn??((V=($=i.locale)==null?void 0:$.options)==null?void 0:V.weekStartsOn)??0,d=Sr(t,n==null?void 0:n.in);if(!E5(d))throw new RangeError("Invalid time value");let p=e.match(f9).map(L=>{const k=L[0];if(k==="p"||k==="P"){const H=i9[k];return H(L,s.formatLong)}return L}).join("").match(h9).map(L=>{if(L==="''")return{isToken:!1,value:"'"};const k=L[0];if(k==="'")return{isToken:!1,value:p9(L)};if(Gx[k])return{isToken:!0,value:L};if(k.match(m9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:L}});s.localize.preprocessor&&(p=s.localize.preprocessor(d,p));const y={firstWeekContainsDate:a,weekStartsOn:u,locale:s};return p.map(L=>{if(!L.isToken)return L.value;const k=L.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&l9(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&o9(k))&&c9(k,e,String(t));const H=Gx[k[0]];return H(d,k,s.localize,y)}).join("")}function p9(t){const e=t.match(d9);return e?e[1].replace(g9,"'"):t}const y9={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},E9=(t,e,n)=>{let i;const s=y9[t];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dalam waktu "+i:i+" yang lalu":i},x9={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},w9={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},_9={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},A9={date:Ul({formats:x9,defaultWidth:"full"}),time:Ul({formats:w9,defaultWidth:"full"}),dateTime:Ul({formats:_9,defaultWidth:"full"})},T9={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},C9=(t,e,n,i)=>T9[t],S9={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},b9={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},v9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},I9={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},N9={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},R9={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},M9=(t,e)=>"ke-"+Number(t),D9={ordinalNumber:M9,era:Fr({values:S9,defaultWidth:"wide"}),quarter:Fr({values:b9,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fr({values:v9,defaultWidth:"wide"}),day:Fr({values:I9,defaultWidth:"wide"}),dayPeriod:Fr({values:N9,defaultWidth:"wide",formattingValues:R9,defaultFormattingWidth:"wide"})},O9=/^ke-(\d+)?/i,L9=/\d+/i,P9={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},k9={any:[/^s/i,/^(m|e)/i]},B9={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},V9={any:[/1/i,/2/i,/3/i,/4/i]},U9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},F9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},j9={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},z9={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},H9={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},G9={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},Y9={ordinalNumber:KS({matchPattern:O9,parsePattern:L9,valueCallback:t=>parseInt(t,10)}),era:jr({matchPatterns:P9,defaultMatchWidth:"wide",parsePatterns:k9,defaultParseWidth:"any"}),quarter:jr({matchPatterns:B9,defaultMatchWidth:"wide",parsePatterns:V9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:jr({matchPatterns:U9,defaultMatchWidth:"wide",parsePatterns:F9,defaultParseWidth:"any"}),day:jr({matchPatterns:j9,defaultMatchWidth:"wide",parsePatterns:z9,defaultParseWidth:"any"}),dayPeriod:jr({matchPatterns:H9,defaultMatchWidth:"any",parsePatterns:G9,defaultParseWidth:"any"})},Rd={code:"id",formatDistance:E9,formatLong:A9,formatRelative:C9,localize:D9,match:Y9,options:{weekStartsOn:1,firstWeekContainsDate:1}};function q9({rsvpList:t,filteredRSVP:e,rsvpLoading:n,rsvpSearchTerm:i,setRsvpSearchTerm:s,rsvpFilterStatus:a,setRsvpFilterStatus:u,handleDeleteRSVP:d,exportRSVPtoCSV:p}){const y=t.length,w=t.filter(I=>I.attendance!=="0").length,T=t.filter(I=>I.attendance==="0").length,S=t.reduce((I,q)=>I+(q.guests||0),0);return O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total RSVP"}),O.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:y})]}),O.jsx("div",{className:"bg-green-100 p-4 rounded-full",children:O.jsx(sm,{className:"w-8 h-8 text-green-600"})})]})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Hadir"}),O.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:w})]}),O.jsx("div",{className:"bg-blue-100 p-4 rounded-full",children:O.jsx(qS,{className:"w-8 h-8 text-blue-600"})})]})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tidak Hadir"}),O.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:T})]}),O.jsx("div",{className:"bg-orange-100 p-4 rounded-full",children:O.jsx(XS,{className:"w-8 h-8 text-orange-600"})})]})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tamu"}),O.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:S})]}),O.jsx("div",{className:"bg-purple-100 p-4 rounded-full",children:O.jsx(su,{className:"w-8 h-8 text-purple-600"})})]})})]}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[O.jsxs("div",{className:"relative",children:[O.jsx(h2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),O.jsx("input",{type:"text",placeholder:"Cari nama atau pesan...",value:i,onChange:I=>s(I.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),O.jsxs("select",{value:a,onChange:I=>u(I.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[O.jsx("option",{value:"all",children:"Semua Status"}),O.jsx("option",{value:"hadir",children:"Hadir"}),O.jsx("option",{value:"tidak-hadir",children:"Tidak Hadir"})]}),O.jsxs("button",{onClick:p,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center justify-center space-x-2 transition-all shadow-lg hover:shadow-xl",children:[O.jsx(JO,{className:"w-5 h-5"}),O.jsx("span",{className:"font-semibold",children:"Export CSV"})]})]})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:n?O.jsxs("div",{className:"p-12 text-center",children:[O.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),O.jsx("p",{className:"mt-4 text-gray-600",children:"Memuat data RSVP..."})]}):e.length===0?O.jsxs("div",{className:"p-12 text-center",children:[O.jsx(sm,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),O.jsx("p",{className:"text-gray-600 text-lg",children:"Belum ada RSVP"})]}):O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"w-full",children:[O.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:O.jsxs("tr",{children:[O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Nama"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Jumlah Tamu"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Pesan"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tanggal"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Aksi"})]})}),O.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(I=>O.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[O.jsx("td",{className:"px-6 py-4",children:O.jsx("div",{className:"font-medium text-gray-900",children:I.name})}),O.jsx("td",{className:"px-6 py-4",children:O.jsx("span",{className:`inline-flex items-center space-x-1 px-3 py-1 text-xs font-semibold rounded-full ${I.attendance==="0"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:I.attendance==="0"?O.jsxs(O.Fragment,{children:[O.jsx(dl,{className:"w-3 h-3"}),O.jsx("span",{children:"Tidak Hadir"})]}):O.jsxs(O.Fragment,{children:[O.jsx(rm,{className:"w-3 h-3"}),O.jsx("span",{children:"Hadir"})]})})}),O.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[I.guests," orang"]}),O.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",children:I.message||"-"}),O.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:vu(I.timestamp,"dd MMM yyyy HH:mm",{locale:Rd})}),O.jsx("td",{className:"px-6 py-4",children:O.jsx("button",{onClick:()=>d(I.id,I.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus",children:O.jsx(f2,{className:"w-5 h-5"})})})]},I.id))})]})})})]})}function X9({wishList:t,filteredWishes:e,wishLoading:n,wishSearchTerm:i,setWishSearchTerm:s,handleDeleteWish:a}){const u=t.length;return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Ucapan"}),O.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:u})]}),O.jsx("div",{className:"bg-purple-100 p-4 rounded-full",children:O.jsx(Rf,{className:"w-8 h-8 text-purple-600"})})]})})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:O.jsxs("div",{className:"relative",children:[O.jsx(h2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),O.jsx("input",{type:"text",placeholder:"Cari nama atau ucapan...",value:i,onChange:d=>s(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:n?O.jsxs("div",{className:"p-12 text-center",children:[O.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),O.jsx("p",{className:"mt-4 text-gray-600",children:"Memuat ucapan..."})]}):e.length===0?O.jsxs("div",{className:"p-12 text-center",children:[O.jsx(Rf,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),O.jsx("p",{className:"text-gray-600 text-lg",children:"Belum ada ucapan"})]}):O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(d=>O.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100 relative hover:shadow-md transition-shadow",children:[O.jsx("button",{onClick:()=>a(d.id,d.name),className:"absolute top-2 right-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Hapus",children:O.jsx(f2,{className:"w-4 h-4"})}),O.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[O.jsx("div",{className:"bg-purple-200 p-2 rounded-full",children:O.jsx(Rf,{className:"w-4 h-4 text-purple-600"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("h4",{className:"font-semibold text-gray-900",children:d.name}),O.jsx("p",{className:"text-xs text-gray-500",children:vu(d.timestamp,"dd MMM yyyy HH:mm",{locale:Rd})})]})]}),O.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:d.message})]},d.id))})})]})}const W9={apiKey:"AIzaSyDBgLYSMQetSTL1r8L9Xz9zbyMH-QvRnYc",authDomain:"aplikasi-tamu-undangan.firebaseapp.com",projectId:"aplikasi-tamu-undangan",storageBucket:"aplikasi-tamu-undangan.firebasestorage.app",messagingSenderId:"918722441585",appId:"1:918722441585:web:859591609b99df751e86d0",measurementId:"G-LXVPJ5GNG0"},$S=oT(W9),Br=$M($S),Q9=GT($S),Wx="http://localhost:3000/invitation";function K9(){const[t,e]=ze.useState(null),[n,i]=ze.useState(!0),[s,a]=ze.useState("guests");ze.useEffect(()=>{const Q=HN(Q9,ye=>{e(ye),i(!1)});return()=>Q()},[]);const[u,d]=ze.useState([]),[p,y]=ze.useState([]),[w,T]=ze.useState(""),[S,I]=ze.useState("all"),[q,X]=ze.useState("all"),[$,V]=ze.useState(!1),[L,k]=ze.useState(!1),[H,oe]=ze.useState(!1),[re,R]=ze.useState(!1),[D,M]=ze.useState(null),[z,G]=ze.useState(!0),[j,F]=ze.useState({name:"",email:"",phone:"",category:"Teman"}),[Ge,ie]=ze.useState([]),[de,me]=ze.useState([]),[Ne,Ye]=ze.useState(!0),[nt,Yi]=ze.useState(""),[xt,Gn]=ze.useState("all"),[ct,ni]=ze.useState([]),[Ce,br]=ze.useState([]),[Ht,qi]=ze.useState(!0),[wi,Cn]=ze.useState(""),_i=async()=>{try{G(!0);const Q=w1(tf(Br,"guests"),_1("createdAt","desc")),ye=await dD(Q),Ae=[];ye.forEach(Pe=>{var wt;const rt=Pe.data();Ae.push({id:Pe.id,name:rt.name,email:rt.email,phone:rt.phone,category:rt.category,status:rt.status,qrCode:rt.qrCode,createdAt:rt.createdAt.toDate(),checkedInAt:(wt=rt.checkedInAt)==null?void 0:wt.toDate()})}),d(Ae),y(Ae)}catch(Q){console.error("Error loading guests:",Q),alert("Gagal memuat data tamu. Pastikan koneksi internet dan konfigurasi Firebase sudah benar.")}finally{G(!1)}},Xe=()=>{try{Ye(!0);const Q=w1(tf(Br,"rsvp"),_1("timestamp","desc"));return wx(Q,Ae=>{const Pe=[];Ae.forEach(rt=>{const wt=rt.data();Pe.push({id:rt.id,name:wt.name,attendance:wt.attendance,guests:wt.guests||0,message:wt.message,guestId:wt.guestId,timestamp:wt.timestamp.toDate()})}),ie(Pe),me(Pe),Ye(!1)})}catch(Q){console.error("Error loading RSVP:",Q),Ye(!1)}},ur=()=>{try{qi(!0);const Q=w1(tf(Br,"wishes"),_1("timestamp","desc"));return wx(Q,Ae=>{const Pe=[];Ae.forEach(rt=>{const wt=rt.data();Pe.push({id:rt.id,name:wt.name,message:wt.message,timestamp:wt.timestamp.toDate()})}),ni(Pe),br(Pe),qi(!1)})}catch(Q){console.error("Error loading wishes:",Q),qi(!1)}};ze.useEffect(()=>{t&&(_i(),Xe(),ur())},[t]),ze.useEffect(()=>{let Q=u;w&&(Q=Q.filter(ye=>ye.name.toLowerCase().includes(w.toLowerCase())||ye.email.toLowerCase().includes(w.toLowerCase())||ye.phone.includes(w))),S!=="all"&&(Q=Q.filter(ye=>ye.category===S)),q!=="all"&&(Q=Q.filter(ye=>ye.status===q)),y(Q)},[w,S,q,u]),ze.useEffect(()=>{let Q=Ge;nt&&(Q=Q.filter(ye=>ye.name.toLowerCase().includes(nt.toLowerCase())||ye.message.toLowerCase().includes(nt.toLowerCase()))),xt!=="all"&&(xt==="hadir"?Q=Q.filter(ye=>ye.attendance!=="0"):xt==="tidak-hadir"&&(Q=Q.filter(ye=>ye.attendance==="0"))),me(Q)},[nt,xt,Ge]),ze.useEffect(()=>{let Q=ct;wi&&(Q=Q.filter(ye=>ye.name.toLowerCase().includes(wi.toLowerCase())||ye.message.toLowerCase().includes(wi.toLowerCase()))),br(Q)},[wi,ct]);const ii=async(Q,ye)=>{try{const Ae=JSON.stringify({id:Q,name:ye,timestamp:new Date().toISOString()});return await Th.toDataURL(Ae,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}})}catch(Ae){return console.error("Error generating QR code:",Ae),""}},hr=async Q=>{if(Q.preventDefault(),!j.name||!j.email||!j.phone){alert("Mohon lengkapi semua data!");return}try{const ye=await gD(tf(Br,"guests"),{name:j.name,email:j.email,phone:j.phone,category:j.category,status:"belum-hadir",qrCode:"",createdAt:Rt.now()}),Ae=await ii(ye.id,j.name);await A1(fo(Br,"guests",ye.id),{qrCode:Ae});const Pe=`${Wx}/${ye.id}`,rt=` Tamu berhasil ditambahkan!

 Nama: ${j.name}
 Email: ${j.email}

 URL Undangan:
${Pe}

 URL sudah di-copy ke clipboard!
Kirim URL ini ke ${j.name} via WhatsApp/Email.`;navigator.clipboard.writeText(Pe).then(()=>{alert(rt)}).catch(()=>{alert(rt+`

 Gagal copy otomatis, silakan copy manual.`)}),V(!1),F({name:"",email:"",phone:"",category:"Teman"}),_i()}catch(ye){console.error("Error adding guest:",ye),alert(" Gagal menambahkan tamu. Silakan coba lagi.")}},Yt=async Q=>{if(Q.preventDefault(),!!D)try{await A1(fo(Br,"guests",D.id),{name:j.name,email:j.email,phone:j.phone,category:j.category}),alert(" Data tamu berhasil diperbarui!"),k(!1),M(null),_i()}catch(ye){console.error("Error updating guest:",ye),alert(" Gagal memperbarui data tamu.")}},ft=async(Q,ye)=>{if(window.confirm(`Apakah Anda yakin ingin menghapus ${ye}?`))try{await T1(fo(Br,"guests",Q)),alert(" Tamu berhasil dihapus!"),_i()}catch(Ae){console.error("Error deleting guest:",Ae),alert(" Gagal menghapus tamu.")}},ve=async Q=>{try{await A1(fo(Br,"guests",Q),{status:"sudah-hadir",checkedInAt:Rt.now()}),alert(" Tamu berhasil check-in!"),_i(),oe(!1),R(!1)}catch(ye){console.error("Error checking in guest:",ye),alert(" Gagal melakukan check-in.")}},Wt=Q=>{const ye=document.createElement("a");ye.download=`QR-${Q.name.replace(/\s+/g,"-")}.png`,ye.href=Q.qrCode,ye.click()},xe=Q=>{M(Q),F({name:Q.name,email:Q.email,phone:Q.phone,category:Q.category}),k(!0)},Vs=Q=>{M(Q),oe(!0)},[Us,ri]=ze.useState(null),fr=()=>{R(!0)};ze.useEffect(()=>{re&&!Us&&setTimeout(()=>{const Q=new FO("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0},!1);Q.render(ye=>{try{const Ae=JSON.parse(ye),Pe=u.find(rt=>rt.id===Ae.id);Pe?Q.clear().then(()=>{ri(null),M(Pe),oe(!0),R(!1)}):alert(" Tamu tidak ditemukan!")}catch{alert(" QR Code tidak valid!")}},ye=>{}),ri(Q)},300)},[re,Us,u]);const Yn=async(Q,ye)=>{if(window.confirm(`Apakah Anda yakin ingin menghapus RSVP dari ${ye}?`))try{await T1(fo(Br,"rsvp",Q)),alert(" RSVP berhasil dihapus!")}catch(Ae){console.error("Error deleting RSVP:",Ae),alert(" Gagal menghapus RSVP.")}},Ka=async(Q,ye)=>{if(window.confirm(`Apakah Anda yakin ingin menghapus ucapan dari ${ye}?`))try{await T1(fo(Br,"wishes",Q)),alert(" Ucapan berhasil dihapus!")}catch(Ae){console.error("Error deleting wish:",Ae),alert(" Gagal menghapus ucapan.")}},si=()=>{const Q=["Nama","Status Kehadiran","Jumlah Tamu","Pesan","Tanggal"],ye=de.map(wt=>[wt.name,wt.attendance==="0"?"Tidak Hadir":`Hadir (${wt.guests} orang)`,wt.guests,wt.message,vu(wt.timestamp,"dd MMM yyyy HH:mm",{locale:Rd})]),Ae=[Q.join(","),...ye.map(wt=>wt.map(vr=>`"${vr}"`).join(","))].join(`
`),Pe=new Blob([Ae],{type:"text/csv;charset=utf-8;"}),rt=document.createElement("a");rt.href=URL.createObjectURL(Pe),rt.download=`RSVP_${vu(new Date,"yyyy-MM-dd")}.csv`,rt.click()},tn=u.length,Za=u.filter(Q=>Q.status==="sudah-hadir").length,is=tn-Za,zo=Ge.length,St=ct.length;return n?O.jsx("div",{className:"p-10 text-center",children:"Loading..."}):t?O.jsxs("div",{className:"min-h-screen bg-linear-to-br from-blue-50 via-white to-purple-50",children:[O.jsx("header",{className:"bg-white shadow-md border-b-4 border-blue-500",children:O.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center space-x-3",children:[O.jsx("div",{className:"bg-blue-500 p-3 rounded-lg",children:O.jsx(su,{className:"w-8 h-8 text-white"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manajemen Tamu Undangan"}),O.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Kelola tamu dengan mudah dan modern"})]})]}),O.jsxs("div",{className:"flex space-x-3",children:[O.jsxs("button",{onClick:()=>V(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-all shadow-lg hover:shadow-xl",children:[O.jsx(r5,{className:"w-5 h-5"}),O.jsx("span",{className:"font-semibold",children:"Tambah Tamu"})]}),O.jsxs("button",{onClick:fr,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-all shadow-lg hover:shadow-xl",children:[O.jsx(XO,{className:"w-5 h-5"}),O.jsx("span",{className:"font-semibold",children:"Scan QR"})]})]})]})})}),O.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[O.jsx("div",{className:"bg-white rounded-xl shadow-md mb-6 p-2",children:O.jsxs("div",{className:"flex space-x-2",children:[O.jsx("button",{onClick:()=>a("guests"),className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all ${s==="guests"?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:O.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[O.jsx(su,{className:"w-5 h-5"}),O.jsxs("span",{children:["Tamu (",tn,")"]})]})}),O.jsx("button",{onClick:()=>a("rsvp"),className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all ${s==="rsvp"?"bg-green-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:O.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[O.jsx(sm,{className:"w-5 h-5"}),O.jsxs("span",{children:["RSVP (",zo,")"]})]})}),O.jsx("button",{onClick:()=>a("wishes"),className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all ${s==="wishes"?"bg-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:O.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[O.jsx(Rf,{className:"w-5 h-5"}),O.jsxs("span",{children:["Ucapan (",St,")"]})]})})]})}),s==="guests"&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tamu"}),O.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:tn})]}),O.jsx("div",{className:"bg-blue-100 p-4 rounded-full",children:O.jsx(su,{className:"w-8 h-8 text-blue-600"})})]})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Sudah Hadir"}),O.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:Za})]}),O.jsx("div",{className:"bg-green-100 p-4 rounded-full",children:O.jsx(qS,{className:"w-8 h-8 text-green-600"})})]})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Belum Hadir"}),O.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:is})]}),O.jsx("div",{className:"bg-orange-100 p-4 rounded-full",children:O.jsx(XS,{className:"w-8 h-8 text-orange-600"})})]})})]}),O.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[O.jsxs("div",{className:"relative",children:[O.jsx(h2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),O.jsx("input",{type:"text",placeholder:"Cari nama, email, atau telepon...",value:w,onChange:Q=>T(Q.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),O.jsxs("select",{value:S,onChange:Q=>I(Q.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[O.jsx("option",{value:"all",children:"Semua Kategori"}),O.jsx("option",{value:"VIP",children:"VIP"}),O.jsx("option",{value:"Keluarga",children:"Keluarga"}),O.jsx("option",{value:"Teman",children:"Teman"}),O.jsx("option",{value:"Rekan Kerja",children:"Rekan Kerja"})]}),O.jsxs("select",{value:q,onChange:Q=>X(Q.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[O.jsx("option",{value:"all",children:"Semua Status"}),O.jsx("option",{value:"belum-hadir",children:"Belum Hadir"}),O.jsx("option",{value:"sudah-hadir",children:"Sudah Hadir"})]})]})}),O.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:z?O.jsxs("div",{className:"p-12 text-center",children:[O.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),O.jsx("p",{className:"mt-4 text-gray-600",children:"Memuat data tamu..."})]}):p.length===0?O.jsxs("div",{className:"p-12 text-center",children:[O.jsx(su,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),O.jsx("p",{className:"text-gray-600 text-lg",children:"Belum ada tamu yang terdaftar"}),O.jsx("button",{onClick:()=>V(!0),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:"Tambah Tamu Pertama"})]}):O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"w-full",children:[O.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:O.jsxs("tr",{children:[O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Nama"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Email"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Telepon"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Kategori"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),O.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Aksi"})]})}),O.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(Q=>O.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[O.jsxs("td",{className:"px-6 py-4",children:[O.jsx("div",{className:"font-medium text-gray-900",children:Q.name}),O.jsx("div",{className:"text-sm text-gray-500",children:vu(Q.createdAt,"dd MMM yyyy",{locale:Rd})})]}),O.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.email}),O.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.phone}),O.jsx("td",{className:"px-6 py-4",children:O.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${Q.category==="VIP"?"bg-purple-100 text-purple-800":Q.category==="Keluarga"?"bg-blue-100 text-blue-800":Q.category==="Teman"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:Q.category})}),O.jsx("td",{className:"px-6 py-4",children:O.jsx("span",{className:`inline-flex items-center space-x-1 px-3 py-1 text-xs font-semibold rounded-full ${Q.status==="sudah-hadir"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Q.status==="sudah-hadir"?O.jsxs(O.Fragment,{children:[O.jsx(rm,{className:"w-3 h-3"}),O.jsx("span",{children:"Sudah Hadir"})]}):O.jsxs(O.Fragment,{children:[O.jsx(dl,{className:"w-3 h-3"}),O.jsx("span",{children:"Belum Hadir"})]})})}),O.jsx("td",{className:"px-6 py-4",children:O.jsxs("div",{className:"flex space-x-2",children:[O.jsx("button",{onClick:()=>Vs(Q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Lihat QR Code",children:O.jsx(Fx,{className:"w-5 h-5"})}),O.jsx("button",{onClick:()=>xe(Q),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit",children:O.jsx(n5,{className:"w-5 h-5"})}),O.jsx("button",{onClick:()=>ft(Q.id,Q.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus",children:O.jsx(f2,{className:"w-5 h-5"})})]})})]},Q.id))})]})})})]}),s==="rsvp"&&O.jsx(q9,{rsvpList:Ge,filteredRSVP:de,rsvpLoading:Ne,rsvpSearchTerm:nt,setRsvpSearchTerm:Yi,rsvpFilterStatus:xt,setRsvpFilterStatus:Gn,handleDeleteRSVP:Yn,exportRSVPtoCSV:si}),s==="wishes"&&O.jsx(X9,{wishList:ct,filteredWishes:Ce,wishLoading:Ht,wishSearchTerm:wi,setWishSearchTerm:Cn,handleDeleteWish:Ka})]}),$&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:O.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tambah Tamu Baru"}),O.jsx("button",{onClick:()=>V(!1),className:"text-gray-400 hover:text-gray-600",children:O.jsx(dl,{className:"w-6 h-6"})})]}),O.jsxs("form",{onSubmit:hr,className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap"}),O.jsx("input",{type:"text",value:j.name,onChange:Q=>F({...j,name:Q.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: John Doe",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),O.jsx("input",{type:"email",value:j.email,onChange:Q=>F({...j,email:Q.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: john@email.com",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"No. Telepon"}),O.jsx("input",{type:"tel",value:j.phone,onChange:Q=>F({...j,phone:Q.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: 08123456789",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),O.jsxs("select",{value:j.category,onChange:Q=>F({...j,category:Q.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[O.jsx("option",{value:"VIP",children:"VIP"}),O.jsx("option",{value:"Keluarga",children:"Keluarga"}),O.jsx("option",{value:"Teman",children:"Teman"}),O.jsx("option",{value:"Rekan Kerja",children:"Rekan Kerja"})]})]}),O.jsxs("div",{className:"flex space-x-3 pt-4",children:[O.jsx("button",{type:"button",onClick:()=>V(!1),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Batal"}),O.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-lg",children:"Tambah Tamu"})]})]})]})}),L&&D&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:O.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Data Tamu"}),O.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:O.jsx(dl,{className:"w-6 h-6"})})]}),O.jsxs("form",{onSubmit:Yt,className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap"}),O.jsx("input",{type:"text",value:j.name,onChange:Q=>F({...j,name:Q.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),O.jsx("input",{type:"email",value:j.email,onChange:Q=>F({...j,email:Q.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"No. Telepon"}),O.jsx("input",{type:"tel",value:j.phone,onChange:Q=>F({...j,phone:Q.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),O.jsxs("select",{value:j.category,onChange:Q=>F({...j,category:Q.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[O.jsx("option",{value:"VIP",children:"VIP"}),O.jsx("option",{value:"Keluarga",children:"Keluarga"}),O.jsx("option",{value:"Teman",children:"Teman"}),O.jsx("option",{value:"Rekan Kerja",children:"Rekan Kerja"})]})]}),O.jsxs("div",{className:"flex space-x-3 pt-4",children:[O.jsx("button",{type:"button",onClick:()=>k(!1),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Batal"}),O.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium shadow-lg",children:"Simpan Perubahan"})]})]})]})}),H&&D&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:O.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"QR Code Tamu"}),O.jsx("button",{onClick:()=>oe(!1),className:"text-gray-400 hover:text-gray-600",children:O.jsx(dl,{className:"w-6 h-6"})})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"bg-gray-50 p-6 rounded-lg mb-4",children:O.jsx("img",{src:D.qrCode,alt:"QR Code untuk tamu undangan",className:"w-64 h-64 mx-auto"})}),O.jsxs("div",{className:"mb-4",children:[O.jsx("h3",{className:"text-xl font-bold text-gray-900",children:D.name}),O.jsx("p",{className:"text-gray-600",children:D.email}),O.jsx("p",{className:"text-gray-600",children:D.phone}),O.jsx("span",{className:`inline-block mt-2 px-3 py-1 text-sm font-semibold rounded-full ${D.status==="sudah-hadir"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:D.status==="sudah-hadir"?"Sudah Hadir":"Belum Hadir"})]}),O.jsxs("div",{className:"space-y-3",children:[O.jsxs("div",{className:"flex space-x-3",children:[O.jsxs("button",{onClick:()=>Wt(D),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center space-x-2 font-medium",children:[O.jsx(KO,{className:"w-5 h-5"}),O.jsx("span",{children:"Download QR"})]}),D.status==="belum-hadir"&&O.jsxs("button",{onClick:()=>ve(D.id),className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center justify-center space-x-2 font-medium",children:[O.jsx(rm,{className:"w-5 h-5"}),O.jsx("span",{children:"Check In"})]})]}),O.jsxs("button",{onClick:()=>{const Q=`${Wx}/${D.id}`;navigator.clipboard.writeText(Q).then(()=>{alert(` URL Undangan berhasil di-copy!

${Q}

Kirim URL ini ke ${D.name} via WhatsApp/Email.`)}).catch(()=>{alert(` Copy URL ini:

${Q}`)})},className:"w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg flex items-center justify-center space-x-2 font-medium",children:[O.jsx(Fx,{className:"w-5 h-5"}),O.jsx("span",{children:"Copy URL Undangan"})]})]})]})]})}),re&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:O.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan QR Code"}),O.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:O.jsx(dl,{className:"w-6 h-6"})})]}),O.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:O.jsx("div",{id:"qr-reader",className:"w-full"})}),O.jsx("p",{className:"text-center text-gray-600 mt-4 text-sm",children:"Arahkan kamera ke QR Code tamu untuk melakukan check-in"})]})})]}):O.jsx(t8,{})}const Z9=sI.createRoot(document.getElementById("root"));Z9.render(O.jsx(Sb.StrictMode,{children:O.jsx(K9,{})}));
